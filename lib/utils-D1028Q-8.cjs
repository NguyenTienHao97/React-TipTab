"use strict";var ei=Object.create;var ut=Object.defineProperty;var ti=Object.getOwnPropertyDescriptor;var ni=Object.getOwnPropertyNames;var ii=Object.getPrototypeOf,ri=Object.prototype.hasOwnProperty;var ai=(e,t,n)=>t in e?ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var oi=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of ni(t))!ri.call(e,a)&&a!==n&&ut(e,a,{get:()=>t[a],enumerable:!(r=ti(t,a))||r.enumerable});return e};var qt=(e,t,n)=>(n=e!=null?ei(ii(e)):{},oi(t||!e||!e.__esModule?ut(n,"default",{value:e,enumerable:!0}):n,e));var re=(e,t,n)=>ai(e,typeof t!="symbol"?t+"":t,n);const i=require("react/jsx-runtime"),l=require("react");require("@radix-ui/react-toast");const p=require("lucide-react"),f=require("./tiptap-DyUrqWAR.cjs"),v=require("./vendor-D68ieoKh.cjs"),Ue=require("shiki"),b=require("./locales-Do6AAs2-.cjs"),si=require("@radix-ui/react-select"),Et=require("@radix-ui/react-slot"),at=require("tippy.js"),Me=require("react-dom"),ci=require("react-image-crop"),de=require("valtio"),li=require("@radix-ui/react-checkbox"),It=require("scroll-into-view-if-needed"),di=require("@radix-ui/react-tabs"),se=require("prosemirror-docx"),hi=require("docx"),it=require("mermaid"),ui=require("@radix-ui/react-dialog"),Rt=require("katex"),mi=require("@radix-ui/react-popover"),xi=require("@radix-ui/react-label"),gn=require("re-resizable"),fi=require("@radix-ui/react-separator"),gi=require("react-tweet"),Ye=require("@radix-ui/react-icons"),bi=require("react-colorful"),pi=require("@radix-ui/react-switch"),wi=require("@radix-ui/react-dropdown-menu"),_i=require("@radix-ui/react-tooltip"),vi=require("@radix-ui/react-toggle");function Q(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const n in e)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:()=>e[n]})}}return t.default=e,Object.freeze(t)}const B=Q(l),G=Q(si),vt=Q(li),ve=Q(di),J=Q(ui),We=Q(mi),bn=Q(xi),pn=Q(fi),yt=Q(pi),W=Q(wi),qe=Q(_i),wn=Q(vi);let mt;function xt(){return mt===void 0&&(mt=navigator.platform.includes("Mac")),mt}function ot(e){return`${e}`.toLowerCase()==="mod"?xt()?"⌘":"Ctrl":`${e}`.toLowerCase()==="alt"?xt()?"⌥":"Alt":`${e}`.toLowerCase()==="shift"?xt()?"⇧":"Shift":e}function st(e){return e.map(ot).join(" ")}function P(...e){return v.twMerge(v.clsx(e))}const y=l.forwardRef((e,t)=>{const{icon:n=void 0,tooltip:r=void 0,disabled:a=!1,customClass:o="",shortcutKeys:s=void 0,tooltipOptions:c={},action:h=void 0,isActive:d=void 0,children:u,asChild:m=!1,upload:x=!1,...g}=e,w=Xe[n],_=m?Et.Slot:Ze;return i.jsxs(Oe,{children:[i.jsx(Pe,{asChild:!0,children:i.jsxs(_,{ref:t,size:"sm",className:P("richtext-w-[32px] richtext-h-[32px]",o),disabled:a,onClick:h,"data-state":d!=null&&d()?"on":"off",...g,children:[w&&i.jsx(w,{className:"richtext-w-4 richtext-h-4"}),u]})}),r&&i.jsx(je,{...c,children:i.jsxs("div",{className:"richtext-flex richtext-flex-col richtext-items-center richtext-text-center richtext-max-w-24",children:[i.jsx("div",{children:r}),!!(s!=null&&s.length)&&i.jsx("span",{children:st(s)})]})})]})}),Ht=l.forwardRef(({asChild:e,...t},n)=>{var o;const r=Xe[t.icon],a=e?Et.Slot:F;return i.jsxs(Oe,{children:[i.jsx(Pe,{asChild:!0,children:i.jsx(a,{ref:n,className:"richtext-h-[32px] richtext-px-[5px] richtext-py-0 richtext-min-w-24  richtext-overflow-hidden",variant:"ghost",disabled:t==null?void 0:t.disabled,...t,children:i.jsxs("div",{className:"richtext-flex richtext-items-center richtext-h-full richtext-font-normal",children:[(t==null?void 0:t.title)&&i.jsx("div",{className:"richtext-flex-grow richtext-text-sm richtext-text-left richtext-truncate",children:t==null?void 0:t.title}),r&&i.jsx(r,{className:"richtext-flex-shrink-0 richtext-w-3 richtext-h-3 richtext-ml-1 richtext-text-zinc-500"})]})})}),i.jsx(je,{children:i.jsxs("div",{className:"richtext-flex richtext-flex-col richtext-items-center richtext-text-center richtext-max-w-24",children:[(t==null?void 0:t.tooltip)&&i.jsx("div",{children:t==null?void 0:t.tooltip}),i.jsx("div",{className:"richtext-flex",children:!!((o=t==null?void 0:t.shortcutKeys)!=null&&o.length)&&i.jsx("span",{children:st(t==null?void 0:t.shortcutKeys)})})]})})]})});function ze(e,t){const{state:n}=t,r=n.selection.$anchor;let a=!1;if(r.depth)for(let o=r.depth;o>0;o--)r.node(o).type.name===e&&(t.dispatchTransaction&&t.dispatchTransaction(n.tr.delete(r.before(o),r.after(o)).scrollIntoView()),a=!0);else{const o=n.selection.node;o&&o.type.name===e&&(t.chain().deleteSelection().run(),a=!0)}if(!a){const o=r.pos;if(o){const s=n.tr.doc.nodeAt(o);s&&s.type.name===e&&(t.dispatchTransaction&&t.dispatchTransaction(n.tr.delete(o,o+s.nodeSize)),a=!0)}}return a}function yi(e){return e}function Ge(e,t,n,r){const a=yi,[o,s]=l.useState(a(n)),c=l.useRef(o);return l.useEffect(()=>{const h=()=>{const d={...n,...e.getAttributes(t)};Object.keys(d).forEach(m=>{(d[m]===null||d[m]===void 0)&&(d[m]=n?n[m]:null)});const u=a(d);v.deepEqual(c.current,u)||(s(u),c.current=u)};return e.on("selectionUpdate",h),e.on("transaction",h),()=>{e.off("selectionUpdate",h),e.off("transaction",h)}},[e,n,t,a]),o}const Ke=B.forwardRef(({className:e,...t},n)=>i.jsx("textarea",{className:P("richtext-flex richtext-min-h-[80px] richtext-w-full richtext-rounded-md !richtext-border richtext-border-input richtext-bg-background richtext-px-3 richtext-py-2 richtext-text-sm richtext-ring-offset-background placeholder:richtext-text-muted-foreground focus-visible:richtext-outline-none focus-visible:richtext-ring-2 focus-visible:richtext-ring-ring focus-visible:richtext-ring-offset-2 disabled:richtext-cursor-not-allowed disabled:richtext-opacity-50",e),ref:n,...t}));Ke.displayName="Textarea";const ji=v.cva("richtext-inline-flex richtext-items-center richtext-justify-center richtext-whitespace-nowrap richtext-rounded-md richtext-text-sm richtext-font-medium richtext-ring-offset-background richtext-transition-colors focus-visible:richtext-outline-none focus-visible:richtext-ring-2 focus-visible:richtext-ring-ring focus-visible:richtext-ring-offset-2 disabled:richtext-pointer-events-none disabled:richtext-opacity-50",{variants:{variant:{default:"!richtext-bg-primary !richtext-text-primary-foreground hover:!richtext-bg-primary/90",destructive:"richtext-bg-destructive richtext-text-destructive-foreground hover:richtext-bg-destructive/90",outline:"richtext-border richtext-border-input richtext-bg-background hover:richtext-bg-accent hover:richtext-text-accent-foreground",secondary:"richtext-bg-secondary richtext-text-secondary-foreground hover:richtext-bg-secondary/80",ghost:"hover:richtext-bg-accent hover:richtext-text-accent-foreground",link:"richtext-text-primary richtext-underline-offset-4 hover:richtext-underline"},size:{default:"richtext-h-10 richtext-px-4 richtext-py-2",sm:"richtext-h-9 richtext-rounded-md richtext-px-3",lg:"richtext-h-11 richtext-rounded-md richtext-px-8",icon:"richtext-h-10 richtext-w-10"}},defaultVariants:{variant:"default",size:"default"}}),F=B.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...a},o)=>{const s=r?Et.Slot:"button";return i.jsx(s,{className:P(ji({variant:t,size:n,className:e})),ref:o,...a})});F.displayName="Button";const he=W.Root,ue=W.Trigger,Gt=W.Portal,Kt=W.Sub,jt=B.forwardRef(({className:e,inset:t,children:n,...r},a)=>i.jsxs(W.SubTrigger,{ref:a,className:P("richtext-flex richtext-cursor-default richtext-select-none richtext-items-center richtext-rounded-sm richtext-px-2 richtext-py-1.5 richtext-text-sm richtext-outline-none focus:richtext-bg-accent data-[state=open]:richtext-bg-accent",t&&"richtext-pl-8",e),...r,children:[n,i.jsx(p.ChevronRight,{className:"richtext-ml-auto richtext-h-4 richtext-w-4"})]}));jt.displayName=W.SubTrigger.displayName;const kt=B.forwardRef(({className:e,...t},n)=>i.jsx(W.SubContent,{ref:n,className:P("richtext-z-50 richtext-min-w-[8rem] richtext-overflow-hidden richtext-rounded-md !richtext-border richtext-bg-popover richtext-p-1 richtext-text-popover-foreground richtext-shadow-lg data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[state=closed]:richtext-fade-out-0 data-[state=open]:richtext-fade-in-0 data-[state=closed]:richtext-zoom-out-95 data-[state=open]:richtext-zoom-in-95 data-[side=bottom]:richtext-slide-in-from-top-2 data-[side=left]:richtext-slide-in-from-right-2 data-[side=right]:richtext-slide-in-from-left-2 data-[side=top]:richtext-slide-in-from-bottom-2",e),...t}));kt.displayName=W.SubContent.displayName;const ce=B.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(W.Portal,{children:i.jsx(W.Content,{ref:r,sideOffset:t,className:P("richtext-z-50 richtext-min-w-[8rem] richtext-overflow-hidden richtext-rounded-md !richtext-border richtext-bg-popover richtext-p-1 richtext-text-popover-foreground richtext-shadow-md data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[state=closed]:richtext-fade-out-0 data-[state=open]:richtext-fade-in-0 data-[state=closed]:richtext-zoom-out-95 data-[state=open]:richtext-zoom-in-95 data-[side=bottom]:richtext-slide-in-from-top-2 data-[side=left]:richtext-slide-in-from-right-2 data-[side=right]:richtext-slide-in-from-left-2 data-[side=top]:richtext-slide-in-from-bottom-2",e),...n})}));ce.displayName=W.Content.displayName;const ne=B.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(W.Item,{ref:r,className:P("richtext-relative richtext-flex richtext-cursor-default richtext-select-none richtext-items-center richtext-rounded-sm richtext-px-2 richtext-py-1.5 richtext-text-sm richtext-outline-none richtext-transition-colors focus:richtext-bg-accent focus:richtext-text-accent-foreground data-[disabled]:richtext-pointer-events-none data-[disabled]:richtext-opacity-50",t&&"richtext-pl-8",e),...n}));ne.displayName=W.Item.displayName;const ye=B.forwardRef(({className:e,children:t,checked:n,...r},a)=>i.jsxs(W.CheckboxItem,{ref:a,className:P("richtext-relative richtext-flex richtext-cursor-default richtext-select-none richtext-items-center richtext-rounded-sm richtext-py-1.5 richtext-pl-8 richtext-pr-2 richtext-text-sm richtext-outline-none richtext-transition-colors focus:richtext-bg-accent focus:richtext-text-accent-foreground data-[disabled]:richtext-pointer-events-none data-[disabled]:richtext-opacity-50",e),checked:n,...r,children:[i.jsx("span",{className:"richtext-absolute richtext-left-2 richtext-flex richtext-h-3.5 richtext-w-3.5 richtext-items-center richtext-justify-center",children:i.jsx(W.ItemIndicator,{children:i.jsx(p.Check,{className:"richtext-h-4 richtext-w-4"})})}),t]}));ye.displayName=W.CheckboxItem.displayName;const ki=B.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(W.RadioItem,{ref:r,className:P("richtext-relative richtext-flex richtext-cursor-default richtext-select-none richtext-items-center richtext-rounded-sm richtext-py-1.5 richtext-pl-8 richtext-pr-2 richtext-text-sm richtext-outline-none richtext-transition-colors focus:richtext-bg-accent focus:richtext-text-accent-foreground data-[disabled]:richtext-pointer-events-none data-[disabled]:richtext-opacity-50",e),...n,children:[i.jsx("span",{className:"richtext-absolute richtext-left-2 richtext-flex richtext-h-3.5 richtext-w-3.5 richtext-items-center richtext-justify-center",children:i.jsx(W.ItemIndicator,{children:i.jsx(p.Circle,{className:"richtext-h-2 richtext-w-2 richtext-fill-current"})})}),t]}));ki.displayName=W.RadioItem.displayName;const Ci=B.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(W.Label,{ref:r,className:P("richtext-px-2 richtext-py-1.5 richtext-text-sm richtext-font-semibold",t&&"richtext-pl-8",e),...n}));Ci.displayName=W.Label.displayName;const ct=B.forwardRef(({className:e,...t},n)=>i.jsx(W.Separator,{ref:n,className:P("richtext--mx-1 richtext-my-1 richtext-h-px richtext-bg-muted",e),...t}));ct.displayName=W.Separator.displayName;function _n({className:e,...t}){return i.jsx("span",{className:P("richtext-ml-auto richtext-text-xs richtext-tracking-widest richtext-opacity-60",e),...t})}_n.displayName="DropdownMenuShortcut";const Z=B.forwardRef(({className:e,type:t,...n},r)=>i.jsx("input",{type:t,className:P("richtext-flex richtext-h-10 richtext-w-full richtext-rounded-md !richtext-border richtext-border-input richtext-bg-background richtext-px-3 richtext-py-2 richtext-text-sm richtext-ring-offset-background file:richtext-border-0 file:richtext-bg-transparent file:richtext-text-sm file:richtext-font-medium placeholder:richtext-text-muted-foreground focus-visible:richtext-outline-none  disabled:richtext-cursor-not-allowed disabled:richtext-opacity-50",e),ref:r,...n}));Z.displayName="Input";const Ni=v.cva("richtext-text-sm richtext-font-medium richtext-leading-none peer-disabled:richtext-cursor-not-allowed peer-disabled:richtext-opacity-70"),X=B.forwardRef(({className:e,...t},n)=>i.jsx(bn.Root,{ref:n,className:P(Ni(),e),...t}));X.displayName=bn.Root.displayName;const ee=We.Root,te=We.Trigger,Y=B.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},a)=>i.jsx(We.Portal,{children:i.jsx(We.Content,{ref:a,align:t,sideOffset:n,className:P("richtext-z-50 richtext-w-72 richtext-rounded-md !richtext-border richtext-bg-popover richtext-p-4 richtext-text-popover-foreground richtext-shadow-md richtext-outline-none data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[state=closed]:richtext-fade-out-0 data-[state=open]:richtext-fade-in-0 data-[state=closed]:richtext-zoom-out-95 data-[state=open]:richtext-zoom-in-95 data-[side=bottom]:richtext-slide-in-from-top-2 data-[side=left]:richtext-slide-in-from-right-2 data-[side=right]:richtext-slide-in-from-left-2 data-[side=top]:richtext-slide-in-from-bottom-2",e),...r})}));Y.displayName=We.Content.displayName;const ie=B.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},a)=>i.jsx(pn.Root,{ref:a,decorative:n,orientation:t,className:P("richtext-shrink-0 richtext-bg-border",t==="horizontal"?"richtext-h-[1px] richtext-w-full":"richtext-h-full richtext-w-[1px]",e),...r}));ie.displayName=pn.Root.displayName;const zt=B.forwardRef(({className:e,...t},n)=>i.jsx(yt.Root,{className:P("richtext-peer richtext-inline-flex richtext-h-6 richtext-w-11 richtext-shrink-0 richtext-cursor-pointer richtext-items-center richtext-rounded-full richtext-border-2 richtext-border-transparent richtext-transition-colors focus-visible:richtext-outline-none focus-visible:richtext-ring-2 focus-visible:richtext-ring-ring focus-visible:richtext-ring-offset-2 focus-visible:richtext-ring-offset-background disabled:richtext-cursor-not-allowed disabled:richtext-opacity-50 data-[state=checked]:richtext-bg-primary data-[state=unchecked]:richtext-bg-input",e),...t,ref:n,children:i.jsx(yt.Thumb,{className:P("richtext-pointer-events-none richtext-block richtext-h-5 richtext-w-5 richtext-rounded-full richtext-bg-background richtext-shadow-lg richtext-ring-0 richtext-transition-transform data-[state=checked]:richtext-translate-x-5 data-[state=unchecked]:richtext-translate-x-0")})}));zt.displayName=yt.Root.displayName;const Ot=ve.Root,lt=B.forwardRef(({className:e,...t},n)=>i.jsx(ve.List,{ref:n,className:P("richtext-inline-flex richtext-h-10 richtext-items-center richtext-justify-center richtext-rounded-md richtext-bg-muted richtext-p-1 richtext-text-muted-foreground",e),...t}));lt.displayName=ve.List.displayName;const Ee=B.forwardRef(({className:e,...t},n)=>i.jsx(ve.Trigger,{ref:n,className:P("richtext-inline-flex richtext-items-center richtext-justify-center richtext-whitespace-nowrap richtext-rounded-sm richtext-px-3 richtext-py-1.5 richtext-text-sm richtext-font-medium richtext-ring-offset-background richtext-transition-all focus-visible:richtext-outline-none focus-visible:richtext-ring-2 focus-visible:richtext-ring-ring focus-visible:richtext-ring-offset-2 disabled:richtext-pointer-events-none disabled:richtext-opacity-50 data-[state=active]:richtext-bg-background data-[state=active]:richtext-text-foreground data-[state=active]:richtext-shadow-sm",e),...t}));Ee.displayName=ve.Trigger.displayName;const Ie=B.forwardRef(({className:e,...t},n)=>i.jsx(ve.Content,{ref:n,className:P("richtext-mt-2 richtext-ring-offset-background focus-visible:richtext-outline-none focus-visible:richtext-ring-2 focus-visible:richtext-ring-ring focus-visible:richtext-ring-offset-2",e),...t}));Ie.displayName=ve.Content.displayName;const Si=v.cva("richtext-inline-flex richtext-items-center richtext-justify-center richtext-rounded-md richtext-text-sm richtext-font-medium richtext-ring-offset-background richtext-transition-colors hover:richtext-bg-muted hover:richtext-text-muted-foreground focus-visible:richtext-outline-none focus-visible:richtext-ring-2 focus-visible:richtext-ring-ring focus-visible:richtext-ring-offset-2 disabled:richtext-pointer-events-none disabled:richtext-opacity-50 data-[state=on]:richtext-bg-accent data-[state=on]:richtext-text-accent-foreground",{variants:{variant:{default:"richtext-bg-transparent",outline:"richtext-border richtext-border-input richtext-bg-transparent hover:richtext-bg-accent hover:richtext-text-accent-foreground"},size:{default:"richtext-h-10 richtext-px-3",sm:"richtext-h-9 richtext-px-2",lg:"richtext-h-11 richtext-px-5"}},defaultVariants:{variant:"default",size:"default"}}),Ze=B.forwardRef(({className:e,variant:t,size:n,...r},a)=>i.jsx(wn.Root,{ref:a,className:P(Si({variant:t,size:n,className:e})),...r}));Ze.displayName=wn.Root.displayName;const Ti=qe.Provider,Oe=qe.Root,Pe=qe.Trigger,je=B.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(qe.Content,{ref:r,sideOffset:t,className:P("richtext-z-50 richtext-overflow-hidden richtext-rounded-md !richtext-border richtext-bg-popover richtext-px-3 richtext-py-1.5 richtext-text-sm richtext-text-popover-foreground richtext-shadow-md richtext-animate-in richtext-fade-in-0 richtext-zoom-in-95 data-[side=bottom]:richtext-slide-in-from-top-2 data-[side=left]:richtext-slide-in-from-right-2 data-[side=right]:richtext-slide-in-from-left-2 data-[side=top]:richtext-slide-in-from-bottom-2",e),...n}));je.displayName=qe.Content.displayName;const Ai=G.Root,Li=G.Value,vn=B.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(G.Trigger,{ref:r,className:P("richtext-flex richtext-h-10 richtext-w-full richtext-items-center richtext-justify-between richtext-rounded-md richtext-border richtext-border-input richtext-bg-background richtext-px-3 richtext-py-2 richtext-text-sm richtext-ring-offset-background placeholder:richtext-text-muted-foreground focus:richtext-outline-none focus:richtext-ring-2 focus:richtext-ring-ring focus:richtext-ring-offset-2 disabled:richtext-cursor-not-allowed disabled:richtext-opacity-50 [&>span]:richtext-line-clamp-1",e),...n,children:[t,i.jsx(G.Icon,{asChild:!0,children:i.jsx(p.ChevronDown,{className:"richtext-h-4 richtext-w-4 richtext-opacity-50"})})]}));vn.displayName=G.Trigger.displayName;const yn=B.forwardRef(({className:e,...t},n)=>i.jsx(G.ScrollUpButton,{ref:n,className:P("richtext-flex richtext-cursor-default richtext-items-center richtext-justify-center richtext-py-1",e),...t,children:i.jsx(p.ChevronUp,{className:"richtext-h-4 richtext-w-4"})}));yn.displayName=G.ScrollUpButton.displayName;const jn=B.forwardRef(({className:e,...t},n)=>i.jsx(G.ScrollDownButton,{ref:n,className:P("richtext-flex richtext-cursor-default richtext-items-center richtext-justify-center richtext-py-1",e),...t,children:i.jsx(p.ChevronDown,{className:"richtext-h-4 richtext-w-4"})}));jn.displayName=G.ScrollDownButton.displayName;const kn=B.forwardRef(({className:e,children:t,position:n="popper",...r},a)=>i.jsx(G.Portal,{children:i.jsxs(G.Content,{ref:a,className:P("richtext-relative richtext-z-50 richtext-max-h-60 richtext-overflow-y-auto richtext-min-w-[8rem] richtext-overflow-hidden richtext-rounded-md richtext-border richtext-bg-popover richtext-text-popover-foreground richtext-shadow-md data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[state=closed]:richtext-fade-out-0 data-[state=open]:richtext-fade-in-0 data-[state=closed]:richtext-zoom-out-95 data-[state=open]:richtext-zoom-in-95 data-[side=bottom]:richtext-slide-in-from-top-2 data-[side=left]:richtext-slide-in-from-right-2 data-[side=right]:richtext-slide-in-from-left-2 data-[side=top]:richtext-slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:richtext-translate-y-1 data-[side=left]:richtext--translate-x-1 data-[side=right]:richtext-translate-x-1 data-[side=top]:richtext--translate-y-1",e),position:n,...r,children:[i.jsx(yn,{}),i.jsx(G.Viewport,{className:P("richtext-p-1",n==="popper"&&"richtext-h-[var(--radix-select-trigger-height)] richtext-w-full richtext-min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(jn,{})]})}));kn.displayName=G.Content.displayName;const Mi=B.forwardRef(({className:e,...t},n)=>i.jsx(G.Label,{ref:n,className:P("richtext-py-1.5 richtext-pl-8 richtext-pr-2 richtext-text-sm richtext-font-semibold",e),...t}));Mi.displayName=G.Label.displayName;const Ct=B.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(G.Item,{ref:r,className:P("richtext-relative richtext-flex richtext-w-full richtext-cursor-default richtext-select-none richtext-items-center richtext-rounded-sm richtext-py-1.5 richtext-pl-8 richtext-pr-2 richtext-text-sm richtext-outline-none focus:richtext-bg-accent focus:richtext-text-accent-foreground data-[disabled]:richtext-pointer-events-none data-[disabled]:richtext-opacity-50",e),...n,children:[i.jsx("span",{className:"richtext-absolute richtext-left-2 richtext-flex richtext-h-3.5 richtext-w-3.5 richtext-items-center richtext-justify-center",children:i.jsx(G.ItemIndicator,{children:i.jsx(p.Check,{className:"richtext-h-4 richtext-w-4"})})}),i.jsx(G.ItemText,{children:t})]}));Ct.displayName=G.Item.displayName;const Ei=B.forwardRef(({className:e,...t},n)=>i.jsx(G.Separator,{ref:n,className:P("richtext--mx-1 richtext-my-1 richtext-h-px richtext-bg-muted",e),...t}));Ei.displayName=G.Separator.displayName;const Cn=B.forwardRef(({className:e,...t},n)=>i.jsx(vt.Root,{ref:n,className:P("!richtext-peer !richtext-h-4 !richtext-w-4 !richtext-p-0 !richtext-shrink-0 !richtext-rounded-sm !richtext-border !richtext-border-primary !richtext-ring-offset-background focus-visible:!richtext-outline-none focus-visible:!richtext-ring-2 focus-visible:!richtext-ring-ring focus-visible:!richtext-ring-offset-2 disabled:!richtext-cursor-not-allowed disabled:!richtext-opacity-50 data-[state=checked]:!richtext-bg-primary data-[state=checked]:!richtext-text-primary-foreground",e),...t,children:i.jsx(vt.Indicator,{className:P("!richtext-flex !richtext-p-0 !richtext-items-center !richtext-justify-center !richtext-text-current"),children:i.jsx(p.Check,{className:"!richtext-h-4 !richtext-w-4"})})}));Cn.displayName=vt.Root.displayName;function Ii({editor:e,...t}){const n=Ge(e,_e.name,{text:"",defaultShowPicker:!1}),{text:r,defaultShowPicker:a}=n,[o,s]=l.useState(""),[c,h]=l.useState(!1),d=l.useCallback(()=>e.isActive(_e.name),[e]),u=l.useCallback(()=>ze(_e.name,e),[e]),m=l.useCallback(()=>{e.chain().focus().setKatex({text:o}).run(),h(!1)},[e,o]);l.useEffect(()=>{a&&(h(!0),e.chain().updateAttributes(_e.name,{defaultShowPicker:!1}).focus().run())},[e,a,h]),l.useEffect(()=>{c&&s(r||"")},[c]);const x=l.useMemo(()=>{try{return Rt.renderToString(`${o}`)}catch{return o}},[o]),g=l.useMemo(()=>`${o}`.trim()?i.jsx("span",{contentEditable:!1,dangerouslySetInnerHTML:{__html:x||""}}):null,[o,x]);return i.jsx(f.BubbleMenu,{editor:e,pluginKey:"Katex-bubble-menu",shouldShow:d,tippyOptions:{popperOptions:{modifiers:[{name:"flip",enabled:!1}]},placement:"bottom-start",offset:[-2,16],zIndex:9999,onHidden:()=>{h(!1)}},children:t!=null&&t.disabled?i.jsx(i.Fragment,{}):i.jsx("div",{className:"richtext-p-2 richtext-bg-white !richtext-border richtext-rounded-lg richtext-shadow-sm dark:richtext-bg-black richtext-border-neutral-200 dark:richtext-border-neutral-800",children:c?i.jsxs(i.Fragment,{children:[i.jsx(Ke,{value:o,onChange:w=>s(w.target.value),autoFocus:!0,placeholder:"Formula text",rows:3,defaultValue:r,style:{marginBottom:8}}),g&&i.jsx("div",{className:"richtext-my-[10px] richtext-p-[10px] richtext-rounded-[6px] !richtext-border-[1px] richtext-whitespace-nowrap richtext-overflow-auto",children:g}),i.jsxs("div",{className:"richtext-flex richtext-items-center richtext-justify-between richtext-gap-[6px]",children:[i.jsx(F,{onClick:m,className:"richtext-flex-1",children:"Submit"}),i.jsx("a",{href:"https://katex.org/docs/supported",target:"_blank",rel:"noreferrer noopener",children:i.jsx(p.HelpCircle,{size:16})})]})]}):i.jsxs("div",{className:"richtext-flex richtext-items-center richtext-justify-center richtext-gap-[6px]",children:[i.jsx(y,{tooltip:"Edit",action:()=>h(!c),children:i.jsx(p.Pencil,{size:16})}),i.jsx(y,{tooltip:"Delete",action:u,children:i.jsx(p.Trash2,{size:16})})]})})})}function Nn(e){return e=e||new Map,{all:e,on(t,n){const r=e.get(t);r?r.push(n):e.set(t,[n])},off(t,n){const r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit(t,n){let r=e.get(t);r&&[...r].map(a=>{a(n)}),r=e.get("*"),r&&[...r].map(a=>{a(t,n)})}}}const Ri={padding:"0 12px 12px"},Sn=({width:e,maxWidth:t,height:n,onOk:r,children:a})=>{const{t:o}=b.useLocale(),[s,c]=l.useState({width:"",height:"",maxWidth:""});l.useEffect(()=>{c({width:e,height:n,maxWidth:t})},[n,t,e]);function h(d){d.preventDefault(),d.stopPropagation(),r(s)}return i.jsxs(ee,{modal:!0,children:[i.jsx(te,{asChild:!0,children:a}),i.jsx(Y,{children:i.jsx("div",{style:Ri,children:i.jsxs("form",{className:"richtext-flex richtext-flex-col richtext-gap-2",onSubmit:h,children:[i.jsx(X,{className:"mb-[6px]",children:"Width"}),i.jsx("div",{className:"richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5",children:i.jsx("div",{className:"richtext-relative richtext-items-center richtext-w-full richtext-max-w-sm",children:i.jsx(Z,{type:"number",value:s.width,required:!0,onChange:d=>c({...s,width:d.target.value})})})}),i.jsx(X,{className:"mb-[6px]",children:"Max Width"}),i.jsx("div",{className:"richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5",children:i.jsx("div",{className:"richtext-relative richtext-items-center richtext-w-full richtext-max-w-sm",children:i.jsx(Z,{type:"number",value:s.maxWidth,required:!0,onChange:d=>c({...s,maxWidth:d.target.value})})})}),i.jsx(X,{className:"mb-[6px]",children:"Height"}),i.jsx("div",{className:"richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5",children:i.jsx("div",{className:"richtext-relative richtext-items-center richtext-w-full richtext-max-w-sm",children:i.jsx(Z,{type:"number",value:s.height,required:!0,onChange:d=>c({...s,height:d.target.value})})})}),i.jsx(F,{type:"submit",className:"richtext-self-end richtext-mt-2",children:o("editor.link.dialog.button.apply")})]})})})]})},Hi="_wrap_15k3c_1",zi="_renderWrap_15k3c_7",Oi="_title_15k3c_14",Pi="_icon_15k3c_20",Di="_handlerWrap_15k3c_30",Be={wrap:Hi,renderWrap:zi,title:Oi,icon:Pi,handlerWrap:Di};function Tn(e,t,n){return e<t?t:e>n?n:e}const Bi=e=>typeof e=="number",$i=e=>typeof e=="string",Fi=e=>typeof e=="function";function Vi(e,t="px"){if(!e)return e;const n=Bi(e)?String(e):e,r=Number.parseFloat(n),a=n.match(/[a-z%]+$/i),o=a?a[0]:t;return Number.isNaN(r)?e:r+o}function Ui(e,t){if(!e)return!1;const{extensions:n=[]}=(e==null?void 0:e.extensionManager)??{};return!!n.find(a=>a.name===t)}function Nt(e){return e.map(t=>$i(t)?{value:t,name:t}:t)}const Wi=10,qi=200,Zt=15,Xt={width:"100%",height:"100%",maxWidth:"100%"};function Gi({editor:e,node:t,updateAttributes:n}){const r=l.useRef(null),a=e.isActive(be.name),{data:o,width:s,height:c}=t.attrs,[h,d]=l.useState(null),[u,m]=l.useState(!0),[x,g]=l.useState(null),[w,_]=l.useState(!1),[S,A]=l.useState(100),k=l.useCallback(T=>{T&&_(!0)},[_]),j=l.useCallback(T=>()=>{A(I=>Tn(T==="minus"?I-Zt:I+Zt,Wi,qi))},[]);l.useEffect(()=>{let T=!1;return import("@excalidraw/excalidraw").then(I=>{T||(r.current=I.exportToSvg)}).catch(I=>!T&&g(I)).finally(()=>!T&&m(!1)),()=>{T=!0}},[m,o]),l.useEffect(()=>{let T=!1;return(async()=>{if(T||u||x||!w||!o)return;const O=await r.current(o);T||(O.setAttribute("width","100%"),O.setAttribute("height","100%"),O.setAttribute("display","block"),d(O))})(),()=>{T=!0}},[o,u,x,w]);const N=T=>{n({width:T.width,height:T.height})};return i.jsx(f.NodeViewWrapper,{className:v.clsx(Be.wrap,a&&Be.isActive),children:i.jsx(v.VisibilitySensor,{onChange:k,children:i.jsx(gn.Resizable,{size:{width:Number.parseInt(s),height:Number.parseInt(c)},onResizeStop:(T,I,O,E)=>{N({width:Number.parseInt(s)+E.width,height:Number.parseInt(c)+E.height})},children:i.jsxs("div",{className:v.clsx(Be.renderWrap,"render-wrapper"),style:{...Xt,overflow:"hidden"},children:[x&&i.jsx("div",{style:Xt,children:i.jsx("p",{children:x.message||x})}),u&&i.jsx("p",{children:"Loading..."}),!u&&!x&&w&&i.jsx("div",{style:{height:"100%",maxHeight:"100%",padding:24,overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",transform:`scale(${S/100})`,transition:"all ease-in-out .3s"},dangerouslySetInnerHTML:{__html:(h==null?void 0:h.outerHTML)??""}}),i.jsx("div",{className:Be.title}),i.jsxs("div",{className:Be.handlerWrap,children:[i.jsx(y,{icon:"ZoomOut",action:j("minus"),tooltip:"Zoom Out"}),i.jsx(y,{icon:"ZoomIn",action:j("plus"),tooltip:"Zoom In"})]})]})})})})}const Ki=l.memo(Gi,(e,t)=>!!v.deepEqual(e.node.attrs,t.node.attrs));function Zi(e,t="{}"){try{return JSON.stringify(e)}catch{return t}}function Xi(e){try{return JSON.stringify(e)}catch{return JSON.stringify({})}}function K(e,t=!1){return n=>{const r=e.startsWith("data-")?e:`data-${e}`;let a=decodeURIComponent(n.getAttribute(r));if(a==null||typeof a=="string"&&a==="null")try{const c=n.outerHTML.match(/([\s\S])+?="([\s\S])+?"/g);c&&c.length&&(a=(c.map(d=>d.trim()).reduce((d,u)=>{const m=u.indexOf("="),x=[u.slice(0,m),u.slice(m+1).slice(1,-1)];return d[x[0]]=x[1],d},{})[e.toLowerCase()]||"").replaceAll("&quot;",'"'))}catch(s){console.error("Error getDatasetAttribute ",s.message,n)}if(t)try{return JSON.parse(a)}catch{return{}}if(a.includes("%")||a.includes("auto"))return a;const o=Number.parseInt(a);return o!==o?a:o}}function Yi(e){const{attrs:t}=e;return Object.keys(t).reduce((n,r)=>{const a=t[r];if(a==null)return n;let o="";return typeof a=="object"?o=Xi(a):o=a,n[r]=o,n},Object.create(null))}const ke=J.Root,Ce=J.Trigger,Ji=J.Portal,An=B.forwardRef(({className:e,...t},n)=>i.jsx(J.Overlay,{ref:n,className:P("richtext-fixed richtext-inset-0 richtext-z-50 richtext-bg-black/80 richtext- data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[state=closed]:richtext-fade-out-0 data-[state=open]:richtext-fade-in-0",e),...t}));An.displayName=J.Overlay.displayName;const me=B.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(Ji,{children:[i.jsx(An,{}),i.jsxs(J.Content,{ref:r,className:P("richtext-dialog-content richtext-fixed richtext-left-[50%] richtext-top-[50%] richtext-z-50 richtext-grid richtext-w-full richtext-max-w-lg richtext-translate-x-[-50%] richtext-translate-y-[-50%] richtext-gap-4 richtext-border richtext-bg-background richtext-p-6 richtext-shadow-lg richtext-duration-200 data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[state=closed]:richtext-fade-out-0 data-[state=open]:richtext-fade-in-0 data-[state=closed]:richtext-zoom-out-95 data-[state=open]:richtext-zoom-in-95 data-[state=closed]:richtext-slide-out-to-left-1/2 data-[state=closed]:richtext-slide-out-to-top-[48%] data-[state=open]:richtext-slide-in-from-left-1/2 data-[state=open]:richtext-slide-in-from-top-[48%] sm:richtext-rounded-lg",e),...n,children:[t,i.jsxs(J.Close,{className:"richtext-absolute richtext-right-4 richtext-top-4 richtext-rounded-sm richtext-opacity-70 richtext-ring-offset-background richtext-transition-opacity hover:richtext-opacity-100 focus:richtext-outline-none focus:richtext-ring-2 focus:richtext-ring-ring focus:richtext-ring-offset-2 disabled:richtext-pointer-events-none data-[state=open]:richtext-bg-accent data-[state=open]:richtext-text-muted-foreground",children:[i.jsx(p.X,{className:"richtext-h-4 richtext-w-4"}),i.jsx("span",{className:"richtext-sr-only",children:"Close"})]})]})]}));me.displayName=J.Content.displayName;function Ln({className:e,...t}){return i.jsx("div",{className:P("richtext-flex richtext-flex-col richtext-space-y-1.5 richtext-text-center sm:richtext-text-left",e),...t})}Ln.displayName="DialogHeader";function De({className:e,...t}){return i.jsx("div",{className:P("richtext-flex richtext-flex-col-reverse sm:richtext-flex-row sm:richtext-justify-end sm:richtext-space-x-2",e),...t})}De.displayName="DialogFooter";const xe=B.forwardRef(({className:e,...t},n)=>i.jsx(J.Title,{ref:n,className:P("richtext-text-lg richtext-font-semibold richtext-leading-none richtext-tracking-tight",e),...t}));xe.displayName=J.Title.displayName;const Qi=B.forwardRef(({className:e,...t},n)=>i.jsx(J.Description,{ref:n,className:P("richtext-text-sm richtext-text-muted-foreground",e),...t}));Qi.displayName=J.Description.displayName;let ft;function Pt(){try{return ft||(ft=Nn()),ft}catch{throw new Error("Error EventEmitter")}}const St="OPEN_EXCALIDRAW_SETTING_MODAL";function er(e,t){Pt().on(e,t)}function tr(e,t){Pt().off(e,t)}function nr(e){Pt().emit(St,e)}const ir=({editor:e})=>{const[t,n]=l.useState(null),[r,a]=l.useState({}),[o,s]=l.useState({elements:[],appState:{isLoading:!1},files:null}),[c,h]=l.useState(!1),[d,u]=l.useState(!0),[m,x]=l.useState(null),g=l.useCallback(A=>{A&&import("@excalidraw/excalidraw").then(k=>{n(k.Excalidraw)}).catch(x).finally(()=>u(!1))},[u]),w=l.useCallback(A=>{setTimeout(()=>{A.refresh()})},[]),_=l.useCallback((A,k,j)=>{a({elements:A,appState:{isLoading:!1},files:j})},[]),S=l.useCallback(()=>{if(!t){h(!1);return}e.chain().focus().setExcalidraw({data:r}).run(),h(!1)},[t,e,r,h]);return l.useEffect(()=>{const A=k=>{h(!0),k&&s(k.data)};return er(St,A),()=>{tr(St,A)}},[e,h]),i.jsxs(ke,{open:c,onOpenChange:h,children:[i.jsx(Ce,{asChild:!0,children:i.jsx(y,{icon:"Excalidraw",tooltip:"Excalidraw",action:()=>h(!0)})}),i.jsxs(me,{className:"!richtext-max-w-[1300px] richtext-z-[99999]",children:[i.jsx(xe,{children:"Excalidraw"}),i.jsxs("div",{style:{height:"100%",borderWidth:1},children:[d&&i.jsx("p",{children:"Loading..."}),m&&i.jsx("p",{children:m&&m.message||"Error"}),i.jsx("div",{style:{width:"100%",height:600},ref:g,children:!d&&!m&&t?i.jsx(t,{ref:w,onChange:_,langCode:"en",initialData:o}):null})]}),i.jsx(De,{children:i.jsx(F,{type:"button",onClick:S,children:"Save changes"})})]})]})},Yt={elements:[]},be=f.Node.create({name:"excalidraw",group:"block",selectable:!0,atom:!0,draggable:!0,inline:!1,addAttributes(){return{defaultShowPicker:{default:!1},createUser:{default:null},width:{default:"100%",parseHTML:K("width")},height:{default:240,parseHTML:K("height")},data:{default:Yt,parseHTML:K("data",!0)}}},addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),HTMLAttributes:{class:"excalidraw"},button:({editor:t})=>({component:ir,componentProps:{editor:t}})}},parseHTML(){return[{tag:"div[class=excalidraw]"}]},renderHTML({HTMLAttributes:e,node:t}){return["div",f.mergeAttributes(this.options.HTMLAttributes,e,Yi(t))]},addCommands(){return{setExcalidraw:e=>({tr:t,commands:n,chain:r})=>{var a,o,s;return e=e||{},e.data=e.data||Yt,((s=(o=(a=t.selection)==null?void 0:a.node)==null?void 0:o.type)==null?void 0:s.name)==this.name?n.updateAttributes(this.name,e):r().insertContent({type:this.name,attrs:e}).run()}}},addNodeView(){return f.ReactNodeViewRenderer(Ki)},addInputRules(){return[f.nodeInputRule({find:/^\$excalidraw\$$/,type:this.type,getAttributes:()=>({width:"100%"})})]}}),fe=new Map;function rr(e){const t=e.options.element;fe.has("width")||fe.set("width",t.clientWidth),fe.has("width")&&fe.get("width")<=0&&fe.set("width",t.clientWidth);const n={attributes:!0,childList:!0,subtree:!0},r=function(){fe.set("width",t.clientWidth)},a=new MutationObserver(r);return a.observe(t,n),e.on("destroy",()=>{a.disconnect()}),{width:fe.get("width")}}function ar({editor:e}){const{t}=b.useLocale(),{width:n}=rr(e),r=Ge(e,be.name,{defaultShowPicker:!1,createUser:"",width:0,height:0}),{defaultShowPicker:a,createUser:o,width:s,height:c}=r,h=l.useCallback(x=>{e.chain().updateAttributes(be.name,x).setNodeSelection(e.state.selection.from).focus().run()},[e]),d=l.useCallback(()=>{nr(r)},[e,r]),u=l.useCallback(()=>e.isActive(be.name),[e]),m=l.useCallback(()=>ze(be.name,e),[e]);return l.useEffect(()=>{a&&(d(),e.chain().updateAttributes(be.name,{defaultShowPicker:!1}).focus().run())},[o,a,e,d]),i.jsx(f.BubbleMenu,{className:"bubble-menu",editor:e,pluginKey:"excalidraw-bubble-menu",shouldShow:u,tippyOptions:{popperOptions:{modifiers:[{name:"flip",enabled:!1}]},placement:"bottom-start",offset:[-2,16],zIndex:9999},children:i.jsxs("div",{className:"richtext-w-auto richtext-px-3 richtext-py-2 richtext-transition-all !richtext-border richtext-rounded-sm richtext-shadow-sm richtext-pointer-events-auto richtext-select-none richtext-border-neutral-200 dark:richtext-border-neutral-800 richtext-bg-background",children:[i.jsx(y,{icon:"Pencil",action:d,tooltip:t("editor.edit")}),i.jsx(Sn,{width:s,maxWidth:n,height:c,onOk:h,children:i.jsx(y,{icon:"Settings",tooltip:t("editor.settings")})}),i.jsx(y,{icon:"Trash2",action:m,tooltip:t("editor.delete")})]})})}const or="_wrap_5y04w_1",sr="_handlerWrap_5y04w_11",cr="_innerWrap_5y04w_15",lr="_emptyWrap_5y04w_23",Jt={wrap:or,handlerWrap:sr,innerWrap:cr,emptyWrap:lr},Mn=de.proxy({disable:!1});function dt(){return de.useSnapshot(Mn).disable}const dr={setDisable:e=>{Mn.disable=e}};function hr({editor:e,node:t,updateAttributes:n}){const r=dt(),{url:a,width:o,height:s}=t.attrs,[c,h]=l.useState("");function d(){c&&e.chain().updateAttributes(pe.name,{url:c}).setNodeSelection(e.state.selection.from).focus().run()}const u=l.useCallback(m=>{n({width:m.width,height:m.height})},[n]);return i.jsxs(f.NodeViewWrapper,{children:[!a&&i.jsxs("div",{className:"richtext-max-w-[600px] richtext-mx-[auto] richtext-my-[12px] richtext-flex richtext-items-center richtext-justify-center richtext-gap-[10px] richtext-p-[10px] richtext-border-[1px] richtext-border-solid richtext-border-[#ccc] richtext-rounded-[12px]",children:[i.jsx(Z,{value:c,onInput:m=>h(m.target.value),type:"url",className:"richtext-flex-1",autoFocus:!0,placeholder:"Enter link"}),i.jsx(F,{className:"richtext-w-[60px]",onClick:d,children:"OK"})]}),a&&i.jsx(gn.Resizable,{size:{width:Number.parseInt(o),height:Number.parseInt(s)},onResizeStop:(m,x,g,w)=>{u({width:Number.parseInt(o)+w.width,height:Number.parseInt(s)+w.height})},children:i.jsx("div",{className:v.clsx(Jt.wrap,"render-wrapper"),children:i.jsx("div",{className:Jt.innerWrap,style:{pointerEvents:r?"none":"auto"},children:i.jsx("iframe",{src:a,className:"richtext-my-[12px] "})})})})]})}const pe=f.Node.create({name:"iframe",content:"",marks:"",group:"block",selectable:!0,atom:!0,draggable:!0,addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),HTMLAttributes:{class:"iframe"},button:({editor:t,extension:n,t:r})=>({component:y,componentProps:{action:a=>t.commands.setIframe(a),upload:n.options.upload,disabled:!t.can().setIframe({}),icon:"Iframe",tooltip:r("editor.iframe.tooltip")}})}},addAttributes(){return{width:{default:600,parseHTML:K("width")},height:{default:300,parseHTML:K("height")},url:{default:null,parseHTML:K("url")},defaultShowPicker:{default:!1},frameborder:{default:0},allowfullscreen:{default:this.options.allowFullscreen,parseHTML:()=>this.options.allowFullscreen}}},parseHTML(){return[{tag:"iframe"}]},renderHTML({HTMLAttributes:e}){return["iframe",f.mergeAttributes(this.options.HTMLAttributes,e)]},addCommands(){return{setIframe:e=>({tr:t,commands:n,chain:r})=>{var o,s,c;if(((c=(s=(o=t.selection)==null?void 0:o.node)==null?void 0:s.type)==null?void 0:c.name)==this.name)return n.updateAttributes(this.name,e);const a=e||{url:""};return r().insertContent({type:this.name,attrs:a}).run()}}},addInputRules(){return[f.nodeInputRule({find:/^\$iframe\$$/,type:this.type,getAttributes:()=>({width:"100%"})})]},addNodeView(){return f.ReactNodeViewRenderer(hr)}});function ur({editor:e}){const{t}=b.useLocale(),{width:n,height:r,url:a}=Ge(e,pe.name,{width:0,height:0,url:"",defaultShowPicker:!1}),[o,s]=l.useState(!1),[c,h]=l.useState(""),d=l.useCallback(()=>{s(!1)},[s]);l.useEffect(()=>{o&&h(a)},[o,a]);const u=l.useCallback(()=>{e.chain().updateAttributes(pe.name,{url:c}).setNodeSelection(e.state.selection.from).focus().run(),s(!1)},[e,c,s]),m=l.useCallback(()=>{window.open(a,"_blank")},[a]),x=l.useCallback(()=>{s(!0)},[s]),g=l.useCallback(S=>{e.chain().updateAttributes(pe.name,S).setNodeSelection(e.state.selection.from).focus().run()},[e]),w=l.useCallback(()=>e.isActive(pe.name)&&!a,[e,a]),_=l.useCallback(()=>ze(pe.name,e),[e]);return i.jsxs(i.Fragment,{children:[i.jsx(f.BubbleMenu,{className:"bubble-menu",editor:e,pluginKey:"iframe-bubble-menu",shouldShow:w,tippyOptions:{popperOptions:{modifiers:[{name:"flip",enabled:!1}]},placement:"bottom-start",offset:[-2,16],zIndex:9999},children:i.jsxs("div",{className:"richtext-w-auto richtext-px-3 richtext-py-2 richtext-transition-all !richtext-border richtext-rounded-sm richtext-shadow-sm richtext-pointer-events-auto richtext-select-none richtext-border-neutral-200 dark:richtext-border-neutral-800 richtext-bg-background",children:[i.jsx(y,{action:m,icon:"Eye",tooltip:"Visit Link"}),i.jsx(y,{action:x,icon:"Pencil",tooltip:"Open Edit Link"}),i.jsx(Sn,{width:n,height:r,onOk:g,children:i.jsx(y,{icon:"Settings",tooltip:t("editor.settings")})}),i.jsx(y,{action:_,icon:"Trash2",tooltip:t("editor.delete")})]})}),i.jsxs(ke,{open:o,onOpenChange:s,children:[i.jsx(Ce,{}),i.jsxs(me,{children:[i.jsx(Ln,{children:i.jsx(xe,{children:"Edit Link Iframe"})}),i.jsx(Z,{value:c,onInput:S=>h(S.target.value),type:"url",autoFocus:!0,placeholder:"Enter link"}),i.jsxs(De,{children:[i.jsx(F,{onClick:d,children:"Cancel"}),i.jsx(F,{onClick:u,children:"OK"})]})]})]})]})}function En(e=8){return Math.random().toString(36).substring(2,e+2)}function mr(e){return e.replace(/^.*\/|\..+$/g,"")}function xr(e){return e.split(".").pop()}function fr(e){return e<1024?`${e} Byte`:e<1024*1024?`${(e/1024).toFixed(2)} KB`:`${(e/1024/1024).toFixed(2)} MB`}function gr(e){return e?e==="application/pdf"?"pdf":e.startsWith("application/")&&[".document","word"].some(t=>e.includes(t))?"word":e.startsWith("application/")&&["presentation"].some(t=>e.includes(t))?"excel":e.startsWith("application/")&&["sheet"].some(t=>e.includes(t))?"ppt":e.startsWith("image")?"image":e.startsWith("audio")?"audio":e.startsWith("video")?"video":"file":"file"}function br(e){return new Promise(t=>{const n=new FileReader;n.addEventListener("load",()=>{t({alt:e.name,src:n.result})},!1),n.readAsDataURL(e)})}function Dt(e,t){const n=e.split(","),r=n[0].match(/:(.*?);/)[1],a=atob(n[n.length-1]);let o=a.length;const s=new Uint8Array(o);for(;o--;)s[o]=a.charCodeAt(o);return new File([s],t,{type:r})}const Qt=`graph TB
a-->b`,pr=({editor:e,attrs:t,extension:n})=>{const{alt:r,align:a}=t,[o,s]=l.useState(decodeURIComponent(r??Qt)),[c,h]=l.useState(""),[d,u]=l.useState(!1),m=l.useRef(null),x=n==null?void 0:n.options.upload,g=async S=>{try{const{svg:A}=await it.render("mermaid-svg",S);h(A)}catch{h("")}},w=()=>{it.initialize({darkMode:!1,startOnLoad:!1,fontSize:12,theme:"base"}),g(o)};l.useEffect(()=>{d&&w()},[d]),l.useEffect(()=>{d&&g(o)},[o]);const _=async()=>{if(o!==""){if(o){const S=m.current.querySelector("svg"),{width:A,height:k}=S.getBoundingClientRect(),j=`mermaid-${En()}.svg`;let N=v.i(S.outerHTML);if(x){const T=Dt(N,j);N=await x(T)}e==null||e.chain().focus().setMermaid({type:"mermaid",src:N,alt:encodeURIComponent(o),width:A,height:k},!!o).run(),e==null||e.commands.setAlignImageMermaid(a)}u(!1)}};return i.jsxs(ke,{open:d,onOpenChange:u,children:[i.jsx(Ce,{asChild:!0,children:i.jsx(y,{icon:"Pencil",tooltip:"Edit Mermaid",action:()=>u(!0)})}),i.jsxs(me,{className:"!richtext-max-w-[1300px] richtext-z-[99999]",children:[i.jsx(xe,{children:"Edit Mermaid"}),i.jsx("div",{style:{height:"100%",border:"1px solid hsl(var(--border))"},children:i.jsxs("div",{className:"richtext-flex richtext-gap-[10px] richtext-rounded-[10px] richtext-p-[10px]",children:[i.jsx(Ke,{className:"richtext-flex-1",value:o,onChange:S=>s(S.target.value),autoFocus:!0,required:!0,rows:10,defaultValue:Qt,placeholder:"Text",style:{color:"hsl(var(--richtext-foreground))"}}),i.jsx("div",{className:"richtext-flex-1 richtext-flex richtext-items-center richtext-justify-center richtext-rounded-[10px] richtext-p-[10px]",style:{height:"100%",border:"1px solid hsl(var(--border))",minHeight:500,background:"#fff"},ref:m,dangerouslySetInnerHTML:{__html:c}})]})}),i.jsx(De,{children:i.jsx(F,{type:"button",onClick:_,children:"Save changes"})})]})]})};function wr(e,t){const[n,r]=l.useState(void 0);return l.useEffect(()=>{const a=()=>{const o=e.extensionManager.extensions.find(s=>s.name===t);o&&r(o)};return e.on("selectionUpdate",a),e.on("transaction",a),()=>{e.off("selectionUpdate",a),e.off("transaction",a)}},[e,t]),n}const _r={maxWidth:"auto",zIndex:20,appendTo:"parent",moveTransition:"transform 0.1s ease-out"};function vr({item:e,disabled:t,editor:n}){var a;const r=e.component;return r?i.jsx(l.Fragment,{children:e.type==="divider"?i.jsx(ie,{orientation:"vertical",className:"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]"}):i.jsx(r,{...e.componentProps,editor:n,disabled:t||((a=e==null?void 0:e.componentProps)==null?void 0:a.disabled)})}):i.jsx(i.Fragment,{})}function yr(e){return e.type.name==="mermaid"}function jr(e){const{lang:t}=b.useLocale(),n=Ge(e.editor,Mt.name),r=wr(e.editor,Mt.name),a=({editor:s})=>{const{selection:c}=s.view.state,{$from:h,to:d}=c;let u=!1;return s.view.state.doc.nodesBetween(h.pos,d,m=>{if(yr(m))return u=!0,!1}),u},o=l.useMemo(()=>e.disabled?[]:ba(e.editor),[e.disabled,e.editor,t]);return i.jsx(i.Fragment,{children:i.jsx(f.BubbleMenu,{shouldShow:a,editor:e==null?void 0:e.editor,tippyOptions:_r,children:o!=null&&o.length?i.jsx("div",{className:"richtext-w-auto richtext-px-3 richtext-py-2 richtext-transition-all !richtext-border richtext-rounded-sm richtext-shadow-sm richtext-pointer-events-auto richtext-select-none richtext-border-neutral-200 dark:richtext-border-neutral-800 richtext-bg-background",children:i.jsx("div",{className:"richtext-flex richtext-items-center richtext-flex-nowrap richtext-whitespace-nowrap richtext-h-[26px] richtext-justify-start richtext-relative",children:o==null?void 0:o.map((s,c)=>s.type==="edit"&&(n!=null&&n.src)?i.jsx(pr,{editor:e.editor,attrs:n,extension:r},`bubbleMenu-mermaid-${c}`):i.jsx(vr,{item:s,disabled:e.disabled,editor:e.editor},`bubbleMenu-mermaid-${c}`))})}):i.jsx(i.Fragment,{})})})}function kr({node:e}){var r;const t=((r=e==null?void 0:e.attrs)==null?void 0:r.src)||"",n=t==null?void 0:t.split("/").pop();return n?i.jsx(f.NodeViewWrapper,{children:i.jsx("div",{"data-twitter":"",children:i.jsx(gi.Tweet,{id:n})})}):null}function Cr(e){function t(n){e.action&&e.action(n)}return i.jsxs(ee,{modal:!0,children:[i.jsx(te,{disabled:e==null?void 0:e.disabled,asChild:!0,children:i.jsx(y,{tooltip:e==null?void 0:e.tooltip,isActive:e==null?void 0:e.isActive,disabled:e==null?void 0:e.disabled,children:i.jsx($,{name:e==null?void 0:e.icon})})}),i.jsx(Y,{hideWhenDetached:!0,className:"richtext-w-full",align:"start",side:"bottom",children:i.jsx(In,{editor:e.editor,onSetLink:t})})]})}const Nr=/(https?:\/\/)?(www\.)?x\.com\/(\w{1,15})(\/status\/(\d+))?(\/\S*)?/g,Sr=/^https?:\/\/(www\.)?x\.com\/(\w{1,15})(\/status\/(\d+))?(\/\S*)?$/;function en(e){return e.match(Sr)}const rt=f.Node.create({name:"twitter",draggable:!0,selectable:!0,addOptions(){return{addPasteHandler:!0,HTMLAttributes:{},inline:!1,origin:"",button:({editor:e,t})=>({component:Cr,componentProps:{action:n=>{e.commands.setTweet({src:n})},isActive:()=>!1,disabled:!1,icon:"Twitter",tooltip:t("editor.twitter.tooltip"),editor:e}})}},addNodeView(){return f.ReactNodeViewRenderer(kr,{attrs:this.options.HTMLAttributes})},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},addAttributes(){return{src:{default:null}}},parseHTML(){return[{tag:"div[data-twitter]"}]},addCommands(){return{setTweet:e=>({commands:t})=>en(e.src)?t.insertContent({type:this.name,attrs:e}):!1,updateTweet:e=>({commands:t})=>en(e.src)?t.updateAttributes(this.name,{src:e.src}):!1}},addPasteRules(){return this.options.addPasteHandler?[f.nodePasteRule({find:Nr,type:this.type,getAttributes:e=>({src:e.input})})]:[]},renderHTML({HTMLAttributes:e}){return["div",f.mergeAttributes({"data-twitter":""},e)]}});function In(e){const{t}=b.useLocale(),[n,r]=l.useState("");l.useEffect(()=>{var o;if(e!=null&&e.editor){const{src:s}=(o=e.editor)==null?void 0:o.getAttributes(rt.name);s&&r(s)}},[e==null?void 0:e.editor]);function a(o){o.preventDefault(),o.stopPropagation(),e==null||e.onSetLink(n)}return i.jsx("div",{className:"richtext-p-2 richtext-bg-white !richtext-border richtext-rounded-lg richtext-shadow-sm dark:richtext-bg-black border-neutral-200 dark:richtext-border-neutral-800",children:i.jsxs("form",{className:"richtext-flex richtext-flex-col richtext-gap-2",onSubmit:a,children:[i.jsx(X,{className:"mb-[6px]",children:t("editor.link.dialog.text")}),i.jsx("div",{className:"richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5 richtext-mb-[10px]",children:i.jsx("div",{className:"richtext-relative richtext-items-center richtext-w-full richtext-max-w-sm",children:i.jsx(Z,{type:"text",value:n,required:!0,className:"richtext-w-80",placeholder:"Text",onChange:o=>r(o.target.value)})})}),i.jsx(F,{type:"submit",className:"richtext-self-end richtext-mt-2",children:t("editor.link.dialog.button.apply")})]})})}function Tr({editor:e,disabled:t}){const[n,r]=l.useState(!1),{t:a}=b.useLocale(),o=l.useCallback(({editor:h})=>h.isActive(rt.name),[]),s=h=>{e.commands.updateTweet({src:h}),r(!1)},c=l.useCallback(()=>ze(rt.name,e),[e]);return i.jsx(i.Fragment,{children:i.jsx(f.BubbleMenu,{editor:e,shouldShow:o,tippyOptions:{popperOptions:{modifiers:[{name:"flip",enabled:!1}]},placement:"bottom-start",offset:[-2,16],zIndex:9999,onHidden:()=>{r(!1)}},children:t?i.jsx(i.Fragment,{}):i.jsx(i.Fragment,{children:n?i.jsx(In,{onSetLink:s,editor:e}):i.jsx("div",{className:"richtext-flex richtext-items-center richtext-gap-2 richtext-p-2 richtext-bg-white !richtext-border richtext-rounded-lg richtext-shadow-sm dark:richtext-bg-black richtext-border-neutral-200 dark:richtext-border-neutral-800",children:i.jsxs("div",{className:"richtext-flex richtext-flex-nowrap",children:[i.jsx(y,{icon:"Pencil",tooltip:a("editor.link.edit.tooltip"),action:()=>{r(!0)},tooltipOptions:{sideOffset:15}}),i.jsx(y,{icon:"Trash",tooltip:a("editor.delete"),action:c,tooltipOptions:{sideOffset:15}})]})})})})})}function Ar({editor:e,disabled:t,bubbleMenu:n}){const r=e.extensionManager.extensions.map(o=>o.name),a=()=>{var o,s,c,h,d,u,m,x,g,w,_,S,A;return[r.includes("columns")&&!((o=n==null?void 0:n.columnConfig)!=null&&o.hidden)?i.jsx(za,{editor:e},"columns"):null,r.includes("table")&&!((s=n==null?void 0:n.tableConfig)!=null&&s.hidden)?i.jsx(Sa,{editor:e},"table"):null,r.includes("link")&&!((c=n==null?void 0:n.linkConfig)!=null&&c.hidden)?i.jsx(Aa,{editor:e,disabled:t},"link"):null,r.includes("image")&&!((h=n==null?void 0:n.imageConfig)!=null&&h.hidden)?i.jsx(Ia,{editor:e,disabled:t},"image"):null,r.includes(Vt.name)&&!((d=n==null?void 0:n.imageGifConfig)!=null&&d.hidden)?i.jsx(Ra,{editor:e,disabled:t},"imageGif"):null,r.includes("video")&&!((u=n==null?void 0:n.videoConfig)!=null&&u.hidden)?i.jsx(Ha,{editor:e,disabled:t},"video"):null,r.includes("katex")&&!((m=n==null?void 0:n.katexConfig)!=null&&m.hidden)?i.jsx(Ii,{editor:e,disabled:t},"katex"):null,r.includes("excalidraw")&&!((x=n==null?void 0:n.excalidrawConfig)!=null&&x.hidden)?i.jsx(ar,{editor:e,disabled:t},"excalidraw"):null,r.includes("mermaid")&&!((g=n==null?void 0:n.mermaidConfig)!=null&&g.hidden)?i.jsx(jr,{editor:e,disabled:t},"mermaid"):null,r.includes("iframe")&&!((w=n==null?void 0:n.iframeConfig)!=null&&w.hidden)?i.jsx(ur,{editor:e,disabled:t},"iframe"):null,r.includes("twitter")&&!((_=n==null?void 0:n.twitterConfig)!=null&&_.hidden)?i.jsx(Tr,{editor:e,disabled:t},"twitter"):null,(S=n==null?void 0:n.floatingMenuConfig)!=null&&S.hidden?null:i.jsx(ya,{editor:e,disabled:t},"content"),(A=n==null?void 0:n.textConfig)!=null&&A.hidden?null:i.jsx(Ca,{editor:e,disabled:t},"text")]};return n!=null&&n.render?n.render({editor:e,disabled:t||!1,bubbleMenu:n},a()):a().filter(Boolean)}function tn(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:i.jsx("path",{fill:"currentColor",d:"M18 14c0-4-6-10.8-6-10.8s-1.33 1.51-2.73 3.52l8.59 8.59c.09-.42.14-.86.14-1.31m-.88 3.12L12.5 12.5L5.27 5.27L4 6.55l3.32 3.32C6.55 11.32 6 12.79 6 14c0 3.31 2.69 6 6 6c1.52 0 2.9-.57 3.96-1.5l2.63 2.63l1.27-1.27z"})})}function Rn(e){const{t}=b.useLocale(),{highlight:n=!1,disabled:r=!1,selectedColor:a,setSelectedColor:o,onChange:s,colors:c=b.COLORS_LIST}=e,h=l.useMemo(()=>{const g=c,w=[];for(let _=0;_<g.length;_+=10)w.push(g.slice(_,_+10));return w},[c]),[d,u]=l.useState([]),m=g=>{const w=[...d],_=w.indexOf(g);_!==-1&&w.splice(_,1),w.unshift(g),w.length>10&&w.pop(),u(w)};function x(g){if(g===void 0){o==null||o(g),s==null||s(g);return}/^#([\da-f]{3}){1,2}$/i.test(g)&&(o==null||o(g),s==null||s(g),m(g))}return i.jsxs(ee,{modal:!0,children:[i.jsx(te,{className:"!richtext-p-0",disabled:r,asChild:!0,children:e==null?void 0:e.children}),i.jsx(Y,{hideWhenDetached:!0,className:"richtext-w-full richtext-h-full richtext-p-2",align:"start",side:"bottom",children:i.jsxs("div",{className:"richtext-flex richtext-flex-col",children:[n?i.jsxs("div",{className:"richtext-flex richtext-items-center richtext-p-1 richtext-cursor-pointer rd-1 richtext-gap-[4px] hover:richtext-bg-accent",onClick:()=>x(void 0),children:[i.jsx(tn,{}),i.jsx("span",{className:"richtext-ml-1 richtext-text-sm",children:t("editor.nofill")})]}):i.jsxs("div",{className:"richtext-flex richtext-items-center richtext-p-1 richtext-cursor-pointer rd-1 richtext-gap-[4px] hover:richtext-bg-accent",onClick:()=>{x(void 0)},children:[i.jsx(tn,{}),i.jsx("span",{className:"richtext-ml-1 richtext-text-sm",children:t("editor.default")})]}),h.map((g,w)=>i.jsx("span",{className:"richtext-relative richtext-flex richtext-w-full richtext-h-auto richtext-p-0 last:richtext-pb-2",children:g.map((_,S)=>i.jsx("span",{className:"richtext-w-6 richtext-h-6 richtext-p-0.5 richtext-inline-block richtext-rounded-sm !richtext-border richtext-border-transparent richtext-flex-[0_0_auto] richtext-cursor-pointer hover:richtext-border-border hover:richtext-shadow-sm",onClick:()=>x(_),children:i.jsx("span",{style:{backgroundColor:_},className:"richtext-relative richtext-w-[18px] richtext-h-[18px] richtext-block richtext-rounded-[2px] richtext-border-transparent",children:_===a?i.jsx("svg",{className:"richtext-absolute richtext-block richtext-top-[-1px] richtext-left-[1px] richtext-w-3 richtext-h-3",viewBox:"0 0 18 18",style:{fill:"rgb(255, 255, 255)"},children:i.jsx("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"})}):i.jsx("svg",{viewBox:"0 0 18 18",style:{fill:"rgb(255, 255, 255)",display:"none"},children:i.jsx("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"})})})},`sub-color-${S}`))},w)),i.jsxs("div",{children:[i.jsx("div",{className:"richtext-my-1 richtext-text-sm",children:t("editor.recent")}),i.jsx("span",{className:"richtext-relative richtext-flex richtext-w-full richtext-h-auto richtext-p-0 last:richtext-pb-2",children:d==null?void 0:d.map((g,w)=>i.jsx("span",{className:"richtext-w-6 richtext-h-6 richtext-p-0.5 richtext-inline-block richtext-rounded-sm !richtext-border richtext-border-transparent richtext-flex-[0_0_auto] richtext-cursor-pointer hover:richtext-border-border hover:richtext-shadow-sm",onClick:()=>x(g),children:i.jsx("span",{className:"richtext-relative richtext-w-[18px] richtext-h-[18px] richtext-block richtext-rounded-[2px] richtext-border-transparent",style:{backgroundColor:g},children:i.jsx("svg",{viewBox:"0 0 18 18",style:{fill:"rgb(255, 255, 255)",display:"none"},children:i.jsx("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"})})})},`sub-color-recent-${w}`))})]}),i.jsx(Lr,{setColor:x})]})})]})}function Lr({setColor:e}){const[t,n]=l.useState("#000000"),[r,a]=l.useState(!1),{t:o}=b.useLocale();return l.useEffect(()=>()=>{a(!1)},[]),i.jsxs(ee,{open:r,children:[i.jsx(te,{asChild:!0,children:i.jsxs("div",{onClick:s=>{s.preventDefault(),a(!0)},className:"richtext-text-sm hover:richtext-cursor-pointer hover:richtext-bg-accent richtext-py-1.5 richtext-px-1.5",children:[o("editor.color.more"),"..."]})}),i.jsxs(Y,{children:[i.jsxs("div",{className:"richtext-flex richtext-flex-col richtext-items-center richtext-justify-center",children:[i.jsx(bi.HexColorPicker,{color:t,onChange:n}),i.jsx(Z,{className:"richtext-mt-[8px] richtext-w-full",type:"text",onChange:s=>{s.preventDefault(),n(`#${s.target.value}`)},value:t.slice(1)})]}),i.jsx(ie,{className:"richtext-my-[10px]"}),i.jsx(F,{onClick:s=>{s.preventDefault(),e(t),a(!1)},className:"richtext-w-full",children:i.jsx(p.Plus,{size:16})})]})]})}const Mr=`
.reactjs-tiptap-editor, .richtext-dialog-content {
  button,
  input:where([type=button]),
  input:where([type=reset]),
  input:where([type=submit]) {
    -webkit-appearance: button;
    background-color: transparent;
    background-image: none
  }

  input,
  optgroup,
  select,
  textarea {
    font-family: inherit;
    font-feature-settings: inherit;
    font-variation-settings: inherit;
    font-size: 100%;
    font-weight: inherit;
    line-height: inherit;
    letter-spacing: inherit;
    color: inherit;
  }

  button {
    font-family: inherit;
    font-feature-settings: inherit;
    font-variation-settings: inherit;
    font-size: 100%;
    font-weight: inherit;
    line-height: inherit;
    letter-spacing: inherit;
    color: inherit;
  }
}

.reactjs-tiptap-editor,
.richtext-dialog-content,
div[data-radix-popper-content-wrapper],
div[data-tippy-root] {
*,
:before,
:after {
  box-sizing: border-box;
  border-width: 0;
  border-style: solid;
  border-color: hsl(var(--richtext-border));
}

background-color: hsl(var(--richtext-background));
color: hsl(var(--richtext-foreground));


html,
:host {
  line-height: 1.5;
  -webkit-text-size-adjust: 100%;
  -moz-tab-size: 4;
  tab-size: 4;
  font-family: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", Segoe UI Symbol, "Noto Color Emoji";
  font-feature-settings: normal;
  font-variation-settings: normal;
  -webkit-tap-highlight-color: transparent
}

hr {
  height: 0;
  color: inherit;
  border-top-width: 1px
}

a {
  color: inherit;
  text-decoration: inherit
}

b,
strong {
  font-weight: bolder
}

code,
kbd,
samp,
pre {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace;
  font-feature-settings: normal;
  font-variation-settings: normal;
  font-size: 1em
}

table {
  text-indent: 0;
  border-color: inherit;
  border-collapse: collapse
}

input, textarea {
  border-width: 1px;
}

textarea {
  resize: vertical
}

input::placeholder,
textarea::placeholder {
  opacity: 1;
  color: #9ca3af
}

button, input, textarea {
  cursor: pointer;
  color: inherit;
}

img,
svg,
video,
canvas,
audio,
iframe,
embed,
object {
  display: block;
  vertical-align: middle
}

img,
video {
  max-width: 100%;
  height: auto
}
}
`,Hn=de.proxy({theme:"light"});function Er(){return de.useSnapshot(Hn).theme}const Ir={setTheme:e=>{Hn.theme=e}},nn="data-rc-order",rn="data-rc-priority",Rr="rc-util-key",Tt=new Map;function Hr(e,t){if(!e)return!1;if(e.contains)return e.contains(t);let n=t;for(;n;){if(n===e)return!0;n=n.parentNode}return!1}function zn({mark:e}={}){return e?e.startsWith("data-")?e:`data-${e}`:Rr}function Bt(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function zr(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function On(e){return[...(Tt.get(e)||e).children].filter(t=>t.tagName==="STYLE")}function Pn(e,t={}){const{csp:n,prepend:r,priority:a=0}=t,o=zr(r),s=o==="prependQueue",c=document.createElement("style");c.setAttribute(nn,o),s&&a&&c.setAttribute(rn,`${a}`),n!=null&&n.nonce&&(c.nonce=n==null?void 0:n.nonce),c.innerHTML=e;const h=Bt(t),{firstChild:d}=h;if(r){if(s){const u=On(h).filter(m=>{if(!["prepend","prependQueue"].includes(m.getAttribute(nn)))return!1;const x=Number(m.getAttribute(rn)||0);return a>=x});if(u.length>0)return h.insertBefore(c,u.at(-1).nextSibling),c}d.before(c)}else h.append(c);return c}function Dn(e,t={}){const n=Bt(t);return On(n).find(r=>r.getAttribute(zn(t))===e)}function Or(e,t={}){const n=Dn(e,t);n&&n.remove()}function Pr(e,t){const n=Tt.get(e);if(!n||!Hr(document,n)){const r=Pn("",t),{parentNode:a}=r;Tt.set(e,a),r.remove()}}function Dr(e,t,n={}){var s,c,h;const r=Bt(n);Pr(r,n);const a=Dn(t,n);if(a)return(s=n.csp)!=null&&s.nonce&&a.nonce!==((c=n.csp)==null?void 0:c.nonce)&&(a.nonce=(h=n.csp)==null?void 0:h.nonce),a.innerHTML!==e&&(a.innerHTML=e),a;const o=Pn(e,n);return o.setAttribute(zn(n),t),o}function Br(e,t){const{content:n,extensions:r,useEditorOptions:a={}}=e,o=l.useMemo(()=>{const d=v.differenceBy(r,r,"name");return[...r.map(m=>{const x=r.find(g=>g.name===m.name);return x?m.configure(x.options):m}),...d].map((m,x)=>m.configure({sort:x}))},[r]),s=v.throttle(d=>{var m;const u=h(d,e.output);(m=e==null?void 0:e.onChangeContent)==null||m.call(e,u)},b.EDITOR_UPDATE_WATCH_THROTTLE_WAIT_TIME),c=f.useEditor({extensions:o,content:n,onUpdate:({editor:d})=>{s&&s(d)},...a});l.useImperativeHandle(t,()=>({editor:c})),l.useEffect(()=>{document.documentElement.classList.toggle("dark",e.dark),Ir.setTheme(e.dark?"dark":"light")},[e.dark]),l.useEffect(()=>{c==null||c.setEditable(!(e!=null&&e.disabled)),dr.setDisable(!(e!=null&&e.disabled))},[c,e==null?void 0:e.disabled]),l.useEffect(()=>((e==null?void 0:e.resetCSS)!==!1&&Dr(Mr,"react-tiptap-reset"),()=>{Or("react-tiptap-reset")}),[e==null?void 0:e.resetCSS]);function h(d,u){return e!=null&&e.removeDefaultWrapper?u==="html"?d.isEmpty?"":d.getHTML():u==="json"?d.isEmpty?{}:d.getJSON():u==="text"?d.isEmpty?"":d.getText():"":u==="html"?d.getHTML():u==="json"?d.getJSON():u==="text"?d.getText():""}return l.useEffect(()=>()=>{var d;(d=c==null?void 0:c.destroy)==null||d.call(c)},[]),c?i.jsx("div",{style:{background:"#E1ECFE"},className:"reactjs-tiptap-editor",children:i.jsxs(Ti,{delayDuration:0,disableHoverableContent:!0,children:[i.jsx("div",{className:"richtext-overflow-hidden",children:i.jsxs("div",{className:"richtext-flex richtext-flex-col richtext-max-h-full",children:[i.jsx(f.EditorContent,{className:`richtext-relative ${(e==null?void 0:e.contentClass)||""}`,editor:c}),!(e!=null&&e.hideBubble)&&i.jsx(Ar,{bubbleMenu:e==null?void 0:e.bubbleMenu,editor:c,disabled:e==null?void 0:e.disabled})]})}),!(e!=null&&e.hideToolbar)&&i.jsx(Vr,{editor:c,disabled:!!(e!=null&&e.disabled)})]})}):i.jsx(i.Fragment,{})}const $r=l.forwardRef(Br);function Fr(){const[e,t]=l.useState(!1),[n,r]=l.useState(0);return l.useEffect(()=>{const a=()=>{if(window.visualViewport){const{height:o,offsetTop:s}=window.visualViewport,c=window.innerHeight;o<c?(t(!0),r(c-o-s)):(t(!1),r(0))}};return window.visualViewport&&(window.visualViewport.addEventListener("resize",a),window.visualViewport.addEventListener("scroll",a),a()),()=>{window.visualViewport&&(window.visualViewport.removeEventListener("resize",a),window.visualViewport.removeEventListener("scroll",a))}},[]),{isKeyboardVisible:e,keyboardOffset:n}}function Vr({editor:e,disabled:t}){const{t:n}=b.useLocale(),{isKeyboardVisible:r}=Fr(),a=l.useMemo(()=>{const s=[...e.extensionManager.extensions].sort((h,d)=>{const u=h.options.sort??-1,m=d.options.sort??-1;return u-m});let c=[];for(const h of s){const{button:d,divider:u=!1,spacer:m=!1,toolbar:x=!0}=h.options;if(!d||!Fi(d)||!x)continue;const g=d({editor:e,extension:h,t:n});if(Array.isArray(g)){const w=g.map((_,S)=>({button:_,divider:S===g.length-1?u:!1,spacer:S===0?m:!1}));c=[...c,...w];continue}c.push({button:g,divider:u,spacer:m})}return c},[e,n]);return i.jsx("div",{style:{pointerEvents:t?"none":"auto",opacity:t?.5:1,position:"fixed",height:50,bottom:r?0:50,width:"100%",overflowX:"scroll",scrollbarWidth:"none",msOverflowX:"hidden",background:"#F6F6F8",display:"flex",alignItems:"center"},children:i.jsx("div",{className:"richtext-flex richtext-gap-x-1",children:a.map((o,s)=>{var h,d;const c=o.button.component;return i.jsxs("div",{className:"richtext-flex richtext-items-center",children:[(o==null?void 0:o.spacer)&&i.jsx(ie,{orientation:"vertical",className:"!richtext-h-[16px] !richtext-mx-[10px]"}),i.jsx(c,{...o.button.componentProps,disabled:t||((d=(h=o==null?void 0:o.button)==null?void 0:h.componentProps)==null?void 0:d.disabled)}),(o==null?void 0:o.divider)&&i.jsx(ie,{orientation:"vertical",className:"!richtext-h-auto !richtext-mx-2"})]},`toolbar-item-${s}`)})})})}function Ur(e){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:i.jsx("path",{fill:"currentColor",d:"M19 12h-2v3h-3v2h5zM7 9h3V7H5v5h2zm14-6H3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2m0 16H3V5h18z"})})}function Wr(e){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:i.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 15h15m0 4H6m9-8h6m0-4h-6M9 9h1a1 1 0 1 1-1 1V7.5a2 2 0 0 1 2-2M3 9h1a1 1 0 1 1-1 1V7.5a2 2 0 0 1 2-2"})})}function qr(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",className:"richtext-w-4 richtext-h-4",width:"1em",height:"1em",viewBox:"0 0 24 24",children:i.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M5.5 3c1.404 0 2.107 0 2.611.38c.219.164.406.375.552.62C9 4.568 9 5.358 9 6.938v10.125c0 1.58 0 2.37-.337 2.937a2.1 2.1 0 0 1-.552.621c-.504.38-1.207.38-2.611.38s-2.107 0-2.611-.38a2.1 2.1 0 0 1-.552-.62C2 19.432 2 18.642 2 17.062V6.938c0-1.58 0-2.37.337-2.938a2.1 2.1 0 0 1 .552-.62C3.393 3 4.096 3 5.5 3M20 11.938v5.124c0 1.58 0 2.37-.337 2.938a2.1 2.1 0 0 1-.552.62c-.504.38-1.207.38-2.611.38s-2.107 0-2.611-.38a2.1 2.1 0 0 1-.552-.62C13 19.433 13 18.642 13 17.063V6.938c0-1.58 0-2.37.337-2.938M22 9l-6-6m6 0l-6 6",color:"currentColor"})})}function Gr(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",className:"richtext-w-4 richtext-h-4",width:"1em",height:"1em",viewBox:"0 0 24 24",children:i.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M21 18.5c0 1.404 0 2.107-.38 2.611a2.1 2.1 0 0 1-.62.552c-.567.337-1.358.337-2.937.337H6.938c-1.58 0-2.37 0-2.938-.337a2.1 2.1 0 0 1-.62-.552C3 20.607 3 19.904 3 18.5s0-2.107.38-2.611c.163-.218.374-.406.62-.552C4.567 15 5.357 15 6.938 15h10.125c1.58 0 2.37 0 2.937.337c.246.146.457.334.62.552c.38.504.38 1.207.38 2.611M12.063 4H6.937C5.358 4 4.568 4 4 4.337a2.1 2.1 0 0 0-.62.552C3 5.393 3 6.096 3 7.5s0 2.107.38 2.611c.163.218.374.406.62.552C4.567 11 5.357 11 6.938 11h10.125c1.58 0 2.37 0 2.937-.337M21 8l-6-6m6 0l-6 6",color:"currentColor"})})}function Kr(e){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:i.jsx("path",{fill:"currentColor",d:"M14 2H6a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h12c1.11 0 2-.89 2-2V8zm4 18H6V4h7v5h5zm-.65-10l-2.1 9h-1.4l-1.8-6.79l-1.8 6.79h-1.4l-2.2-9h1.5l1.4 6.81l1.8-6.81h1.3l1.8 6.81l1.4-6.81z"})})}function $(e){const t=Xe[e.name];return t?i.jsx(t,{onClick:e==null?void 0:e.onClick,className:`richtext-w-4 richtext-h-4 ${(e==null?void 0:e.className)||""}`}):null}function Zr(e){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:i.jsx("path",{fill:"currentColor",d:"M21 22H3v-2h18zm0-18H3V2h18zm-11 9.7h4l-2-5.4zM11.2 6h1.7l4.7 12h-2l-.9-2.6H9.4L8.5 18h-2z"})})}function Bn(e){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",width:"1em",height:"1em",viewBox:"0 0 48 48",...e,children:i.jsx("path",{fill:"currentColor",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:4,d:"M36 19L24 31L12 19z"})})}function Xr(e){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:i.jsx("path",{fill:"currentColor",d:"M9 7v10h6v-2h-4V7z"})})}function Yr(e){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:i.jsx("path",{fill:"currentColor",d:"M9 7c-1.1 0-2 .9-2 2v8h2V9h2v7h2V9h2v8h2V9a2 2 0 0 0-2-2z"})})}function Jr(e){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:i.jsx("path",{fill:"currentColor",d:"M11 7c-1.1 0-2 .9-2 2v2a2 2 0 0 0 2 2h2v2H9v2h4c1.11 0 2-.89 2-2v-2a2 2 0 0 0-2-2h-2V9h4V7z"})})}function Qr(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",width:"1em",height:"1em",viewBox:"0 0 24 24",children:i.jsx("path",{fill:"currentColor",d:"M14 2H6a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h12c1.11 0 2-.89 2-2V8zm4 18H6V4h7v5h5zm-.65-10l-2.1 9h-1.4l-1.8-6.79l-1.8 6.79h-1.4l-2.2-9h1.5l1.4 6.81l1.8-6.81h1.3l1.8 6.81l1.4-6.81z"})})}function $n(){return i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 32 32",children:[i.jsx("path",{fill:"currentColor",d:"M30 18v-2h-6v10h2v-4h3v-2h-3v-2zm-11 8h-4V16h4a3.003 3.003 0 0 1 3 3v4a3.003 3.003 0 0 1-3 3m-2-2h2a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-2zm-6-8H6v10h2v-3h3a2.003 2.003 0 0 0 2-2v-3a2 2 0 0 0-2-2m-3 5v-3h3l.001 3z"}),i.jsx("path",{fill:"currentColor",d:"M22 14v-4a.91.91 0 0 0-.3-.7l-7-7A.9.9 0 0 0 14 2H4a2.006 2.006 0 0 0-2 2v24a2 2 0 0 0 2 2h16v-2H4V4h8v6a2.006 2.006 0 0 0 2 2h6v2Zm-8-4V4.4l5.6 5.6Z"})]})}function Fn(){return i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",className:"icon",viewBox:"0 0 1024 1024",children:[i.jsx("path",{fill:"currentColor",d:"M679.253 402.364 618.77 561.015l-60.348-158.651a30.04 30.04 0 0 0-30.447-18.637 29.76 29.76 0 0 0-30.447 18.637l-60.416 158.651-60.416-158.651a30.515 30.515 0 0 0-38.843-17.272 28.945 28.945 0 0 0-17.954 37.547l88.815 233.267c4.369 11.469 15.7 19.115 28.398 19.115a30.31 30.31 0 0 0 28.468-19.115l62.395-163.908 62.396 163.84c4.437 11.605 15.701 19.183 28.4 19.183a30.31 30.31 0 0 0 28.466-19.115l88.747-233.267a28.945 28.945 0 0 0-17.886-37.547 30.447 30.447 0 0 0-38.912 17.272zm219.478 395.605-51.883-29.218c-28.672-16.18-52.224-3.072-52.224 29.082v.273H643.209a29.833 29.833 0 0 0-30.31 29.354c0 16.18 13.584 29.218 30.31 29.218h151.825c1.092 30.516 24.03 43.077 52.224 27.648l51.063-27.989c29.013-15.906 29.15-42.189.41-58.368"}),i.jsx("path",{fill:"currentColor",d:"m810.667 913.135-.478.068H201.796c-19.865 0-36.727-11.673-36.727-25.6v-618.36h154.965c51.268 0 92.911-39.39 92.911-87.858v-87.86H810.19c19.797 0 36.522 11.742 36.522 25.669V739.26h61.987V119.262c0-46.421-44.169-84.241-98.51-84.241H328.364l-225.28 194.56v658.09c0 46.285 44.236 84.105 98.713 84.105H810.19c43.759 0 80.554-24.713 93.32-58.573h-92.842zM350.89 94.89v86.562c0 16.11-13.858 29.286-30.925 29.286H216.815L350.959 94.891z"})]})}function ea(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:i.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 4h4a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1m-9 8h4m-2-2v4"})})}function ta(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:i.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 4h4a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1m9 8h4m-2-2v4"})})}function na(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:i.jsx("path",{fill:"currentColor",d:"M23.943 19.806a.2.2 0 0 0-.168-.034c-1.26-1.855-2.873-3.61-4.419-5.315l-.252-.284c-.001-.073-.067-.12-.134-.15l-.084-.084c-.05-.1-.169-.167-.286-.1c-.47.234-.907.585-1.327.919c-.554.434-1.109.87-1.63 1.354a5 5 0 0 0-.588.618c-.084.117-.017.217.084.267c-.37.368-.74.736-1.109 1.12a.2.2 0 0 0-.05.134c0 .05.033.1.067.117l.655.502v.016c.924.92 2.554 2.173 4.285 3.527c.251.201.52.402.773.602c.117.134.234.285.335.418c.05.066.169.084.236.033c.033.034.084.067.118.1a.24.24 0 0 0 .1.034a.15.15 0 0 0 .135-.066a.24.24 0 0 0 .033-.1c.017 0 .017.016.034.016a.2.2 0 0 0 .134-.05l3.058-3.327c.12-.116.014-.267 0-.267m-7.628-.134l-1.546-1.17l-.15-.1c-.035-.017-.068-.05-.102-.067l-.117-.1c.66-.66 1.33-1.308 2-1.956c-.488.484-1.463 1.906-1.261 2.373c.002 0 .018.042.067.084zm4.1 3.126l-1.277-.97a27 27 0 0 0-1.58-1.504c.69.518 1.277.97 1.361 1.053c.673.585.638.485 1.093.87l.554.4c-.074.103-.151.148-.151.151m.336.25l-.034-.016a1 1 0 0 0 .152-.117zM.588 3.476c.033.217.084.435.117.636c.201 1.103.403 2.106.772 2.858l.152.568c.05.217.134.485.219.552a67 67 0 0 0 3.578 2.942a.18.18 0 0 0 .219 0s0 .016.016.016a.15.15 0 0 0 .118.05a.2.2 0 0 0 .134-.05c1.798-1.989 3.142-3.627 4.1-4.998c.068-.066.084-.167.084-.25c.067-.067.118-.151.185-.201c.067-.067.067-.184 0-.235l-.017-.016c0-.033-.017-.084-.05-.1c-.42-.401-.722-.685-1.042-.986a94 94 0 0 1-2.352-2.273c-.017-.017-.034-.034-.067-.034c-.336-.117-1.025-.234-1.882-.385c-1.277-.216-3.008-.517-4.57-.986c0 0-.101 0-.118.017l-.05.05C.05.714.022.707 0 .718c.017.1.017.167.05.284c0 .033.068.301.068.334zm7.19 4.78l-.033.034a.036.036 0 0 1 .033-.034M6.553 2.238c.101.1.521.502.622.585c-.437-.2-1.529-.702-2.034-.869c.505.1 1.194.201 1.412.284M.79 1.403c.252.434.454 1.939.655 3.41c-.118-.469-.201-.936-.302-1.372C.992 2.673.84 1.988.638 1.386c.124 0 .152.021.152.017m-.286-.369c0-.016 0-.033-.017-.033c.085 0 .135.017.202.05c0 .006-.145-.017-.185-.017m23.17-.217c.017-.066-.336-.367-.219-.384c.253-.017.253-.401 0-.401c-.335.017-.688.1-1.008.15c-.587.117-1.192.234-1.78.367a80 80 0 0 0-3.949.937c-.403.117-.857.2-1.243.401c-.135.067-.118.2-.05.284c-.034.017-.051.017-.085.034c-.117.017-.218.034-.335.05c-.102.017-.152.1-.135.2c0 .017.017.05.017.067c-.706.936-1.496 1.923-2.353 2.976c-.84.969-1.73 1.989-2.62 3.042c-2.84 3.31-6.05 7.07-9.594 10.38a.16.16 0 0 0 0 .234c.016.016.033.033.05.033c-.05.05-.101.085-.152.134q-.05.05-.05.1a.4.4 0 0 0-.067.084c-.067.067-.067.184.017.234c.067.066.185.066.235-.017c.017-.017.017-.033.033-.033a.265.265 0 0 1 .37 0c.202.217.404.435.588.618l-.42-.35c-.067-.067-.184-.05-.234.016c-.068.066-.051.184.016.234l4.469 3.727c.034.034.067.034.118.034a.15.15 0 0 0 .117-.05l.101-.1c.017.016.05.016.067.016c.05 0 .084-.016.118-.05c6.049-6.05 10.922-10.614 16.5-14.693c.05-.033.067-.1.067-.15c.067 0 .118-.05.15-.117c1.026-3.125 1.228-5.9 1.295-7.27c0-.059.016-.038.016-.068c.017-.033.017-.05.017-.05a.98.98 0 0 0-.067-.619m-10.82 4.915c.268-.301.537-.619.806-.903c-1.73 2.273-4.603 5.767-8.67 9.929c2.773-3.059 5.562-6.218 7.864-9.026M5.14 23.466c-.016-.017-.016-.017 0-.017zm2.504-2.156c.135-.15.27-.284.42-.434c0 0 0 .016.017.016c-.224.198-.433.418-.437.418m.69-.668c.099-.1.14-.173.284-.318c.992-1.02 2.017-2.04 3.059-3.076l.016-.016c.252-.2.555-.418.824-.619a228 228 0 0 0-4.184 4.029M14.852 3.91c-.554.719-1.176 1.671-1.697 2.423c-1.646 2.374-6.94 8.174-7.057 8.274a1190 1190 0 0 1-4.839 4.597l-.1.1c-.085-.1-.085-.25.016-.334C8.652 11.966 13.19 6.133 15.021 3.576c-.05.116-.084.216-.168.334zm2.906 3.427c-.671-.386-.99-.987-.806-1.572l.05-.2a.8.8 0 0 1 .085-.167a1.9 1.9 0 0 1 .756-.703c.016 0 .033 0 .05-.016c-.017-.034-.017-.084-.017-.134c.017-.1.085-.167.202-.167c.202 0 .824.184 1.059.384c.067.05.134.117.202.184c.084.1.218.268.285.401c.034.017.067.184.118.268c.033.134.067.284.05.418c-.017.016 0 .116-.017.116a1.6 1.6 0 0 1-.218.619c-.03.03.006.012-.05.067a1.2 1.2 0 0 1-.32.334a1.49 1.49 0 0 1-1.26.234a2 2 0 0 0-.169-.066m4.37 1.403c0 .017-.017.05 0 .067c-.034 0-.05.017-.085.034a110 110 0 0 0-3.915 3.025c1.11-.986 2.218-1.989 3.378-2.975c.336-.301.571-.686.638-1.12l.168-1.003v-.033c.085-.201.404-.118.353.1c-.004-.001-.173.795-.537 1.905"})})}function ia(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:i.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 21v-4m0-4V9m0-4V3m-2 18h4M8 5v4h11l2-2l-2-2zm6 8v4H6l-2-2l2-2z"})})}function ra(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20",children:i.jsx("path",{fill:"currentColor",d:"M6.5 3a.75.75 0 0 1 .697.471l3 7.5a.75.75 0 0 1-1.393.557L7.992 9.5H5.008l-.811 2.028a.75.75 0 0 1-1.393-.556l3-7.5A.75.75 0 0 1 6.5 3m0 2.77L5.608 8h1.784zm8.28-1.55a.75.75 0 1 0-1.06 1.06l.72.72h-3.69a.75.75 0 0 0 0 1.5h3.69l-.72.72a.75.75 0 0 0 1.06 1.06l2-2a.75.75 0 0 0 0-1.06zm0 7.5a.75.75 0 1 0-1.06 1.06l.72.72H3.75a.75.75 0 0 0 0 1.5h10.69l-.72.72a.75.75 0 1 0 1.06 1.06l2-2a.75.75 0 0 0 0-1.06z"})})}function aa(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20",children:i.jsx("path",{fill:"currentColor",d:"M13.5 3a.75.75 0 0 0-.697.471l-3 7.5a.75.75 0 0 0 1.393.557l.812-2.028h2.984l.811 2.028a.75.75 0 0 0 1.393-.556l-3-7.5A.75.75 0 0 0 13.5 3m0 2.77L14.392 8h-1.784zM5.22 4.22a.75.75 0 0 1 1.06 1.06L5.56 6h3.69a.75.75 0 0 1 0 1.5H5.56l.72.72a.75.75 0 0 1-1.06 1.06l-2-2a.75.75 0 0 1 0-1.06zm0 7.5a.75.75 0 0 1 1.06 1.06l-.72.72h10.69a.75.75 0 0 1 0 1.5H5.56l.72.72a.75.75 0 1 1-1.06 1.06l-2-2a.75.75 0 0 1 0-1.06z"})})}function oa(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:i.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",color:"currentColor",children:[i.jsx("path",{d:"M14.86 22h-4.312c-3.291 0-4.937 0-6.08-.798a4.2 4.2 0 0 1-.863-.805c-.855-1.066-.855-2.6-.855-5.67v-2.545c0-2.963 0-4.445.473-5.628c.761-1.903 2.37-3.403 4.41-4.113C8.9 2 10.49 2 13.667 2c1.816 0 2.723 0 3.448.252c1.166.406 2.085 1.263 2.52 2.35c.27.676.27 1.523.27 3.216V10"}),i.jsx("path",{d:"M2.75 12c0-1.84 1.506-3.333 3.364-3.333c.672 0 1.464.116 2.117-.057a1.67 1.67 0 0 0 1.19-1.179c.174-.647.057-1.432.057-2.098C9.478 3.493 10.984 2 12.84 2m.002 16h2.523m-4.949-4.15c-.126-.8-.281-.801-1.61-.85h-1.01c-.557 0-1.009.448-1.009 1v3c0 .552.452 1 1.01 1h1.816c.39 0 .803-.313.803-.7v-1.1c0-.11-.113-.304-.224-.304H9.068M12.842 13h1.261m0 0h1.262m-1.262 0v4.875M21.251 13h-2.523c-.557 0-1.009.448-1.009 1v1.5m0 0V18m0-2.5h2.523"})]})})}function sa(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 48 48",children:i.jsxs("g",{fill:"none",stroke:"currentColor",strokeWidth:"4",children:[i.jsx("circle",{cx:"10",cy:"24",r:"4"}),i.jsx("circle",{cx:"38",cy:"10",r:"4"}),i.jsx("circle",{cx:"38",cy:"24",r:"4"}),i.jsx("circle",{cx:"38",cy:"38",r:"4"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M34 38H22V10h12M14 24h20"})]})})}function ca(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:i.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"m3 21l7.548-7.548M21 3l-7.548 7.548m0 0L8 3H3l7.548 10.452m2.904-2.904L21 21h-5l-5.452-7.548",color:"currentColor"})})}const Xe={Bold:p.Bold,LoaderCircle:p.LoaderCircle,Italic:p.Italic,Underline:p.Underline,Quote:p.Quote,TextQuote:Wr,Strikethrough:p.Strikethrough,Minus:p.Minus,Eraser:p.Eraser,PaintRoller:p.PaintRoller,Redo2:p.Redo2,Undo2:p.Undo2,AlignCenter:Ye.TextAlignCenterIcon,AlignJustify:Ye.TextAlignJustifyIcon,AlignLeft:Ye.TextAlignLeftIcon,AlignRight:Ye.TextAlignRightIcon,ChevronDown:p.ChevronDown,Subscript:p.Subscript,Superscript:p.Superscript,Code:p.Code,Code2:p.CodeXml,Type:p.Type,IndentIncrease:p.IndentIncrease,IndentDecrease:p.IndentDecrease,List:p.List,ListOrdered:p.ListOrdered,ListTodo:p.ListTodo,Link:p.Link,ImageUp:p.ImageUp,Video:p.Video,Maximize:p.Maximize,Minimize:p.Minimize,Table:p.Table,Sparkles:p.Sparkles,Pencil:p.Pencil,Unlink:p.Unlink,BetweenHorizonalEnd:p.BetweenHorizonalEnd,BetweenHorizonalStart:p.BetweenHorizonalStart,BetweenVerticalStart:p.BetweenVerticalStart,BetweenVerticalEnd:p.BetweenVerticalEnd,TableCellsMerge:p.TableCellsMerge,TableCellsSplit:p.TableCellsSplit,Trash2:p.Trash2,Trash:p.Trash,Replace:p.Replace,ChevronsUpDown:p.ChevronsUpDown,LineHeight:Zr,Word:Kr,Heading1:p.Heading1,Heading2:p.Heading2,Heading3:p.Heading3,Heading4:p.Heading4,Heading5:p.Heading5,Heading6:p.Heading6,Columns2:p.Columns2,Columns3:p.Columns3,Columns4:p.Columns4,Plus:p.Plus,Grip:p.GripVertical,Copy:p.Copy,Clipboard:p.Clipboard,PanelLeft:p.PanelLeft,PanelRight:p.PanelRight,Columns:p.Columns2,Iframe:p.Frame,MenuDown:Bn,SizeS:Jr,SizeM:Yr,SizeL:Xr,AspectRatio:Ur,Emoji:p.SmilePlus,DeleteColumn:qr,DeleteRow:Gr,SearchAndReplace:p.Replace,EmojiIcon:p.SmilePlusIcon,KatexIcon:p.Sigma,ExportPdf:$n,ExportWord:Fn,ImportWord:Qr,ColumnAddLeft:ea,ColumnAddRight:ta,BookMarked:p.BookMarked,Excalidraw:na,ZoomIn:p.ZoomIn,ZoomOut:p.ZoomOut,Settings:p.Settings,Eye:p.Eye,TextDirection:ia,LeftToRight:ra,RightToLeft:aa,Attachment:p.Paperclip,GifIcon:oa,ChevronUp:p.ChevronUp,Crop:p.CropIcon,Mermaid:sa,Twitter:ca,FlipX:p.FlipVertical,FlipY:p.FlipHorizontal};function la(e){const t=["size-small","size-medium","size-large"],n=["SizeS","SizeM","SizeL"];return t.map((r,a)=>({type:`image-${r}`,component:y,componentProps:{tooltip:b.localeActions.t(`editor.${r.replace("-",".")}.tooltip`),icon:n[a],action:()=>e.commands.updateImage({width:b.IMAGE_SIZE[r]}),isActive:()=>e.isActive("image",{width:b.IMAGE_SIZE[r]})}}))}function da(e){const t=["size-small","size-medium","size-large"],n=["SizeS","SizeM","SizeL"];return t.map((r,a)=>({type:`image-${r}`,component:y,componentProps:{tooltip:b.localeActions.t(`editor.${r.replace("-",".")}.tooltip`),icon:n[a],action:()=>e.commands.updateImageGif({width:b.IMAGE_SIZE[r]}),isActive:()=>e.isActive("image",{width:b.IMAGE_SIZE[r]})}}))}function ha(e){const t=["left","center","right"],n={left:"AlignLeft",center:"AlignCenter",right:"AlignRight"};return t.map(r=>({type:`image-${r}`,component:y,componentProps:{tooltip:b.localeActions.t(`editor.textalign.${r}.tooltip`),icon:n[r],action:()=>{var a,o;return(o=(a=e.commands)==null?void 0:a.setAlignImage)==null?void 0:o.call(a,r)},isActive:()=>e.isActive({align:r})||!1,disabled:!1}}))}function ua(e){const t=["left","center","right"],n={left:"AlignLeft",center:"AlignCenter",right:"AlignRight"};return t.map(r=>({type:`image-${r}`,component:y,componentProps:{tooltip:b.localeActions.t(`editor.textalign.${r}.tooltip`),icon:n[r],action:()=>{var a,o;return(o=(a=e.commands)==null?void 0:a.setAlignImageGif)==null?void 0:o.call(a,r)},isActive:()=>e.isActive({align:r})||!1,disabled:!1}}))}function ma(e){const t=["left","center","right"],n={left:"AlignLeft",center:"AlignCenter",right:"AlignRight"};return t.map(r=>({type:`image-${r}`,component:y,componentProps:{tooltip:b.localeActions.t(`editor.textalign.${r}.tooltip`),icon:n[r],action:()=>{var a,o;return(o=(a=e.commands)==null?void 0:a.setAlignImageMermaid)==null?void 0:o.call(a,r)},isActive:()=>e.isActive({align:r})||!1,disabled:!1}}))}function xa(e){const t=["size-small","size-medium","size-large"],n=["SizeS","SizeM","SizeL"];return t.map((r,a)=>({type:`video-${r}`,component:y,componentProps:{tooltip:b.localeActions.t(`editor.${r.replace("-",".")}.tooltip`),icon:n[a],action:()=>e.commands.updateVideo({width:b.VIDEO_SIZE[r]}),isActive:()=>e.isActive("video",{width:b.VIDEO_SIZE[r]})}}))}function fa(e){return[{type:"flipX",component:y,componentProps:{editor:e,tooltip:b.localeActions.t("editor.tooltip.flipX"),icon:"FlipX",action:()=>{const t=e.getAttributes("image"),{flipX:n}=t;e.chain().focus(void 0,{scrollIntoView:!1}).updateImage({flipX:!n}).run()}}},{type:"flipY",component:y,componentProps:{editor:e,tooltip:b.localeActions.t("editor.tooltip.flipY"),icon:"FlipY",action:()=>{const t=e.getAttributes("image"),{flipY:n}=t;e.chain().focus(void 0,{scrollIntoView:!1}).updateImage({flipY:!n}).run()}}},...la(e),...ha(e),{type:"remove",component:y,componentProps:{editor:e,tooltip:b.localeActions.t("editor.remove"),icon:"Trash2",action:()=>{const{state:t,dispatch:n}=e.view;v.deleteSelection(t,n)}}}]}function ga(e){return[...da(e),...ua(e),{type:"remove",component:y,componentProps:{editor:e,tooltip:b.localeActions.t("editor.remove"),icon:"Trash2",action:()=>{const{state:t,dispatch:n}=e.view;v.deleteSelection(t,n)}}}]}function ba(e){return[...ma(e),{type:"edit",component:y,componentProps:{editor:e,tooltip:b.localeActions.t("editor.edit"),icon:"Pencil",action:()=>{}}},{type:"remove",component:y,componentProps:{editor:e,tooltip:b.localeActions.t("editor.remove"),icon:"Trash2",action:()=>{const{state:t,dispatch:n}=e.view;v.deleteSelection(t,n)}}}]}function pa(e){return[...xa(e),{type:"remove",component:y,componentProps:{editor:e,tooltip:b.localeActions.t("editor.remove"),icon:"Trash2",action:()=>{const{state:t,dispatch:n}=e.view;v.deleteSelection(t,n)}}}]}function wa(e,t){return b.BUBBLE_TEXT_LIST.reduce((n,r)=>{if(r==="divider"&&n.length>0)return[...n,{type:"divider",component:void 0,componentProps:{}}];const a=e.extensionManager.extensions.find(o=>o.name===r);return a?[...n,a.configure().options.button({editor:e,t,extension:a})]:n},[])}var we=(e=>(e[e.max=7]="max",e[e.min=0]="min",e[e.more=1]="more",e[e.less=-1]="less",e))(we||{});function _a(e,t,n){return e<t?t:e>n?n:e}function va(e,t,n,r){const{doc:a,selection:o}=e;if(!a||!o||!(o instanceof v.TextSelection||o instanceof v.AllSelection))return e;const{from:s,to:c}=o;return a.nodesBetween(s,c,(h,d)=>{const u=h.type;return n.includes(u.name)?(e=At(e,d,t),!1):!f.isList(h.type.name,r.extensionManager.extensions)}),e}function At(e,t,n){if(!e.doc)return e;const r=e.doc.nodeAt(t);if(!r)return e;const s=_a((r.attrs.indent||0)+n,0,7);if(s===r.attrs.indent)return e;const c={...r.attrs,indent:s};return e.setNodeMarkup(t,r.type,c,r.marks)}function an({delta:e,types:t}){return({state:n,dispatch:r,editor:a})=>{const{selection:o}=n;let{tr:s}=n;return s=s.setSelection(o),s=va(s,e,t,a),s.docChanged?(r&&r(s),!0):!1}}function ya(e){var E,L,M;const{pluginKey:t=f.dragHandlePluginDefaultKey}=e,{t:n}=b.useLocale(),[r,a]=l.useState(null),[o,s]=l.useState(-1),c=l.useRef(null),h=l.useRef(null),[d,u]=l.useState(!1),m=e.editor.extensionManager.extensions.some(C=>C.name==="textAlign"),x=e.editor.extensionManager.extensions.some(C=>C.name==="indent"),g=e.editor.extensionManager.extensions.some(C=>C.name==="clear");l.useEffect(()=>{c.current&&!e.editor.isDestroyed&&(h.current=f.DragHandlePlugin({editor:e.editor,element:c.current,pluginKey:"ContentItemMenu",tippyOptions:{offset:[-2,16],zIndex:99,moveTransition:"transform 0.15s ease-out"},onNodeChange:T}),e.editor.registerPlugin(h.current))},[e.editor,c]);function w(){const C=e.editor.chain();C.setNodeSelection(o).unsetAllMarks(),(r==null?void 0:r.type.name)!=="paragraph"&&C.setParagraph(),C.run()}function _(){e.editor.chain().focus().setNodeSelection(o).run(),document.execCommand("copy")}function S(){e.editor.commands.setNodeSelection(o);const{$anchor:C}=e.editor.state.selection,D=C.node(1)||e.editor.state.selection.node;e.editor.chain().setMeta("hideDragHandle",!0).insertContentAt(o+((r==null?void 0:r.nodeSize)||0),D.toJSON()).run()}function A(C){e.editor.commands.setTextAlign(C)}function k(){const C=At(e.editor.state.tr,o,1);C.setMeta("hideDragHandle",!0),e.editor.view.dispatch&&e.editor.view.dispatch(C)}function j(){const C=At(e.editor.state.tr,o,-1);e.editor.view.dispatch&&e.editor.view.dispatch(C)}function N(){e.editor.chain().setMeta("hideDragHandle",!0).setNodeSelection(o).deleteSelection().run()}function T(C){C.node&&a(C.node),s(C.pos)}function I(){var C;if(o!==-1){const D=(r==null?void 0:r.nodeSize)||0,z=o+D,H=(r==null?void 0:r.type.name)==="paragraph"&&((C=r==null?void 0:r.content)==null?void 0:C.size)===0,R=H?o+2:z+2;e.editor.chain().command(({dispatch:U,tr:q,state:Ne})=>U?(H?q.insertText("/",o,o+1):q.insert(z,Ne.schema.nodes.paragraph.create(null,[Ne.schema.text("/")])),U(q)):!0).focus(R).run()}}l.useEffect(()=>(d?e.editor.commands.setMeta("lockDragHandle",!0):e.editor.commands.setMeta("lockDragHandle",!1),()=>{e.editor.commands.setMeta("lockDragHandle",!1)}),[d]),l.useEffect(()=>()=>{h.current&&(e.editor.unregisterPlugin(t),h.current=null)},[]),l.useEffect(()=>{var C;(C=e.editor)!=null&&C.isDestroyed&&h.current&&(e.editor.unregisterPlugin(t),h.current=null)},[(E=e.editor)==null?void 0:E.isDestroyed]);const O=C=>{e!=null&&e.disabled||u(C)};return i.jsx("div",{className:`drag-handle [transition-property:top,_left] richtext-ease-in-out richtext-duration-200 ${e==null?void 0:e.className}`,style:{opacity:e!=null&&e.disabled?0:1},ref:c,children:i.jsxs("div",{className:"richtext-flex richtext-items-center richtext-gap-0.5 [transition-property:top,_left] richtext-ease-in-out richtext-duration-200",children:[i.jsx(F,{variant:"ghost",size:"icon",className:"richtext-w-7 richtext-h-7 richtext-cursor-grab",disabled:e==null?void 0:e.disabled,onClick:I,type:"button",children:i.jsx($,{name:"Plus",className:"richtext-text-lg richtext-text-neutral-600 dark:richtext-text-neutral-200"})}),i.jsxs(he,{open:d,onOpenChange:O,children:[i.jsxs("div",{className:"richtext-relative richtext-flex richtext-flex-col",children:[i.jsxs(Oe,{children:[i.jsx(Pe,{asChild:!0,disabled:e==null?void 0:e.disabled,children:i.jsx(F,{variant:"ghost",size:"icon",className:"richtext-w-7 richtext-h-7 richtext-cursor-grab richtext-relative richtext-z-[1]",disabled:e==null?void 0:e.disabled,onMouseUp:C=>{C.preventDefault(),!(e!=null&&e.disabled)&&u(!0)},type:"button",children:i.jsx($,{name:"Grip",className:"richtext-text-sm dark:richtext-text-neutral-200 richtext-text-neutral-600"})})}),i.jsx(je,{children:n("editor.draghandle.tooltip")})]}),i.jsx(ue,{className:"richtext-absolute richtext-top-0 richtext-left-0 richtext-w-[28px] richtext-h-[28px] richtext-z-0"})]}),i.jsxs(ce,{className:"richtext-w-48",align:"start",side:"bottom",sideOffset:0,children:[i.jsxs(ne,{onClick:N,className:"richtext-flex richtext-gap-3 focus:richtext-text-red-500 focus:richtext-bg-red-400 hover:richtext-bg-red-400 dark:hover:richtext-text-red-500 richtext-bg-opacity-10 hover:richtext-bg-opacity-20 focus:richtext-bg-opacity-30 dark:hover:richtext-bg-opacity-20",children:[i.jsx($,{name:"Trash2"}),i.jsx("span",{children:n("editor.remove")})]}),g?i.jsxs(ne,{className:"richtext-flex richtext-gap-3",onClick:w,children:[i.jsx($,{name:"PaintRoller"}),i.jsx("span",{children:n("editor.clear.tooltip")})]}):null,i.jsxs(ne,{className:"richtext-flex richtext-gap-3",onClick:_,children:[i.jsx($,{name:"Clipboard"}),i.jsx("span",{children:n("editor.copyToClipboard")})]}),i.jsxs(ne,{className:"richtext-flex richtext-gap-3",onClick:S,children:[i.jsx($,{name:"Copy"}),i.jsx("span",{children:n("editor.copy")})]}),m||x?i.jsx(ct,{}):null,m?i.jsxs(Kt,{children:[i.jsxs(jt,{className:"richtext-flex richtext-gap-3",children:[i.jsx($,{name:"AlignCenter"}),i.jsx("span",{children:n("editor.textalign.tooltip")})]}),i.jsx(Gt,{children:i.jsxs(kt,{children:[i.jsxs(ne,{className:"richtext-flex richtext-gap-3",onClick:()=>A("left"),children:[i.jsx($,{name:"AlignLeft"}),i.jsx("span",{children:n("editor.textalign.left.tooltip")})]}),i.jsxs(ne,{className:"richtext-flex richtext-gap-3",onClick:()=>A("center"),children:[i.jsx($,{name:"AlignCenter"}),i.jsx("span",{children:n("editor.textalign.center.tooltip")})]}),i.jsxs(ne,{className:"richtext-flex richtext-gap-3",onClick:()=>A("right"),children:[i.jsx($,{name:"AlignRight"}),i.jsx("span",{children:n("editor.textalign.right.tooltip")})]})]})})]}):null,x?i.jsxs(Kt,{children:[i.jsxs(jt,{className:"richtext-flex richtext-gap-3",children:[i.jsx($,{name:"IndentIncrease"}),i.jsx("span",{children:n("editor.indent")})]}),i.jsx(Gt,{children:i.jsxs(kt,{children:[i.jsxs(ne,{className:"richtext-flex richtext-gap-3",onClick:k,disabled:((L=r==null?void 0:r.attrs)==null?void 0:L.indent)>=we.max,children:[i.jsx($,{name:"IndentIncrease"}),i.jsx("span",{children:n("editor.indent.tooltip")})]}),i.jsxs(ne,{className:"richtext-flex richtext-gap-3",onClick:j,disabled:((M=r==null?void 0:r.attrs)==null?void 0:M.indent)<=we.min,children:[i.jsx($,{name:"IndentDecrease"}),i.jsx("span",{children:n("editor.outdent.tooltip")})]})]})})]}):null]})]})]})})}const ja={maxWidth:"auto",zIndex:20,appendTo:"parent",moveTransition:"transform 0.1s ease-out"};function ka({item:e,disabled:t,editor:n}){var a;const r=e.component;return r?i.jsx(r,{...e.componentProps,editor:n,disabled:t||((a=e==null?void 0:e.componentProps)==null?void 0:a.disabled)}):i.jsx(i.Fragment,{})}function Ca(e){const{t,lang:n}=b.useLocale(),r=({editor:o})=>{const{selection:s}=o.view.state,{$from:c,to:h}=s;return c.pos===h?!1:s instanceof v.TextSelection},a=l.useMemo(()=>e.disabled||!(e!=null&&e.editor)?[]:wa(e.editor,t),[e.disabled,e.editor,n,t]);return i.jsx(f.BubbleMenu,{shouldShow:r,editor:e==null?void 0:e.editor,tippyOptions:ja,children:a!=null&&a.length?i.jsx("div",{className:"richtext-w-auto richtext-px-3 richtext-py-2 richtext-transition-all !richtext-border richtext-rounded-sm richtext-shadow-sm richtext-pointer-events-auto richtext-select-none richtext-border-neutral-200 dark:richtext-border-neutral-800 richtext-bg-background",children:i.jsx("div",{className:"richtext-flex richtext-items-center richtext-gap-[4px] richtext-flex-nowrap richtext-whitespace-nowrap richtext-h-[26px] richtext-justify-start richtext-relative",children:a==null?void 0:a.map((o,s)=>(o==null?void 0:o.type)==="divider"?i.jsx(ie,{orientation:"vertical",className:"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]"},`bubbleMenu-divider-${s}`):i.jsx(ka,{item:o,disabled:e.disabled,editor:e.editor},`bubbleMenu-text-${s}`))})}):i.jsx(i.Fragment,{})})}function Na({fill:e}){return i.jsx("svg",{width:"18px",height:"18px",viewBox:"0 0 256 256",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("g",{id:"icon/填充色",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd",children:i.jsxs("g",{id:"icon/背景颜色",children:[i.jsx("g",{id:"编组",fill:"currentColor",children:i.jsxs("g",{transform:"translate(119.502295, 137.878331) rotate(-135.000000) translate(-119.502295, -137.878331) translate(48.002295, 31.757731)",id:"矩形",children:[i.jsx("path",{d:"M100.946943,60.8084699 L43.7469427,60.8084699 C37.2852111,60.8084699 32.0469427,66.0467383 32.0469427,72.5084699 L32.0469427,118.70847 C32.0469427,125.170201 37.2852111,130.40847 43.7469427,130.40847 L100.946943,130.40847 C107.408674,130.40847 112.646943,125.170201 112.646943,118.70847 L112.646943,72.5084699 C112.646943,66.0467383 107.408674,60.8084699 100.946943,60.8084699 Z M93.646,79.808 L93.646,111.408 L51.046,111.408 L51.046,79.808 L93.646,79.808 Z",fillRule:"nonzero"}),i.jsx("path",{d:"M87.9366521,16.90916 L87.9194966,68.2000001 C87.9183543,69.4147389 86.9334998,70.399264 85.7187607,70.4 L56.9423078,70.4 C55.7272813,70.4 54.7423078,69.4150264 54.7423078,68.2 L54.7423078,39.4621057 C54.7423078,37.2523513 55.5736632,35.1234748 57.0711706,33.4985176 L76.4832996,12.4342613 C78.9534987,9.75382857 83.1289108,9.5834005 85.8093436,12.0535996 C87.1658473,13.303709 87.9372691,15.0644715 87.9366521,16.90916 Z",fillRule:"evenodd"}),i.jsx("path",{d:"M131.3,111.241199 L11.7,111.241199 C5.23826843,111.241199 0,116.479467 0,122.941199 L0,200.541199 C0,207.002931 5.23826843,212.241199 11.7,212.241199 L131.3,212.241199 C137.761732,212.241199 143,207.002931 143,200.541199 L143,122.941199 C143,116.479467 137.761732,111.241199 131.3,111.241199 Z M124,130.241 L124,193.241 L19,193.241 L19,130.241 L124,130.241 Z",fillRule:"nonzero"})]})}),i.jsx("path",{d:"M51,218 L205,218 C211.075132,218 216,222.924868 216,229 C216,235.075132 211.075132,240 205,240 L51,240 C44.9248678,240 40,235.075132 40,229 C40,222.924868 44.9248678,218 51,218 Z",id:"矩形",fill:e||"#FBDE28"})]})})})}function Vn(e){const[t,n]=l.useState(void 0);function r(s){var c;(c=e.action)==null||c.call(e,s)}function a(){var s;(s=e.action)==null||s.call(e,t)}const o=l.useCallback(v.debounce(s=>{n(s)},350),[]);return i.jsxs("div",{className:"richtext-flex richtext-items-center richtext-h-[32px]",children:[i.jsx(y,{tooltip:e==null?void 0:e.tooltip,disabled:e==null?void 0:e.disabled,action:a,tooltipOptions:e==null?void 0:e.tooltipOptions,shortcutKeys:e==null?void 0:e.shortcutKeys,children:i.jsx("span",{className:"richtext-flex richtext-items-center richtext-justify-center richtext-text-sm",children:i.jsx(Na,{fill:t})})}),i.jsx(Rn,{selectedColor:t,setSelectedColor:o,onChange:r,highlight:!0,disabled:e==null?void 0:e.disabled,children:i.jsx(F,{variant:"ghost",size:"icon",className:"!richtext-w-3 !richtext-h-[32px]",disabled:e==null?void 0:e.disabled,children:i.jsx($,{className:"!richtext-w-3 !richtext-h-3 richtext-text-zinc-500",name:"MenuDown"})})})]})}function Sa({editor:e,disabled:t}){var _,S,A,k,j,N,T,I,O,E,L,M,C,D,z,H,R,U;const n=({editor:q})=>f.isActive(q.view.state,"table"),{t:r}=b.useLocale();function a(){e.chain().focus().addColumnBefore().run()}function o(){e.chain().focus().addColumnAfter().run()}function s(){e.chain().focus().deleteColumn().run()}function c(){e.chain().focus().addRowBefore().run()}function h(){e.chain().focus().addRowAfter().run()}function d(){e.chain().focus().deleteRow().run()}function u(){e.chain().focus().mergeCells().run()}function m(){e==null||e.chain().focus().splitCell().run()}function x(){e.chain().focus().deleteTable().run()}function g(q){e.chain().focus().setTableCellBackground(q).run()}const w=()=>{var Wt;const{view:q,state:{selection:{from:Ne}}}=e,oe=q.domAtPos(Ne).node;if(!oe)return new DOMRect(-1e3,-1e3,0,0);const Ut=(Wt=oe==null?void 0:oe.closest)==null?void 0:Wt.call(oe,".tableWrapper");return Ut?Ut.getBoundingClientRect():new DOMRect(-1e3,-1e3,0,0)};return i.jsx(f.BubbleMenu,{editor:e,pluginKey:"table",shouldShow:n,updateDelay:0,tippyOptions:{offset:[0,8],popperOptions:{modifiers:[{name:"flip",enabled:!1}]},maxWidth:"auto",getReferenceClientRect:w,plugins:[at.sticky],sticky:"popper"},children:t?i.jsx(i.Fragment,{}):i.jsxs("div",{className:"richtext-min-w-32 richtext-flex richtext-flex-row richtext-h-full richtext-items-center richtext-leading-none richtext-gap-0.5 richtext-p-2 richtext-w-full richtext-bg-background richtext-rounded-lg richtext-shadow-sm !richtext-border richtext-border-border",children:[i.jsx(y,{icon:"BetweenHorizonalEnd",tooltip:r("editor.table.menu.insertColumnBefore"),action:a,"tooltip-options":{sideOffset:15},disabled:!((S=(_=e==null?void 0:e.can())==null?void 0:_.addColumnBefore)!=null&&S.call(_))}),i.jsx(y,{icon:"BetweenHorizonalStart",tooltip:r("editor.table.menu.insertColumnAfter"),action:o,"tooltip-options":{sideOffset:15},disabled:!((k=(A=e==null?void 0:e.can())==null?void 0:A.addColumnAfter)!=null&&k.call(A))}),i.jsx(y,{icon:"DeleteColumn",action:s,tooltip:r("editor.table.menu.deleteColumn"),"tooltip-options":{sideOffset:15},disabled:!((N=e==null?void 0:(j=e.can()).deleteColumn)!=null&&N.call(j))}),i.jsx(ie,{orientation:"vertical",className:"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]"}),i.jsx(y,{icon:"BetweenVerticalEnd",action:c,tooltip:r("editor.table.menu.insertRowAbove"),"tooltip-options":{sideOffset:15},disabled:!((I=e==null?void 0:(T=e.can()).addRowBefore)!=null&&I.call(T))}),i.jsx(y,{icon:"BetweenVerticalStart",action:h,tooltip:r("editor.table.menu.insertRowBelow"),"tooltip-options":{sideOffset:15},disabled:!((E=(O=e==null?void 0:e.can())==null?void 0:O.addRowAfter)!=null&&E.call(O))}),i.jsx(y,{icon:"DeleteRow",action:d,tooltip:r("editor.table.menu.deleteRow"),"tooltip-options":{sideOffset:15},disabled:!((M=(L=e==null?void 0:e.can())==null?void 0:L.deleteRow)!=null&&M.call(L))}),i.jsx(ie,{orientation:"vertical",className:"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]"}),i.jsx(y,{icon:"TableCellsMerge",action:u,tooltip:r("editor.table.menu.mergeCells"),"tooltip-options":{sideOffset:15},disabled:!((D=(C=e==null?void 0:e.can())==null?void 0:C.mergeCells)!=null&&D.call(C))}),i.jsx(y,{icon:"TableCellsSplit",action:m,tooltip:r("editor.table.menu.splitCells"),"tooltip-options":{sideOffset:15},disabled:!((H=(z=e==null?void 0:e.can())==null?void 0:z.splitCell)!=null&&H.call(z))}),i.jsx(ie,{orientation:"vertical",className:"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]"}),i.jsx(Vn,{editor:e,tooltip:r("editor.table.menu.setCellsBgColor"),action:g,tooltipOptions:{sideOffset:15}}),i.jsx(y,{icon:"Trash2",tooltip:r("editor.table.menu.deleteTable"),action:x,"tooltip-options":{sideOffset:15},disabled:!((U=(R=e==null?void 0:e.can())==null?void 0:R.deleteTable)!=null&&U.call(R))})]})})}function Un(e){const{t}=b.useLocale(),[n,r]=l.useState({text:"",link:""}),[a,o]=l.useState(!1);l.useEffect(()=>{var c;if(e!=null&&e.editor){const{href:h,target:d}=(c=e.editor)==null?void 0:c.getAttributes("link"),{from:u,to:m}=e.editor.state.selection,x=e.editor.state.doc.textBetween(u,m," ");r({link:h,text:x}),o(d==="_blank")}},[e==null?void 0:e.editor]);function s(c){c.preventDefault(),c.stopPropagation(),e==null||e.onSetLink(n.link,n.text,a)}return i.jsx("div",{className:"richtext-p-2 richtext-bg-white !richtext-border richtext-rounded-lg richtext-shadow-sm dark:richtext-bg-black border-neutral-200 dark:richtext-border-neutral-800",children:i.jsxs("form",{className:"richtext-flex richtext-flex-col richtext-gap-2",onSubmit:s,children:[i.jsx(X,{className:"mb-[6px]",children:t("editor.link.dialog.text")}),i.jsx("div",{className:"richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5 richtext-mb-[10px]",children:i.jsx("div",{className:"richtext-relative richtext-items-center richtext-w-full richtext-max-w-sm",children:i.jsx(Z,{type:"text",value:n.text,required:!0,className:"richtext-w-80",placeholder:"Text",onChange:c=>r({...n,text:c.target.value})})})}),i.jsx(X,{className:"mb-[6px]",children:t("editor.link.dialog.link")}),i.jsx("div",{className:"richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5",children:i.jsxs("div",{className:"richtext-relative richtext-items-center richtext-w-full richtext-max-w-sm",children:[i.jsx(Z,{type:"url",value:n.link,required:!0,className:"richtext-pl-10",onChange:c=>r({...n,link:c.target.value})}),i.jsx("span",{className:"richtext-absolute richtext-inset-y-0 richtext-flex richtext-items-center richtext-justify-center richtext-px-2 richtext-start-0",children:i.jsx($,{className:"richtext-size-5 richtext-text-muted-foreground",name:"Link"})})]})}),i.jsxs("div",{className:"richtext-flex richtext-items-center richtext-space-x-2",children:[i.jsx(X,{children:t("editor.link.dialog.openInNewTab")}),i.jsx(zt,{checked:a,onCheckedChange:c=>{o(c)}})]}),i.jsx(F,{type:"submit",className:"richtext-self-end richtext-mt-2",children:t("editor.link.dialog.button.apply")})]})})}function Ta(e){const{t}=b.useLocale();return i.jsxs("div",{className:"richtext-flex richtext-items-center richtext-gap-2 richtext-p-2 richtext-bg-white !richtext-border richtext-rounded-lg richtext-shadow-sm dark:richtext-bg-black richtext-border-neutral-200 dark:richtext-border-neutral-800",children:[i.jsx("a",{href:e==null?void 0:e.link,target:"_blank",rel:"noopener noreferrer",className:"richtext-text-sm richtext-underline richtext-break-all",children:v.truncate(e==null?void 0:e.link,{length:50,omission:"…"})}),(e==null?void 0:e.link)&&i.jsx(ie,{orientation:"vertical",className:"!richtext-h-4"}),i.jsxs("div",{className:"richtext-flex richtext-flex-nowrap",children:[i.jsx(y,{icon:"Pencil",tooltip:t("editor.link.edit.tooltip"),action:()=>{e==null||e.onEdit()},tooltipOptions:{sideOffset:15}}),i.jsx(y,{icon:"Unlink",tooltip:t("editor.link.unlink.tooltip"),action:()=>{e==null||e.onClear()},tooltipOptions:{sideOffset:15}})]})]})}function Aa({editor:e,disabled:t}){const[n,r]=l.useState(!1),a=l.useMemo(()=>{const{href:h}=e.getAttributes("link");return h},[e]),o=l.useCallback(({editor:h})=>h.isActive("link"),[]),s=(h,d,u)=>{e.chain().extendMarkRange("link").insertContent({type:"text",text:d,marks:[{type:"link",attrs:{href:h,target:u?"_blank":""}}]}).setLink({href:h}).focus().run(),r(!1)},c=l.useCallback(()=>{e.chain().extendMarkRange("link").unsetLink().focus().run(),r(!1)},[e]);return i.jsx(i.Fragment,{children:i.jsx(f.BubbleMenu,{editor:e,shouldShow:o,tippyOptions:{popperOptions:{modifiers:[{name:"flip",enabled:!1}]},placement:"bottom-start",offset:[-2,16],zIndex:9999,onHidden:()=>{r(!1)}},children:t?i.jsx(i.Fragment,{}):i.jsx(i.Fragment,{children:n?i.jsx(Un,{onSetLink:s,editor:e}):i.jsx(Ta,{editor:e,onClear:c,onEdit:()=>{r(!0)},link:a})})})})}const $t={maxWidth:"auto",zIndex:20,appendTo:"parent",moveTransition:"transform 0.1s ease-out"};function Ft({item:e,disabled:t,editor:n}){var a;const r=e.component;return r?i.jsx(l.Fragment,{children:e.type==="divider"?i.jsx(ie,{orientation:"vertical",className:"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]"}):i.jsx(r,{...e.componentProps,editor:n,disabled:t||((a=e==null?void 0:e.componentProps)==null?void 0:a.disabled)})}):i.jsx(i.Fragment,{})}function La(e){return e.type.name==="image"}function Ma(e){return e.type.name===Vt.name}function Ea(e){return e.type.name==="video"}function Ia(e){const{lang:t}=b.useLocale(),n=({editor:a})=>{const{selection:o}=a.view.state,{$from:s,to:c}=o;let h=!1;return a.view.state.doc.nodesBetween(s.pos,c,d=>{if(La(d))return h=!0,!1}),h},r=l.useMemo(()=>e.disabled?[]:fa(e.editor),[e.disabled,e.editor,t]);return i.jsx(i.Fragment,{children:i.jsx(f.BubbleMenu,{shouldShow:n,editor:e==null?void 0:e.editor,tippyOptions:$t,children:r!=null&&r.length?i.jsx("div",{className:"richtext-w-auto richtext-px-3 richtext-py-2 richtext-transition-all !richtext-border richtext-rounded-sm richtext-shadow-sm richtext-pointer-events-auto richtext-select-none richtext-border-neutral-200 dark:richtext-border-neutral-800 richtext-bg-background",children:i.jsx("div",{className:"richtext-flex richtext-items-center richtext-flex-nowrap richtext-whitespace-nowrap richtext-h-[26px] richtext-justify-start richtext-relative",children:r==null?void 0:r.map((a,o)=>i.jsx(Ft,{item:a,disabled:e.disabled,editor:e.editor},`bubbleMenu-image-${o}`))})}):i.jsx(i.Fragment,{})})})}function Ra(e){const{lang:t}=b.useLocale(),n=({editor:a})=>{const{selection:o}=a.view.state,{$from:s,to:c}=o;let h=!1;return a.view.state.doc.nodesBetween(s.pos,c,d=>{if(Ma(d))return h=!0,!1}),h},r=l.useMemo(()=>e.disabled?[]:ga(e.editor),[e.disabled,e.editor,t]);return i.jsx(i.Fragment,{children:i.jsx(f.BubbleMenu,{shouldShow:n,editor:e==null?void 0:e.editor,tippyOptions:$t,children:r!=null&&r.length?i.jsx("div",{className:"richtext-w-auto richtext-px-3 richtext-py-2 richtext-transition-all !richtext-border richtext-rounded-sm richtext-shadow-sm richtext-pointer-events-auto richtext-select-none richtext-border-neutral-200 dark:richtext-border-neutral-800 richtext-bg-background",children:i.jsx("div",{className:"richtext-flex richtext-items-center richtext-flex-nowrap richtext-whitespace-nowrap richtext-h-[26px] richtext-justify-start richtext-relative",children:r==null?void 0:r.map((a,o)=>i.jsx(Ft,{item:a,disabled:e.disabled,editor:e.editor},`bubbleMenu-image-gif-${o}`))})}):i.jsx(i.Fragment,{})})})}function Ha(e){const{lang:t}=b.useLocale(),n=({editor:a})=>{const{selection:o}=a.view.state,{$from:s,to:c}=o;let h=!1;return a.view.state.doc.nodesBetween(s.pos,c,d=>{if(Ea(d))return h=!0,!1}),h},r=l.useMemo(()=>e.disabled?[]:pa(e.editor),[e.editor,e.disabled,t]);return i.jsx(i.Fragment,{children:i.jsx(f.BubbleMenu,{shouldShow:n,editor:e==null?void 0:e.editor,tippyOptions:$t,children:r!=null&&r.length?i.jsx("div",{className:"richtext-w-auto richtext-px-3 richtext-py-2 richtext-transition-all !richtext-border richtext-rounded-sm richtext-shadow-sm richtext-pointer-events-auto richtext-select-none richtext-border-neutral-200 dark:richtext-border-neutral-800 richtext-bg-background",children:i.jsx("div",{className:"richtext-flex richtext-items-center richtext-flex-nowrap richtext-whitespace-nowrap richtext-h-[26px] richtext-justify-start richtext-relative",children:r==null?void 0:r.map((a,o)=>i.jsx(Ft,{item:a,disabled:e.disabled,editor:e.editor},`bubbleMenu-video-${o}`))})}):i.jsx(i.Fragment,{})})})}function za({editor:e}){const{t}=b.useLocale(),n=l.useCallback(()=>e.isActive(Re.name),[e]),r=l.useCallback(()=>ze(Re.name,e),[e]),a=l.useCallback(()=>e.chain().focus().addColBefore().run(),[e]),o=l.useCallback(()=>e.chain().focus().addColAfter().run(),[e]),s=l.useCallback(()=>e.chain().focus().deleteCol().run(),[e]);return i.jsx(f.BubbleMenu,{pluginKey:"columns-bubble-menu",editor:e,shouldShow:n,tippyOptions:{popperOptions:{modifiers:[{name:"flip",enabled:!1}]},placement:"bottom-start",offset:[-2,16],zIndex:9999},children:i.jsxs("div",{className:"richtext-w-auto richtext-px-3 richtext-py-2 richtext-transition-all !richtext-border richtext-rounded-sm richtext-shadow-sm richtext-pointer-events-auto richtext-select-none richtext-border-neutral-200 dark:richtext-border-neutral-800 richtext-bg-background",children:[i.jsx(y,{action:a,icon:"ColumnAddLeft",tooltip:t("editor.table.menu.insertColumnBefore")}),i.jsx(y,{action:o,icon:"ColumnAddRight",tooltip:t("editor.table.menu.insertColumnAfter")}),i.jsx(y,{action:s,icon:"DeleteColumn",tooltip:t("editor.table.menu.deleteColumn")}),i.jsx(y,{action:r,icon:"Trash2",tooltip:t("editor.table.menu.delete_column")})]})})}const Oa=f.Bold.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),button:({editor:t,t:n})=>({component:y,componentProps:{action:()=>t.commands.toggleBold(),isActive:()=>t.isActive("bold")||!1,disabled:!t.can().toggleBold(),icon:"Bold",shortcutKeys:["mod","B"],tooltip:n("editor.bold.tooltip")}})}}}),Pa=f.Italic.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),button({editor:t,t:n}){return{component:y,componentProps:{action:()=>t.commands.toggleItalic(),isActive:()=>t.isActive("italic")||!1,disabled:!t.can().toggleItalic(),shortcutKeys:["mod","I"],icon:"Italic",tooltip:n("editor.italic.tooltip")}}}}}}),Da=f.Underline.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),button({editor:t,t:n}){return{component:y,componentProps:{action:()=>t.commands.toggleUnderline(),isActive:()=>t.isActive("underline")||!1,disabled:!t.can().toggleUnderline(),icon:"Underline",shortcutKeys:["mod","U"],tooltip:n("editor.underline.tooltip")}}}}}}),Ba=f.Strike.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),button:({editor:t,t:n})=>({component:y,componentProps:{action:()=>t.commands.toggleStrike(),isActive:()=>t.isActive("strike")||!1,disabled:!t.can().toggleStrike(),icon:"Strikethrough",shortcutKeys:["shift","mod","X"],tooltip:n("editor.strike.tooltip")}})}}}),$a=f.Code.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),button:({editor:t,t:n})=>({component:y,componentProps:{action:()=>t.commands.toggleCode(),isActive:()=>t.isActive("code")||!1,disabled:!t.can().toggleCode(),icon:"Code",shortcutKeys:["mod","E"],tooltip:n("editor.code.tooltip")}})}}});let ae,$e;const gt=new Set,bt=new Set;function Fa(){return ae}function Va(e){if(!ae&&!$e){const t=e.themes.filter(r=>!!r&&r in Ue.bundledThemes),n=e.languages.filter(r=>!!r&&r in Ue.bundledLanguages);return $e=Ue.createHighlighter({themes:t,langs:n}).then(r=>{ae=r}),$e}if($e)return $e}async function Wn(e){return ae&&!ae.getLoadedThemes().includes(e)&&!bt.has(e)&&e in Ue.bundledThemes?(bt.add(e),await ae.loadTheme(e),bt.delete(e),!0):!1}async function qn(e){return ae&&!ae.getLoadedLanguages().includes(e)&&!gt.has(e)&&e in Ue.bundledLanguages?(gt.add(e),await ae.loadLanguage(e),gt.delete(e),!0):!1}async function Ua({doc:e,name:t,defaultTheme:n,defaultLanguage:r}){const a=f.findChildren(e,c=>c.type.name===t),o=[...a.map(c=>c.node.attrs.theme),n],s=[...a.map(c=>c.node.attrs.language),r];ae?await Promise.all([...o.flatMap(c=>Wn(c)),...s.flatMap(c=>!!c&&qn(c))]):await Va({languages:s,themes:o})}function on({doc:e,name:t,defaultTheme:n,defaultLanguage:r}){const a=[];return f.findChildren(e,s=>s.type.name===t).forEach(s=>{let c=s.pos+1,h=s.node.attrs.language||r;const d=s.node.attrs.theme||n,u=Fa();if(!u)return;u.getLoadedLanguages().includes(h)||(h="plaintext");const m=u.getLoadedThemes().includes(d)?d:u.getLoadedThemes()[0],x=u.codeToTokensBase(s.node.textContent,{lang:h,theme:m});for(const g of x){for(const w of g){const _=c+w.content.length,S=v.Decoration.inline(c,_,{style:`color: ${w.color}`});a.push(S),c=_}c+=1}}),v.DecorationSet.create(e,a)}function Wa({name:e,defaultLanguage:t,defaultTheme:n}){const r=new v.Plugin({key:new v.PluginKey("shiki"),view(a){class o{constructor(){this.initDecorations()}update(){this.checkUndecoratedBlocks()}destroy(){}async initDecorations(){const c=a.state.doc;await Ua({doc:c,name:e,defaultLanguage:t,defaultTheme:n});const h=a.state.tr.setMeta("shikiPluginForceDecoration",!0);a.dispatch(h)}async checkUndecoratedBlocks(){const c=f.findChildren(a.state.doc,u=>u.type.name===e);if((await Promise.all(c.flatMap(u=>[Wn(u.node.attrs.theme),qn(u.node.attrs.language)]))).includes(!0)){const u=a.state.tr.setMeta("shikiPluginForceDecoration",!0);a.dispatch(u)}}}return new o},state:{init:(a,{doc:o})=>on({doc:o,name:e,defaultLanguage:t,defaultTheme:n}),apply:(a,o,s,c)=>{const h=s.selection.$head.parent.type.name,d=c.selection.$head.parent.type.name,u=f.findChildren(s.doc,g=>g.type.name===e),m=f.findChildren(c.doc,g=>g.type.name===e),x=a.docChanged&&([h,d].includes(e)||m.length!==u.length||a.steps.some(g=>g.from!==void 0&&g.to!==void 0&&u.some(w=>w.pos>=g.from&&w.pos+w.node.nodeSize<=g.to)));return a.getMeta("shikiPluginForceDecoration")||x?on({doc:a.doc,name:e,defaultLanguage:t,defaultTheme:n}):o.map(a.mapping,a.doc)}},props:{decorations(a){return r.getState(a)}}});return r}function qa({action:e,languages:t,...n}){const r=o=>{e(o)},a=l.useMemo(()=>t==null?void 0:t.map(o=>({title:b.MAP_LANGUAGE_CODE_LABELS[o]||o,language:o})),[t]);return i.jsxs(he,{children:[i.jsx(ue,{disabled:n==null?void 0:n.disabled,asChild:!0,children:i.jsx(y,{tooltip:n==null?void 0:n.tooltip,disabled:n==null?void 0:n.disabled,icon:n==null?void 0:n.icon})}),i.jsx(ce,{className:"richtext-w-full !richtext-max-h-[180px] !richtext-overflow-y-scroll",children:a==null?void 0:a.map(o=>i.jsx(ne,{onClick:()=>r(o.language),children:i.jsx("div",{className:"richtext-h-full richtext-ml-1",children:o.title})},`codeblock-${o.title}`))})]})}const Ga="_wrap_134f4_1",Ka="_maxHeight_134f4_10",Za="_btnCopy_134f4_13",Xa="_btnDelete_134f4_14",Ya="_blockInfo_134f4_18",Ja="_blockInfoEditable_134f4_28",Qa="_selectLang_134f4_32",eo="_copied_134f4_58",le={wrap:Ga,maxHeight:Ka,btnCopy:Za,btnDelete:Xa,blockInfo:Ya,blockInfoEditable:Ja,selectLang:Qa,"richtext-SelectContent":"_richtext-SelectContent_134f4_46",copied:eo};function to(){const[e,t]=l.useState(!1);return{isCopied:e,copyToClipboard:async r=>{try{await navigator.clipboard.writeText(r),t(!0),setTimeout(()=>t(!1),2e3)}catch(a){console.error("Failed to copy text: ",a),t(!1)}}}}function no({editor:e,node:{attrs:t},updateAttributes:n,extension:r}){var x,g;const{isCopied:a,copyToClipboard:o}=to(),s=l.useMemo(()=>{var w;return(w=r.options.languages)!=null&&w.length?r.options.languages:b.DEFAULT_LANGUAGE_CODE_BLOCK},[r.options.languages]),c=dt(),h=(g=(x=e==null?void 0:e.options)==null?void 0:x.editorProps)==null?void 0:g.print,{language:d}=t,u=l.useRef(),m=l.useCallback(()=>ze(Gn.name,e),[e]);return i.jsxs(f.NodeViewWrapper,{className:v.clsx(le.wrap,!h&&le.maxHeight,"render-wrapper"),children:[i.jsxs("div",{className:v.clsx(le.blockInfo,{[le.blockInfoEditable]:!c}),children:[i.jsx("span",{onClick:()=>o(u.current.innerText),className:v.clsx(le.btnCopy,a&&le.copied),children:a?i.jsx(p.CopyCheck,{size:16}):i.jsx(p.Copy,{size:16})}),i.jsx("span",{onClick:m,className:le.btnDelete,children:i.jsx($,{name:"Trash2"})}),i.jsx("div",{className:le.selectLang,children:i.jsxs(Ai,{defaultValue:d||"auto",disabled:!c,onValueChange:w=>n({language:w}),children:[i.jsx(vn,{children:i.jsx(Li,{placeholder:"Language"})}),i.jsxs(kn,{className:"richtext-max-h-60 richtext-overflow-y-auto",children:[i.jsx(Ct,{value:"auto",children:"Auto"}),s.map((w,_)=>i.jsx(Ct,{value:w,children:w.charAt(0).toUpperCase()+w.slice(1)},`code-lang-${_}`))]})]})})]}),i.jsx("pre",{ref:u,children:i.jsx(f.NodeViewContent,{as:"code"})})]})}const Gn=f.CodeBlock.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),languages:[],button:({editor:t,t:n,extension:r})=>{var o,s,c;const a=(s=(o=r==null?void 0:r.options)==null?void 0:o.languages)!=null&&s.length?(c=r==null?void 0:r.options)==null?void 0:c.languages:b.DEFAULT_LANGUAGE_CODE_BLOCK;return{component:qa,componentProps:{action:(h="js")=>t.commands.setCodeBlock({language:h}),isActive:()=>t.isActive("codeBlock")||!1,disabled:!t.can().toggleCodeBlock(),icon:"Code2",tooltip:n("editor.codeblock.tooltip"),languages:a}}}}},addNodeView(){return f.ReactNodeViewRenderer(no)},addProseMirrorPlugins(){var e;return[...((e=this.parent)==null?void 0:e.call(this))||[],Wa({name:this.name,defaultLanguage:null,defaultTheme:this.options.defaultTheme})]}});function io(e){var a,o,s;const{t,lang:n}=b.useLocale(),r=l.useMemo(()=>{var d;const c=(d=e==null?void 0:e.items)==null?void 0:d.find(u=>u.isActive());return c&&!c.default?{...c}:{title:e.tooltip,font:t("editor.fontFamily.default.tooltip"),isActive:()=>!1,disabled:!1,action:()=>e.editor.chain().focus().unsetFontFamily().run()}},[t,n,e]);return i.jsxs(he,{children:[i.jsx(ue,{disabled:e==null?void 0:e.disabled,asChild:!0,children:i.jsx(Ht,{title:((a=r==null?void 0:r.font)==null?void 0:a.length)>7?`${(o=r==null?void 0:r.font)==null?void 0:o.slice(0,6)}...`:r==null?void 0:r.font,tooltip:e==null?void 0:e.tooltip,disabled:e==null?void 0:e.disabled,icon:"MenuDown"})}),i.jsx(ce,{className:"richtext-w-full",children:(s=e==null?void 0:e.items)==null?void 0:s.map((c,h)=>{const d=c.font===t("editor.fontFamily.default.tooltip")?{}:{fontFamily:c.font};return i.jsxs(l.Fragment,{children:[i.jsx(ye,{checked:(r==null?void 0:r.font)===c.font,onClick:c.action,children:i.jsx("div",{className:"richtext-h-full richtext-ml-1",style:d,children:c.font})}),c.font===t("editor.fontFamily.default.tooltip")&&i.jsx(ct,{})]},`font-family-${h}`)})})]})}const ro=f.FontFamily.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),fontFamilyList:b.DEFAULT_FONT_FAMILY_LIST,button({editor:t,extension:n,t:r}){var d;const{extensions:a=[]}=t.extensionManager??[],o=Nt(((d=n==null?void 0:n.options)==null?void 0:d.fontFamilyList)||[]),s=a.find(u=>u.name==="base-kit"),c=o.map(u=>({action:()=>{t.chain().focus().setFontFamily(u.value).run()},isActive:()=>t.isActive("textStyle",{fontFamily:u.value})||!1,disabled:!t.can().setFontFamily(u.value),title:u.name,font:u.value}));s&&s.options.textStyle!==!1&&c.unshift({action:()=>t.chain().focus().unsetFontFamily().run(),isActive:()=>!1,disabled:!1,font:r("editor.fontFamily.default.tooltip"),title:r("editor.fontFamily.tooltip")});const h=c.filter(u=>u.disabled).length===c.length;return{component:io,componentProps:{tooltip:r("editor.fontFamily.tooltip"),disabled:h,items:c,editor:t}}}}}});function ao(e){var n;const t=l.useMemo(()=>{var o;const r=(o=e==null?void 0:e.items)==null?void 0:o.find(s=>s.isActive());return r&&!r.default?{...r}:{title:e.tooltip,level:0,isActive:()=>!1}},[e]);return i.jsxs(he,{children:[i.jsx(ue,{disabled:e==null?void 0:e.disabled,asChild:!0,children:i.jsx(Ht,{title:t==null?void 0:t.title,tooltip:e==null?void 0:e.tooltip,disabled:e==null?void 0:e.disabled,icon:"MenuDown"})}),i.jsx(ce,{className:"richtext-w-full",children:(n=e==null?void 0:e.items)==null?void 0:n.map((r,a)=>{var o,s;return i.jsxs(l.Fragment,{children:[i.jsxs(ye,{checked:(t==null?void 0:t.title)===r.title,onClick:r.action,children:[i.jsx("div",{className:`richtext-ml-1 richtext-h-full heading-${r.level}`,children:r.title}),!!((o=r==null?void 0:r.shortcutKeys)!=null&&o.length)&&i.jsx(_n,{className:"richtext-pl-4",children:(s=r==null?void 0:r.shortcutKeys)==null?void 0:s.map(c=>ot(c)).join(" ")})]}),r.level===0&&i.jsx(ct,{})]},`heading-k-${a}`)})})]})}const oo=f.Heading.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),levels:[1,2,3,4,5,6],button({editor:t,extension:n,t:r}){var d;const{extensions:a=[]}=t.extensionManager??[],o=((d=n.options)==null?void 0:d.levels)||[],s=a.find(u=>u.name==="base-kit"),c=o.map(u=>({action:()=>t.commands.toggleHeading({level:u}),isActive:()=>t.isActive("heading",{level:u})||!1,disabled:!t.can().toggleHeading({level:u}),title:r(`editor.heading.h${u}.tooltip`),level:u,shortcutKeys:["alt","mod",`${u}`]}));s&&s.options.paragraph!==!1&&c.unshift({action:()=>t.commands.setParagraph(),isActive:()=>t.isActive("paragraph")||!1,disabled:!t.can().setParagraph(),level:0,title:r("editor.paragraph.tooltip"),shortcutKeys:["alt","mod","0"]});const h=c.filter(u=>u.disabled).length===c.length;return{component:ao,componentProps:{tooltip:r("editor.heading.tooltip"),disabled:h,items:c,editor:t}}}}}});function so(e){var n;const t=l.useMemo(()=>{var o;const r=(o=e==null?void 0:e.items)==null?void 0:o.find(s=>s.isActive());return r&&!r.default?{...r,icon:r.icon?r.icon:e.icon}:{title:e==null?void 0:e.tooltip,icon:e.icon,isActive:()=>!1}},[e]);return i.jsxs(ee,{modal:!0,children:[i.jsx(te,{disabled:e==null?void 0:e.disabled,asChild:!0,children:i.jsx(y,{customClass:"!richtext-w-12 richtext-h-12",icon:e==null?void 0:e.icon,tooltip:e==null?void 0:e.tooltip,disabled:e==null?void 0:e.disabled,children:i.jsx($,{className:"richtext-w-3 richtext-h-3 richtext-ml-1 richtext-text-zinc-500",name:"MenuDown"})})}),i.jsx(Y,{className:"richtext-min-w-4 richtext-w-full !richtext-p-[4px] richtext-flex richtext-flex-row richtext-gap-1",align:"start",side:"bottom",children:(n=e==null?void 0:e.items)==null?void 0:n.map((r,a)=>{var o,s;return i.jsxs(Oe,{children:[i.jsx(Pe,{asChild:!0,children:i.jsx(Ze,{size:"sm",onClick:r==null?void 0:r.action,className:"richtext-p-1 richtext-w-7 richtext-h-7",pressed:t.title===r.title,"data-state":t.title===r.title?"on":"off",children:(r==null?void 0:r.icon)&&i.jsx($,{name:r.icon})})}),i.jsxs(je,{className:"richtext-flex richtext-flex-col richtext-items-center",children:[i.jsx("span",{children:r.title}),!!((o=r.shortcutKeys)!=null&&o.length)&&i.jsx("span",{children:(s=r.shortcutKeys)==null?void 0:s.map(c=>ot(c)).join(" ")})]})]},`text-align-${a}`)})})]})}const co=f.TextAlign.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),types:["heading","paragraph","list_item","title"],button({editor:t,extension:n,t:r}){var d;const a=((d=n.options)==null?void 0:d.alignments)||[],o={left:["mod","Shift","L"],center:["mod","Shift","E"],right:["mod","Shift","R"],justify:["mod","Shift","J"]},s={left:"AlignLeft",center:"AlignCenter",right:"AlignRight",justify:"AlignJustify"},c=a.map(u=>{var m,x,g;return{title:r(`editor.textalign.${u}.tooltip`),icon:s[u],shortcutKeys:o[u],isActive:()=>t.isActive({textAlign:u})||!1,action:()=>{var w,_;return(_=(w=t.commands)==null?void 0:w.setTextAlign)==null?void 0:_.call(w,u)},disabled:!((g=(x=(m=t==null?void 0:t.can)==null?void 0:m.call(t))==null?void 0:x.setTextAlign)!=null&&g.call(x,u))}}),h=c.filter(u=>u.disabled).length===c.length;return{component:so,componentProps:{icon:"AlignJustify",tooltip:r("editor.textalign.tooltip"),disabled:h,items:c}}}}}});function lo(e){var r;const{t}=b.useLocale(),n=l.useMemo(()=>{const a=(e.items||[]).find(s=>s.isActive());return a||{title:t("editor.fontSize.default.tooltip"),isActive:()=>!1}},[e]);return i.jsxs(he,{children:[i.jsx(ue,{disabled:e==null?void 0:e.disabled,asChild:!0,children:i.jsx(Ht,{title:n==null?void 0:n.title,tooltip:`${e==null?void 0:e.tooltip}`,disabled:e==null?void 0:e.disabled,icon:"MenuDown"})}),i.jsx(ce,{className:"richtext-w-32 richtext-overflow-y-auto richtext-max-h-96",children:(r=e==null?void 0:e.items)==null?void 0:r.map((a,o)=>i.jsx(ye,{checked:n.title===a.title,onClick:a.action,children:i.jsx("div",{className:"richtext-h-full richtext-ml-1",children:a.title})},`font-size-${o}`))})]})}const ho=f.Extension.create({name:"fontSize",addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),types:["textStyle"],fontSizes:[...b.DEFAULT_FONT_SIZE_LIST],button({editor:t,extension:n,t:r}){var h;const a=Nt(((h=n.options)==null?void 0:h.fontSizes)||b.DEFAULT_FONT_SIZE_VALUE),o=Nt([b.DEFAULT_FONT_SIZE_VALUE])[0],s=a.map(d=>({title:d.value===o.value?r("editor.fontSize.default.tooltip"):String(d.name),isActive:()=>{const{fontSize:u}=t.getAttributes("textStyle");return d.value===o.value&&u===void 0?!0:t.isActive({fontSize:String(d.value)})||!1},action:()=>{if(d.value===o.value){t.commands.unsetFontSize();return}t.commands.setFontSize(String(d.value))},disabled:!t.can().setFontSize(String(d.value)),divider:d.value===o.value||!1,default:d.value===o.value||!1})),c=s.filter(d=>d.disabled).length===s.length;return{component:lo,componentProps:{editor:t,tooltip:r("editor.fontSize.tooltip"),disabled:c,items:s,maxHeight:280}}}}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:e=>e.style.fontSize.replaceAll(/["']+/g,""),renderHTML:e=>e.fontSize?{style:`font-size: ${e.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:e=>({chain:t})=>t().setMark("textStyle",{fontSize:e}).run(),unsetFontSize:()=>({chain:e})=>e().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}});function uo({fill:e}){return i.jsx("svg",{width:"18px",height:"18px",viewBox:"0 0 240 240",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("g",{stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd",children:i.jsx("g",{transform:"translate(0.000000, 0.500000)",children:i.jsxs("g",{transform:"translate(39.000000, 17.353553)",children:[i.jsx("path",{d:"M11,201.146447 L167,201.146447 C173.075132,201.146447 178,206.071314 178,212.146447 C178,218.221579 173.075132,223.146447 167,223.146447 L11,223.146447 C4.92486775,223.146447 7.43989126e-16,218.221579 0,212.146447 C-7.43989126e-16,206.071314 4.92486775,201.146447 11,201.146447 Z",id:"矩形",fill:e||"#DF2A3F",fillRule:"evenodd"}),i.jsx("path",{d:"M72.3425855,16.8295583 C75.799482,7.50883712 86.1577877,2.75526801 95.4785089,6.21216449 C100.284516,7.99463061 104.096358,11.7387855 105.968745,16.4968188 L106.112518,16.8745422 L159.385152,161.694068 C161.291848,166.877345 158.635655,172.624903 153.452378,174.531599 C148.358469,176.405421 142.719567,173.872338 140.716873,168.864661 L140.614848,168.598825 L89.211,28.86 L37.3759214,168.623816 C35.4885354,173.712715 29.8981043,176.351047 24.7909589,174.617647 L24.5226307,174.522368 C19.4337312,172.634982 16.7953993,167.044551 18.5287999,161.937406 L18.6240786,161.669077 L72.3425855,16.8295583 Z",id:"路径-21",fill:"currentColor",fillRule:"nonzero"}),i.jsx("path",{d:"M121,103.146447 C126.522847,103.146447 131,107.623599 131,113.146447 C131,118.575687 126.673329,122.994378 121.279905,123.142605 L121,123.146447 L55,123.146447 C49.4771525,123.146447 45,118.669294 45,113.146447 C45,107.717207 49.3266708,103.298515 54.7200952,103.150288 L55,103.146447 L121,103.146447 Z",id:"路径-22",fill:"currentColor",fillRule:"nonzero"})]})})})})}function mo(e){const[t,n]=l.useState(void 0);function r(s){var c;(c=e.action)==null||c.call(e,s)}function a(){var s;(s=e.action)==null||s.call(e,t)}const o=l.useCallback(v.debounce(s=>{n(s)},350),[]);return i.jsxs("div",{className:"richtext-flex richtext-items-center richtext-h-[32px]",children:[i.jsx(y,{tooltip:e==null?void 0:e.tooltip,disabled:e==null?void 0:e.disabled,action:a,children:i.jsx("span",{className:"richtext-flex richtext-items-center richtext-justify-center richtext-text-sm",children:i.jsx(uo,{fill:t})})}),i.jsx(Rn,{selectedColor:t,setSelectedColor:o,onChange:r,disabled:e==null?void 0:e.disabled,colors:e==null?void 0:e.colors,defaultColor:e==null?void 0:e.defaultColor,children:i.jsx(F,{variant:"ghost",size:"icon",className:"r!ichtext-h-[32px] !richtext-w-3",disabled:e==null?void 0:e.disabled,children:i.jsx($,{className:"!richtext-w-3 !richtext-h-3 richtext-text-zinc-500",name:"MenuDown"})})})]})}const xo=f.Color.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),button({editor:t,t:n,extension:r}){return{component:mo,componentProps:{colors:r.options.colors,defaultColor:r.options.defaultColor,action:a=>{a===void 0&&t.chain().focus().unsetColor().run(),typeof a=="string"&&t.chain().focus().setColor(a).run()},isActive:()=>{const{color:a}=t.getAttributes("textStyle");return a&&t.isActive({color:a})||!1},editor:t,disabled:!t.can().setColor(""),tooltip:n("editor.color.tooltip")}}}}}}),fo=f.Highlight.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),multicolor:!0,button:({editor:t,t:n})=>({component:Vn,componentProps:{action:r=>{typeof r=="string"&&t.chain().focus().setHighlight({color:r}).run(),r===void 0&&t.chain().focus().unsetHighlight().run()},editor:t,isActive:()=>t.isActive("highlight")||!1,disabled:!t.can().setHighlight(),shortcutKeys:["⇧","mod","H"],tooltip:n("editor.highlight.tooltip")}})}}}),go=f.BulletList.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),button:({editor:t,t:n})=>({component:y,componentProps:{action:()=>t.commands.toggleBulletList(),isActive:()=>t.isActive("bulletList")||!1,disabled:!1,shortcutKeys:["shift","mod","8"],icon:"List",tooltip:n("editor.bulletlist.tooltip")}})}}}),bo=f.Node.create({name:"clear",addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),button:({editor:t,t:n})=>({component:y,componentProps:{action:()=>t.chain().focus().clearNodes().unsetAllMarks().run(),disabled:!t.can().chain().focus().clearNodes().unsetAllMarks().run(),icon:"Eraser",tooltip:n("editor.clear.tooltip")}})}}}),po=f.OrderedList.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),button:({editor:t,t:n})=>({component:y,componentProps:{action:()=>t.commands.toggleOrderedList(),isActive:()=>t.isActive("orderedList")||!1,disabled:!1,icon:"ListOrdered",shortcutKeys:["mod","shift","7"],tooltip:n("editor.orderedlist.tooltip")}})}}}),wo=f.TaskList.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),HTMLAttributes:{class:"task-list"},taskItem:{HTMLAttributes:{class:"task-list-item"}},button:({editor:t,t:n})=>({component:y,componentProps:{action:()=>t.commands.toggleTaskList(),isActive:()=>t.isActive("taskList")||!1,disabled:!1,icon:"ListTodo",shortcutKeys:["shift","mod","9"],tooltip:n("editor.tasklist.tooltip")}})}},addExtensions(){return[f.TaskItem.configure(this.options.taskItem)]}}),_o=f.Blockquote.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),HTMLAttributes:{class:"blockquote"},button:({editor:t,t:n})=>({component:y,componentProps:{action:()=>t.commands.toggleBlockquote(),isActive:()=>t.isActive("blockquote")||!1,disabled:!t.can().toggleBlockquote(),icon:"TextQuote",shortcutKeys:["shift","mod","B"],tooltip:n("editor.blockquote.tooltip")}})}}});function vo(e){const[t,n]=l.useState(!1);function r(a,o,s){e.action&&(e.action({link:a,text:o,openInNewTab:s}),n(!1))}return i.jsxs(ee,{modal:!0,open:t,onOpenChange:n,children:[i.jsx(te,{disabled:e==null?void 0:e.disabled,asChild:!0,children:i.jsx(y,{tooltip:e==null?void 0:e.tooltip,isActive:e==null?void 0:e.isActive,disabled:e==null?void 0:e.disabled,children:i.jsx($,{name:e==null?void 0:e.icon})})}),i.jsx(Y,{hideWhenDetached:!0,className:"richtext-w-full",align:"start",side:"bottom",children:i.jsx(Un,{editor:e.editor,onSetLink:r})})]})}const yo=f.Link.extend({inclusive:!1,parseHTML(){return[{tag:'a[href]:not([data-type="button"]):not([href *= "javascript:" i])'}]},renderHTML({HTMLAttributes:e}){return["a",f.mergeAttributes(this.options.HTMLAttributes,e,{class:"link"}),0]},addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),openOnClick:!0,button:({editor:t,t:n})=>({component:vo,componentProps:{editor:t,action:r=>{const{link:a,text:o,openInNewTab:s}=r;t.chain().extendMarkRange("link").insertContent({type:"text",text:o,marks:[{type:"link",attrs:{href:a,target:s?"_blank":""}}]}).setLink({href:a}).focus().run()},id:"linkk",isActive:()=>t.isActive("link")||!1,disabled:!t.can().setLink({href:""}),icon:"Link",tooltip:n("editor.link.tooltip")}})}},addProseMirrorPlugins(){return[new v.Plugin({props:{handleClick:(e,t)=>{const{schema:n,doc:r,tr:a}=e.state,o=f.getMarkRange(r.resolve(t),n.marks.link);if(!o)return!1;const s=r.resolve(o.from),c=r.resolve(o.to),h=a.setSelection(new v.TextSelection(s,c));e.dispatch(h)}}})]}}),jo=f.HorizontalRule.extend({renderHTML(){return["div",f.mergeAttributes(this.options.HTMLAttributes,{"data-type":this.name}),["hr"]]},addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),button:({editor:t,t:n})=>({component:y,componentProps:{action:()=>t.commands.setHorizontalRule(),disabled:!t.can().setHorizontalRule(),icon:"Minus",shortcutKeys:["mod","alt","S"],tooltip:n("editor.horizontalrule.tooltip")}})}},addKeyboardShortcuts(){return{"Mod-Alt-s":()=>this.editor.commands.setHorizontalRule()}}});function ko(e){var d;const{icon:t=void 0,tooltip:n=void 0,customClass:r="",tooltipOptions:a={},action:o=void 0,isActive:s=void 0,children:c}=e,h=Xe[t];return i.jsxs(Oe,{children:[i.jsx(Pe,{asChild:!0,children:i.jsxs(Ze,{size:"sm",className:`richtext-w-[32px] richtext-h-[32px] ${r}`,disabled:s==null?void 0:s(),onClick:o,children:[h&&i.jsx(h,{className:"richtext-w-4 richtext-h-4"}),c&&i.jsx(i.Fragment,{children:c})]})}),n&&i.jsx(je,{...a,children:i.jsxs("div",{className:"richtext-flex richtext-flex-col richtext-items-center richtext-text-center richtext-max-w-24",children:[i.jsx("div",{children:n}),!!((d=e==null?void 0:e.shortcutKeys)!=null&&d.length)&&i.jsx("span",{children:st(e==null?void 0:e.shortcutKeys)})]})})]})}const Co=["undo","redo"],No=f.History.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),depth:100,newGroupDelay:500,button:({editor:t,t:n})=>Co.map(r=>({component:ko,componentProps:{action:()=>{r==="undo"&&t.chain().focus().undo().run(),r==="redo"&&t.chain().focus().redo().run()},shortcutKeys:r==="undo"?["mod","Z"]:["shift","mod","Z"],disabled:r==="undo"?!t.can().undo():!t.can().redo(),isActive:()=>r==="undo"?!t.can().undo():!t.can().redo(),icon:r==="undo"?"Undo2":"Redo2",tooltip:n(`editor.${r}.tooltip`)}}))}}}),So=f.Document.extend({content:"(block|columns)+"});function To(e,t,n=null){return n?e.createChecked({index:t},n):e.createAndFill({index:t})}function Ao(e){if(e.cached.columnsNodeTypes)return e.cached.columnsNodeTypes;const t={columns:e.nodes.columns,column:e.nodes.column};return e.cached.columnsNodeTypes=t,t}function Lo(e,t,n=null){const r=Ao(e),a=[];for(let o=0;o<t;o+=1){const s=To(r.column,o,n);s&&a.push(s)}return r.columns.createChecked({cols:t},a)}function pt({state:e,dispatch:t,type:n}){const r=f.findParentNode(o=>o.type.name===Re.name)(e.selection),a=f.findParentNode(o=>o.type.name===ht.name)(e.selection);if(t&&r&&a){const o=r.node,s=a.node.attrs.index,c=o.toJSON();let h=s;n==="delete"?(h=s-1,c.content.splice(s,1)):(h=n==="addBefore"?s:s+1,c.content.splice(h,0,{type:"column",attrs:{index:s},content:[{type:"paragraph"}]})),c.attrs.cols=c.content.length,c.content.forEach((x,g)=>{x.attrs.index=g});const d=v.Node.fromJSON(e.schema,c);let u=r.pos;d.content.forEach((x,g,w)=>{w<h&&(u+=x.nodeSize)});const m=e.tr.setTime(Date.now());m.replaceWith(r.pos,r.pos+r.node.nodeSize,d).setSelection(v.TextSelection.near(m.doc.resolve(u))),t(m)}return!0}function sn({state:e,dispatch:t,type:n}){const r=f.findParentNode(o=>o.type.name===Re.name)(e.selection),a=f.findParentNode(o=>o.type.name===ht.name)(e.selection);if(t&&r&&a){const o=r.node,s=a.node.attrs.index;let c=0;n==="before"?c=(s-1+o.attrs.cols)%o.attrs.cols:c=(s+1)%o.attrs.cols;let h=r.pos;o.content.forEach((u,m,x)=>{x<c&&(h+=u.nodeSize)});const d=e.tr.setTime(Date.now());return d.setSelection(v.TextSelection.near(d.doc.resolve(h))),t(d),!0}return!1}const Mo=200,Re=f.Node.create({name:"columns",group:"block",defining:!0,isolating:!0,allowGapCursor:!1,content:"column{1,}",priority:Mo,addOptions(){return{HTMLAttributes:{class:"columns"}}},addAttributes(){return{cols:{default:2,parseHTML:e=>e.getAttribute("cols")}}},parseHTML(){return[{tag:"div[class=grid]"}]},renderHTML({HTMLAttributes:e}){return["div",f.mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{insertColumns:e=>({tr:t,dispatch:n,editor:r})=>{const a=Lo(r.schema,e&&e.cols||3);if(n){const o=t.selection.anchor+1;t.replaceSelectionWith(a).scrollIntoView().setSelection(v.TextSelection.near(t.doc.resolve(o)))}return!0},addColBefore:()=>({dispatch:e,state:t})=>pt({dispatch:e,state:t,type:"addBefore"}),addColAfter:()=>({dispatch:e,state:t})=>pt({dispatch:e,state:t,type:"addAfter"}),deleteCol:()=>({dispatch:e,state:t})=>pt({dispatch:e,state:t,type:"delete"})}},addKeyboardShortcuts(){return{"Mod-Alt-G":()=>this.editor.commands.insertColumns(),Tab:()=>sn({state:this.editor.state,dispatch:this.editor.view.dispatch,type:"after"}),"Shift-Tab":()=>sn({state:this.editor.state,dispatch:this.editor.view.dispatch,type:"before"})}}}),ht=f.Node.create({name:"column",content:"block+",isolating:!0,addOptions(){return{HTMLAttributes:{class:"column"}}},addAttributes(){return{index:{default:0,parseHTML:e=>e.getAttribute("index")}}},parseHTML(){return[{tag:"div[class=column]"}]},renderHTML({HTMLAttributes:e}){return["div",f.mergeAttributes(this.options.HTMLAttributes,e),0]}}),Eo=f.Extension.create({name:"columnActionButton",addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),button:({editor:t,t:n})=>({component:y,componentProps:{action:()=>{t.chain().focus().insertColumns({cols:2}).run()},icon:"Columns",tooltip:n("editor.columns.tooltip")}})}}}),Io=f.Extension.create({name:"selection",addProseMirrorPlugins(){const{editor:e}=this;return[new v.Plugin({key:new v.PluginKey("selection"),props:{decorations(t){return t.selection.empty||e.isFocused===!0?null:v.DecorationSet.create(t.doc,[v.Decoration.inline(t.selection.from,t.selection.to,{class:"selection"})])}}})]}});function Ro(e){const{t}=b.useLocale(),n=l.useMemo(()=>[{name:"paragraph",label:t("editor.paragraph.tooltip"),iconName:"Heading1",isActive:()=>e.editor.isActive("paragraph")&&!e.editor.isActive("orderedList")&&!e.editor.isActive("bulletList")&&!e.editor.isActive("taskList"),action:()=>e.editor.chain().focus().clearNodes().run()},{name:"heading1",label:t("editor.heading.h1.tooltip"),isActive:()=>e.editor.isActive("heading",{level:1}),iconName:"Heading1",action:()=>e.editor.chain().focus().clearNodes().toggleHeading({level:1}).run()},{name:"heading2",label:t("editor.heading.h2.tooltip"),isActive:()=>e.editor.isActive("heading",{level:2}),iconName:"Heading2",action:()=>e.editor.chain().focus().clearNodes().toggleHeading({level:2}).run()},{name:"heading3",label:t("editor.heading.h3.tooltip"),isActive:()=>e.editor.isActive("heading",{level:3}),iconName:"Heading3",action:()=>e.editor.chain().focus().clearNodes().toggleHeading({level:3}).run()},{name:"bulletList",label:t("editor.bulletlist.tooltip"),isActive:()=>e.editor.isActive("bulletList"),iconName:"List",action:()=>e.editor.chain().focus().clearNodes().toggleBulletList().run()},{name:"numberedList",label:t("editor.orderedlist.tooltip"),isActive:()=>e.editor.isActive("orderedList"),iconName:"ListOrdered",action:()=>e.editor.chain().focus().clearNodes().toggleOrderedList().run()},{name:"taskList",label:t("editor.tasklist.tooltip"),isActive:()=>e.editor.isActive("taskList"),iconName:"ListTodo",action:()=>e.editor.chain().focus().clearNodes().toggleTaskList().run()},{name:"blockquote",label:t("editor.blockquote.tooltip"),isActive:()=>e.editor.isActive("blockquote"),iconName:"TextQuote",action:()=>e.editor.chain().focus().clearNodes().toggleBlockquote().run()},{name:"codeBlock",label:t("editor.codeblock.tooltip"),isActive:()=>e.editor.isActive("codeBlock"),iconName:"Code2",action:()=>e.editor.chain().focus().clearNodes().toggleCodeBlock().run()}],[e.editor,t]),r=l.useMemo(()=>n.filter(a=>a.isActive()).pop()??{label:"Empty"},[n]);return i.jsxs(he,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs(F,{variant:"ghost",className:"richtext-h-[32px] richtext-flex richtext-gap-1 richtext-px-1.5",children:[i.jsxs("span",{className:"richtext-text-sm richtext-font-normal richtext-whitespace-nowrap",children:[" ",r==null?void 0:r.label]}),i.jsx(p.ChevronDown,{className:"richtext-w-4 richtext-h-4"})]})}),i.jsx(ce,{hideWhenDetached:!0,className:"richtext-w-full richtext-p-1",align:"start",sideOffset:5,children:n.map((a,o)=>{var c;const s=Xe[a.iconName];return i.jsx(ye,{checked:((c=a.isActive)==null?void 0:c.call(a))||!1,onClick:()=>a.action(),className:"richtext-cursor-pointer",children:i.jsxs("div",{className:"richtext-flex richtext-items-center richtext-gap-2 richtext-px-2",children:[i.jsx(s,{className:"richtext-w-3 richtext-h3"}),i.jsxs("span",{children:[" ",a.label]})]})},`text-bubble-${o}`)})})]})}const Ho=f.Extension.create({name:"text-bubble",addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),toolbar:!1,button:()=>({component:Ro,componentProps:{}})}}});function cn({types:e,node:t}){return Array.isArray(e)&&e.includes(t.type)||t.type===e}const zo=f.Extension.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:["paragraph"]}},addProseMirrorPlugins(){const e=new v.PluginKey(this.name),t=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>this.options.notAfter.includes(n.name));return[new v.Plugin({key:e,appendTransaction:(n,r,a)=>{const{doc:o,tr:s,schema:c}=a,h=e.getState(a),d=o.content.size,u=c.nodes[this.options.node];if(h)return s.insert(d,u.create())},state:{init:(n,r)=>{const a=r.tr.doc.lastChild;return!cn({node:a,types:t})},apply:(n,r)=>{if(!n.docChanged)return r;const a=n.doc.lastChild;return!cn({node:a,types:t})}}})]}}),Oo=f.Extension.create({name:"base-kit",addExtensions(){const e=[];return this.options.document!==!1&&e.push(So.configure()),this.options.placeholder!==!1&&e.push(f.Placeholder.configure({placeholder:({node:t,pos:n,editor:r})=>{var a,o,s,c,h;return((a=t==null?void 0:t.type)==null?void 0:a.name)==="columns"||((o=t==null?void 0:t.content)==null?void 0:o.size)!==0?"":((s=t==null?void 0:t.type)==null?void 0:s.name)==="heading"?`${b.localeActions.t(`editor.heading.h${t.attrs.level}.tooltip`)}`:((c=t==null?void 0:t.type)==null?void 0:c.name)==="codeBlock"||((h=t==null?void 0:t.type)==null?void 0:h.name)==="table"?"":r.extensionManager.extensions.some(d=>d.name==="slashCommand")?b.localeActions.t("editor.slash"):b.localeActions.t("editor.content")},...this.options.placeholder})),this.options.focus!==!1&&e.push(f.FocusClasses.configure({className:"focus",...this.options.focus})),this.options.text!==!1&&e.push(f.Text.configure()),this.options.textBubble!==!1&&e.push(Ho.configure()),this.options.gapcursor!==!1&&e.push(f.Gapcursor.configure()),this.options.dropcursor!==!1&&e.push(f.Dropcursor.configure({...this.options.dropcursor,width:2,class:"ProseMirror-dropcursor border-black"})),this.options.characterCount!==!1&&e.push(f.CharacterCount.configure(this.options.characterCount)),this.options.paragraph!==!1&&e.push(f.Paragraph.configure(this.options.paragraph)),this.options.hardBreak!==!1&&e.push(f.HardBreak.configure(this.options.hardBreak)),this.options.listItem!==!1&&e.push(f.ListItem.configure(this.options.listItem)),this.options.textStyle!==!1&&e.push(f.TextStyle.configure(this.options.textStyle)),this.options.trailingNode!==!1&&e.push(zo.configure(this.options.trailingNode)),this.options.selection!==!1&&e.push(Io),this.options.multiColumn!==!1&&(e.push(ht),e.push(Re)),e}}),Po=f.Extension.create({name:"subAndSuperScript",addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),button:({editor:t,extension:n,t:r})=>{const a=n.options.subscript,o=n.options.superscript,s={component:y,componentProps:{action:()=>t.commands.toggleSubscript(),isActive:()=>t.isActive("subscript")||!1,disabled:!t.can().toggleSubscript(),icon:"Subscript",tooltip:r("editor.subscript.tooltip")}},c={component:y,componentProps:{action:()=>t.commands.toggleSuperscript(),isActive:()=>t.isActive("superscript")||!1,disabled:!t.can().toggleSuperscript(),icon:"Superscript",tooltip:r("editor.superscript.tooltip")}},h=[];return a!==!1&&h.push(s),o!==!1&&h.push(c),h}}},addExtensions(){const e=[];return this.options.subscript!==!1&&e.push(f.Subscript.configure(this.options.subscript)),this.options.superscript!==!1&&e.push(f.Superscript.configure(this.options.superscript)),e}});function Do(e){var n;const t=l.useMemo(()=>{var o;const r=(o=e==null?void 0:e.items)==null?void 0:o.find(s=>s.isActive());return r&&!r.default?{...r,icon:r!=null&&r.icon?r==null?void 0:r.icon:e==null?void 0:e.icon}:{title:e.tooltip,icon:e.icon,isActive:()=>!1}},[e]);return i.jsxs(he,{children:[i.jsx(ue,{disabled:e==null?void 0:e.disabled,asChild:!0,children:i.jsx(y,{customClass:"!richtext-w-12 richtext-h-12",icon:e==null?void 0:e.icon,tooltip:e==null?void 0:e.tooltip,disabled:e==null?void 0:e.disabled,children:i.jsx(Bn,{className:"richtext-w-3 richtext-h-3 richtext-text-gray-500"})})}),i.jsx(ce,{className:"w-full",children:(n=e==null?void 0:e.items)==null?void 0:n.map((r,a)=>i.jsxs(ye,{checked:t.title===r.title,onClick:r.action,className:"richtext-flex richtext-items-center richtext-gap-3",children:[i.jsx($,{name:r==null?void 0:r.icon}),i.jsx("span",{className:"richtext-ml-1",children:r.title}),!!(r!=null&&r.shortcutKeys)&&i.jsx("span",{className:"richtext-ml-auto richtext-text-xs richtext-tracking-widest richtext-opacity-60",children:st(r.shortcutKeys)})]},`more-mark-${a}`))})]})}const Bo=f.Extension.create({name:"moreMark",addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),button({editor:t,extension:n,t:r}){const a=n.options.subscript,o=n.options.superscript,s={action:()=>t.commands.toggleSubscript(),isActive:()=>t.isActive("subscript")||!1,disabled:!t.can().toggleSubscript(),icon:"Subscript",title:r("editor.subscript.tooltip"),shortcutKeys:["mod","."]},c={action:()=>t.commands.toggleSuperscript(),isActive:()=>t.isActive("superscript")||!1,disabled:!t.can().toggleSuperscript(),icon:"Superscript",title:r("editor.superscript.tooltip"),shortcutKeys:["mod",","]},h=[];return a!==!1&&h.push(s),o!==!1&&h.push(c),{component:Do,componentProps:{icon:"Type",tooltip:r("editor.moremark"),disabled:!t.isEditable,items:h}}}}},addExtensions(){const e=[];return this.options.subscript!==!1&&e.push(f.Subscript.configure(this.options.subscript)),this.options.superscript!==!1&&e.push(f.Superscript.configure(this.options.superscript)),e}}),$o=f.Extension.create({name:"indent",addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),types:["paragraph","heading","blockquote"],minIndent:we.min,maxIndent:we.max,button({editor:t,t:n}){return[{component:y,componentProps:{action:()=>{t.commands.indent()},shortcutKeys:["Tab"],icon:"IndentIncrease",tooltip:n("editor.indent.tooltip")}},{component:y,componentProps:{action:()=>{t.commands.outdent()},shortcutKeys:["Shift","Tab"],icon:"IndentDecrease",tooltip:n("editor.outdent.tooltip")}}]}}},addGlobalAttributes(){return[{types:this.options.types,attributes:{indent:{default:0,parseHTML:e=>{const t=e.dataset.indent;return(t?Number.parseInt(t,10):0)||0},renderHTML:e=>e.indent?{"data-indent":e.indent}:{}}}}]},addCommands(){return{indent:()=>an({delta:we.more,types:this.options.types}),outdent:()=>an({delta:we.less,types:this.options.types})}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.indent(),"Shift-Tab":()=>this.editor.commands.outdent()}}});function Fo(e){return Number.parseFloat(e.replace("%",""))/100}function Vo(e){const{t}=b.useLocale(),[n,r]=l.useState("default");function a(s){s==="default"?e.editor.commands.unsetLineHeight():e.editor.commands.setLineHeight(s),r(s)}const o=l.useMemo(()=>{const h=e.editor.extensionManager.extensions.find(d=>d.name==="lineHeight").options.lineHeights.map(d=>({label:Fo(d),value:d}));return h.unshift({label:t("editor.default"),value:"default"}),h},[e]);return i.jsxs(he,{children:[i.jsx(ue,{disabled:e==null?void 0:e.disabled,asChild:!0,children:i.jsx(y,{customClass:"!richtext-w-12 richtext-h-12",icon:"LineHeight",tooltip:e==null?void 0:e.tooltip,disabled:e==null?void 0:e.disabled,children:i.jsx($,{className:"richtext-w-3 richtext-h-3 richtext-ml-1 richtext-text-zinc-500",name:"MenuDown"})})}),i.jsx(ce,{className:"richtext-min-w-24",children:o==null?void 0:o.map((s,c)=>i.jsx(ye,{checked:s.value===n,onClick:()=>a(s.value),children:s.label},`lineHeight-${c}`))})]})}const Uo=["paragraph","heading","list_item","todo_item"];function Wo(e,t){const{selection:n,doc:r}=e;if(!n||!r||!(n instanceof v.TextSelection||n instanceof v.AllSelection))return e;const{from:a,to:o}=n,s=[],c=t&&t!==b.DEFAULT_LINE_HEIGHT?t:null;if(r.nodesBetween(a,o,(h,d)=>{const u=h.type;return Uo.includes(u.name)?((h.attrs.lineHeight||null)!==c&&s.push({node:h,pos:d,nodeType:u}),u.name!=="list_item"&&u.name!=="todo_item"):!0}),s.length===0)return e;for(const h of s){const{node:d,pos:u,nodeType:m}=h;let{attrs:x}=d;x={...x,lineHeight:c},e=e.setNodeMarkup(u,m,x,d.marks)}return e}function qo(e){return({state:t,dispatch:n})=>{const{selection:r}=t;let{tr:a}=t;return a=a.setSelection(r),a=Wo(a,e),a.docChanged?(n&&n(a),!0):!1}}const Go=f.Extension.create({name:"lineHeight",addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),types:["paragraph","heading","list_item","todo_item"],lineHeights:b.DEFAULT_LINE_HEIGHT_LIST,defaultHeight:b.DEFAULT_LINE_HEIGHT,button({editor:t,t:n}){return{component:Vo,componentProps:{editor:t,tooltip:n("editor.lineheight.tooltip")}}}}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:e=>e.style.lineHeight||this.options.defaultHeight,renderHTML:e=>e.lineHeight===this.options.defaultHeight||!e.lineHeight?{}:{style:`line-height: ${e.lineHeight}`}}}}]},addCommands(){return{setLineHeight:e=>qo(e),unsetLineHeight:()=>({commands:e})=>this.options.types.every(t=>e.resetAttributes(t,"lineHeight"))}}}),Kn=de.proxy({isOpen:!1});function Ko(){return de.useSnapshot(Kn)}const Ae={setOpen:e=>{Kn.isOpen=e}},Zn=de.proxy({isOpen:!1});function Zo(){return de.useSnapshot(Zn)}const Ve={setOpen:e=>{Zn.isOpen=e}};function Xo(e){const t=[{name:"format",title:b.localeActions.t("editor.slash.format"),commands:[]},{name:"insert",title:b.localeActions.t("editor.slash.insert"),commands:[]}];return e.forEach(n=>{n.name.toLowerCase()==="heading"&&n.options.levels.forEach(r=>{t[0].commands.push({name:`heading${r}`,label:b.localeActions.t(`editor.heading.h${r}.tooltip`),aliases:[`h${r}`,"bt",`bt${r}`],iconName:`Heading${r}`,action:({editor:a,range:o})=>{a.chain().focus().deleteRange(o).setHeading({level:r}).run()}})}),n.name.toLowerCase()==="bulletlist"&&t[0].commands.push({name:"bulletList",label:b.localeActions.t("editor.bulletlist.tooltip"),aliases:["ul","yxlb"],iconName:"List",action:({editor:r,range:a})=>{r.chain().focus().deleteRange(a).toggleBulletList().run()}}),n.name.toLowerCase()==="orderedlist"&&t[0].commands.push({name:"numberedList",label:b.localeActions.t("editor.orderedlist.tooltip"),aliases:["ol","yxlb"],iconName:"ListOrdered",action:({editor:r,range:a})=>{r.chain().focus().deleteRange(a).toggleOrderedList().run()}}),n.name.toLowerCase()==="tasklist"&&t[0].commands.push({name:"taskList",label:b.localeActions.t("editor.tasklist.tooltip"),iconName:"ListTodo",description:"Task list with todo items",aliases:["todo"],action:({editor:r,range:a})=>{r.chain().focus().deleteRange(a).toggleTaskList().run()}}),n.name.toLowerCase()==="blockquote"&&t[0].commands.push({name:"blockquote",label:b.localeActions.t("editor.blockquote.tooltip"),description:"插入引入格式",aliases:["yr"],iconName:"TextQuote",action:({editor:r,range:a})=>{r.chain().focus().deleteRange(a).setBlockquote().run()}}),n.name.toLowerCase()==="codeblock"&&t[0].commands.push({name:"codeBlock",label:b.localeActions.t("editor.codeblock.tooltip"),iconName:"Code2",description:"Code block with syntax highlighting",shouldBeHidden:r=>r.isActive("columns"),action:({editor:r,range:a})=>{r.chain().focus().deleteRange(a).setCodeBlock().run()}}),n.name.toLowerCase()==="image"&&t[1].commands.push({name:"image",label:b.localeActions.t("editor.image.tooltip"),iconName:"ImageUp",description:"Insert a image",aliases:["image","tp","tupian"],shouldBeHidden:r=>r.isActive("columns"),action:({editor:r,range:a})=>{r.chain().focus().deleteRange(a).run(),Ae.setOpen(!0)}}),n.name.toLowerCase()==="video"&&t[1].commands.push({name:"video",label:b.localeActions.t("editor.video.tooltip"),iconName:"Video",description:"Insert a video",aliases:["video","sp","shipin"],shouldBeHidden:r=>r.isActive("columns"),action:({editor:r,range:a})=>{r.chain().focus().deleteRange(a).run(),Ve.setOpen(!0)}}),n.name.toLowerCase()==="table"&&t[1].commands.push({name:"table",label:b.localeActions.t("editor.table.tooltip"),iconName:"Table",description:"Insert a table",aliases:["table","bg","biaoge","biao"],shouldBeHidden:r=>r.isActive("columns"),action:({editor:r,range:a})=>{r.chain().focus().deleteRange(a).insertTable({rows:3,cols:3,withHeaderRow:!1}).run()}}),n.name.toLowerCase()==="horizontalrule"&&t[1].commands.push({name:"horizontalRule",label:b.localeActions.t("editor.horizontalrule.tooltip"),iconName:"Minus",description:"Insert a horizontal divider",aliases:["hr","fgx","fg"],action:({editor:r,range:a})=>{r.chain().focus().deleteRange(a).setHorizontalRule().run()}}),n.name.toLowerCase()==="columns"&&t[1].commands.push({name:"columns",label:b.localeActions.t("editor.columns.tooltip"),iconName:"Columns2",description:"Add two column content",action:({editor:r})=>{r.chain().focus().insertColumns({cols:2}).run()}})}),t}function Yo(e,t){var S,A;const[n,r]=l.useState(0),[a,o]=l.useState(0),s=l.useRef(null),{t:c}=b.useLocale(),h=l.useRef([]);l.useImperativeHandle(t,()=>({onKeyDown:d})),l.useEffect(()=>{if(!s.current)return;const k=a*1e3+n,j=h.current[k];j&&j.scrollIntoView({behavior:"smooth",block:"nearest"})},[n,a]);function d({event:k}){return k.key==="ArrowUp"?(u(),!0):k.key==="ArrowDown"?(m(),!0):k.key==="Enter"?(x(),!0):!1}function u(){var N;if(e.items.length===0)return!1;let k=n-1,j=a;k<0&&(j=a-1,k=((N=e.items[j])==null?void 0:N.commands.length)-1||0),j<0&&(j=e.items.length-1,k=e.items[j].commands.length-1),r(k),o(j)}function m(){if(e.items.length===0)return!1;const k=e.items[a].commands;let j=n+1,N=a;k.length-1<j&&(j=0,N=a+1),e.items.length-1<N&&(N=0),r(j),o(N)}function x(){if(e.items.length===0||a===-1||n===-1)return!1;g(a,n)}function g(k,j){const N=e.items[k].commands[j];e.command(N)}function w(k,j){g(k,j)}function _(k,j,N){h.current[k*1e3+j]=N}return i.jsx("div",{className:"!richtext-bg-white richtext-rounded-lg dark:!richtext-bg-black richtext-shadow-sm !richtext-border !richtext-border-neutral-200 dark:!richtext-border-neutral-800 !richtext-text-black richtext-max-h-[min(80vh,24rem)] richtext-overflow-auto richtext-flex-wrap richtext-mb-8 richtext-p-1",ref:s,children:(S=e==null?void 0:e.items)!=null&&S.length?i.jsx("div",{className:"richtext-grid richtext-grid-cols-1 richtext-gap-0.5 richtext-min-w-48",children:(A=e==null?void 0:e.items)==null?void 0:A.map((k,j)=>i.jsxs(l.Fragment,{children:[i.jsx("div",{className:"!richtext-text-neutral-500 richtext-text-[0.65rem] richtext-col-[1/-1] richtext-mx-2 richtext-mt-2 richtext-font-semibold richtext-tracking-wider richtext-select-none richtext-uppercase first:richtext-mt-0.5",children:k.title}),k.commands.map((N,T)=>i.jsxs("button",{className:P("richtext-flex richtext-items-center richtext-gap-3 richtext-px-2 richtext-py-1.5 richtext-text-sm !richtext-text-neutral-800 dark:!richtext-text-neutral-200 richtext-text-left richtext-w-full richtext-rounded-sm richtext-outline-none richtext-transition-colors !richtext-bg-transparent hover:!richtext-bg-accent ",{"slash-command-active":a===j&&n===T}),ref:I=>_(j,T,I),onClick:()=>w(j,T),children:[N.iconUrl&&i.jsx("img",{className:"richtext-w-6 richtext-h-6",src:N.iconUrl,alt:""}),N.iconName&&i.jsx($,{name:N.iconName,className:"!richtext-mr-1 !richtext-text-lg"}),N.label]},`command-${T}`))]},`slash-${k.title}`))}):i.jsx("div",{className:"richtext-p-3",children:i.jsx("span",{className:"richtext-text-xs richtext-text-gray-800 dark:richtext-text-gray-100",children:c("editor.slash.empty")})})})}const Jo=l.forwardRef(Yo),ge="slashCommand";let V;const Qo=f.Extension.create({name:ge,priority:200,onCreate(){V=at("body",{interactive:!0,trigger:"manual",placement:"bottom-start",theme:"slash-command",maxWidth:"16rem",offset:[16,8],popperOptions:{strategy:"fixed",modifiers:[{name:"flip",enabled:!1}]}})},addProseMirrorPlugins(){return[f.Suggestion({editor:this.editor,char:"/",allowSpaces:!0,startOfLine:!0,pluginKey:new v.PluginKey(ge),allow:({state:e,range:t})=>{var d,u,m;const n=e.doc.resolve(t.from),r=n.depth===1,a=n.parent.type.name==="paragraph",o=((d=n.parent.textContent)==null?void 0:d.charAt(0))==="/",s=this.editor.isActive("column"),c=(m=n.parent.textContent)==null?void 0:m.slice(Math.max(0,(u=n.parent.textContent)==null?void 0:u.indexOf("/"))),h=!(c!=null&&c.endsWith("  "));return(r&&a&&o||s&&a&&o)&&h},command:({editor:e,range:t,props:n})=>{const{view:r}=e;n.action({editor:e,range:t}),r.focus()},items:({query:e,editor:t})=>Xo(t.extensionManager.extensions).map(s=>({...s,commands:s.commands.filter(c=>{const h=c.label.toLowerCase().trim(),d=e.toLowerCase().trim();if(c.aliases){const u=c.aliases.map(g=>g.toLowerCase().trim()),m=h.match(d),x=u.some(g=>g.match(d));return m||x}return h.match(d)}).filter(c=>c.shouldBeHidden?!c.shouldBeHidden(this.editor):!0)})).filter(s=>s.commands.length>0).map(s=>({...s,commands:s.commands.map(c=>({...c,isEnabled:!0}))})),render:()=>{let e,t=null;return{onStart:n=>{var o;e=new f.ReactRenderer(Jo,{props:n,editor:n.editor});const{view:r}=n.editor,a=()=>{if(!n.clientRect)return n.editor.storage[ge].rect;const s=n.clientRect();if(!s)return n.editor.storage[ge].rect;let c=s.y;if(s.top+e.element.offsetHeight+40>window.innerHeight){const h=s.top+e.element.offsetHeight-window.innerHeight+40;c=s.y-h}return new DOMRect(s.x,c,s.width,s.height)};t=()=>{V==null||V[0].setProps({getReferenceClientRect:a})},(o=r.dom.parentElement)==null||o.addEventListener("scroll",t),V==null||V[0].setProps({getReferenceClientRect:a,appendTo:()=>document.body,content:e.element}),V==null||V[0].show()},onUpdate(n){var s;e.updateProps(n);const{view:r}=n.editor,a=()=>{if(!n.clientRect)return n.editor.storage[ge].rect;const c=n.clientRect();return c?new DOMRect(c.x,c.y,c.width,c.height):n.editor.storage[ge].rect},o=()=>{V==null||V[0].setProps({getReferenceClientRect:a})};(s=r.dom.parentElement)==null||s.addEventListener("scroll",o),n.editor.storage[ge].rect=n.clientRect?a():{width:0,height:0,left:0,top:0,right:0,bottom:0},V==null||V[0].setProps({getReferenceClientRect:a})},onKeyDown(n){var r;return n.event.key==="Escape"?(V==null||V[0].hide(),!0):(V!=null&&V[0].state.isShown||V==null||V[0].show(),(r=e.ref)==null?void 0:r.onKeyDown(n))},onExit(n){var r;if(V==null||V[0].hide(),t){const{view:a}=n.editor;(r=a.dom.parentElement)==null||r.removeEventListener("scroll",t)}e.destroy()}}}})]},addStorage(){return{rect:{width:0,height:0,left:0,top:0,right:0,bottom:0}}}}),Je={TOP_LEFT:"tl",TOP_RIGHT:"tr",BOTTOM_LEFT:"bl",BOTTOM_RIGHT:"br"};function es(e){var O,E;const[t,n]=l.useState({width:b.IMAGE_MAX_SIZE,height:b.IMAGE_MAX_SIZE}),[r,a]=l.useState({width:0,height:0}),[o]=l.useState([Je.TOP_LEFT,Je.TOP_RIGHT,Je.BOTTOM_LEFT,Je.BOTTOM_RIGHT]),[s,c]=l.useState(!1),[h,d]=l.useState({x:0,y:0,w:0,h:0,dir:""}),{align:u,inline:m}=(O=e==null?void 0:e.node)==null?void 0:O.attrs,x=l.useMemo(()=>{var oe;const{src:L,alt:M,width:C,height:D,flipX:z,flipY:H}=(oe=e==null?void 0:e.node)==null?void 0:oe.attrs,R=v.isNumber(C)?`${C}px`:C,U=v.isNumber(D)?`${D}px`:D,q=[];z&&q.push("rotateX(180deg)"),H&&q.push("rotateY(180deg)");const Ne=q.join(" ");return{src:L||void 0,alt:M||void 0,style:{width:R||void 0,height:U||void 0,transform:Ne||"none"}}},[(E=e==null?void 0:e.node)==null?void 0:E.attrs]),g=l.useMemo(()=>{const{style:{width:L}}=x;return{width:L==="100%"?L:void 0}},[x]);function w(L){a({width:L.target.width,height:L.target.height})}function _(){const{editor:L,getPos:M}=e;L.commands.setNodeSelection(M())}const S=l.useCallback(v.throttle(()=>{const{editor:L}=e,{width:M}=getComputedStyle(L.view.dom);n(C=>({...C,width:Number.parseInt(M,10)}))},b.IMAGE_THROTTLE_WAIT_TIME),[e==null?void 0:e.editor]);function A(L,M){L.preventDefault(),L.stopPropagation();const C=r.width,D=r.height,z=C/D;let H=Number(e.node.attrs.width),R=Number(e.node.attrs.height);const U=t.width;H&&!R?(H=H>U?U:H,R=Math.round(H/z)):R&&!H?(H=Math.round(R*z),H=H>U?U:H):!H&&!R?(H=C>U?U:C,R=Math.round(H/z)):H=H>U?U:H,Me.flushSync(()=>{c(!0),d({x:L.clientX,y:L.clientY,w:H,h:R,dir:M})})}const k=l.useCallback(v.throttle(L=>{if(L.preventDefault(),L.stopPropagation(),!s)return;const{x:M,w:C,dir:D}=h,z=(L.clientX-M)*(/l/.test(D)?-1:1),H=v.clamp(C+z,b.IMAGE_MIN_SIZE,t.width);e.updateAttributes({width:H,height:null})},b.IMAGE_THROTTLE_WAIT_TIME),[s,h,t,e.updateAttributes]),j=l.useCallback(L=>{L.preventDefault(),L.stopPropagation(),s&&(Me.flushSync(()=>{d({x:0,y:0,w:0,h:0,dir:""}),c(!1)}),_())},[s,_]),N=l.useCallback(()=>{document==null||document.addEventListener("mousemove",k,!0),document==null||document.addEventListener("mouseup",j,!0)},[k,j]),T=l.useCallback(()=>{document==null||document.removeEventListener("mousemove",k,!0),document==null||document.removeEventListener("mouseup",j,!0)},[k,j]);l.useEffect(()=>(s?N():T(),()=>{T()}),[s,N,T]);const I=l.useMemo(()=>new ResizeObserver(()=>S()),[S]);return l.useEffect(()=>(I.observe(e.editor.view.dom),()=>{I.disconnect()}),[e.editor.view.dom,I]),i.jsx(f.NodeViewWrapper,{className:"image-view",style:{...g,textAlign:u,display:m?"inline":"block"},as:m?"span":"div",children:i.jsxs("div",{draggable:"true","data-drag-handle":!0,className:`image-view__body ${e!=null&&e.selected?"image-view__body--focused":""} ${s?"image-view__body--resizing":""}`,style:g,children:[i.jsx("img",{src:x.src,alt:x.alt,style:x.style,height:"auto",className:"image-view__body__image block",onLoad:w,onClick:_}),(e==null?void 0:e.editor.view.editable)&&((e==null?void 0:e.selected)||s)&&i.jsx("div",{className:"image-resizer",children:o==null?void 0:o.map(L=>i.jsx("span",{className:`image-resizer__handler image-resizer__handler--${L}`,onMouseDown:M=>A(M,L)},`image-dir-${L}`))})]})})}function ts({editor:e,imageInline:t,onClose:n}){const{t:r}=b.useLocale(),[a,o]=l.useState(!1),s=l.useRef(null),[c,h]=l.useState(),[d,u]=l.useState(""),m=l.useRef(null),[x,g]=l.useState({src:"",file:null});function w(j){if(s.current&&j.width&&j.height){const N=_(s.current,j);u(N)}}function _(j,N){const T=document.createElement("canvas"),I=j.naturalWidth/j.width,O=j.naturalHeight/j.height;T.width=N.width*I,T.height=N.height*O;const E=T.getContext("2d");return E&&(E.imageSmoothingEnabled=!1,E.drawImage(j,N.x*I,N.y*O,N.width*I,N.height*O,0,0,N.width*I,N.height*O)),T.toDataURL("image/png",1)}async function S(){var j,N;try{const T=await Dt(d,((j=x==null?void 0:x.file)==null?void 0:j.name)||"image.png"),I=(N=e.extensionManager.extensions.find(E=>E.name==="image"))==null?void 0:N.options;let O="";I.upload?O=await I.upload(T):O=URL.createObjectURL(T),e.chain().focus().setImageInline({src:O,inline:t}).run(),o(!1),g({src:"",file:null}),n()}catch(T){console.log("Error cropping image",T)}}function A(j){var N;j.preventDefault(),(N=m.current)==null||N.click()}const k=async j=>{var O;const N=(O=j==null?void 0:j.target)==null?void 0:O.files;if(!e||e.isDestroyed||N.length===0)return;const T=N[0],I=await br(T);o(!0),g({src:I.src,file:T})};return i.jsxs(i.Fragment,{children:[i.jsx(F,{className:"richtext-w-full richtext-mt-1",size:"sm",onClick:A,children:r("editor.image.dialog.tab.uploadCrop")}),i.jsxs(ke,{open:a,children:[i.jsx(Ce,{}),i.jsxs(me,{children:[i.jsx(xe,{children:r("editor.image.dialog.tab.uploadCrop")}),i.jsx("div",{children:x.src&&i.jsx(ci,{crop:c,onChange:j=>h(j),onComplete:j=>w(j),className:"richtext-w-full",children:i.jsx("img",{ref:s,alt:"Crop me",src:x.src})})}),i.jsxs(De,{children:[i.jsxs(F,{onClick:()=>{o(!1),g({src:"",file:null})},children:[r("editor.imageUpload.cancel"),i.jsx($,{name:"Trash2",className:"richtext-ml-[4px]"})]}),i.jsxs(F,{className:"richtext-w-fit",onClick:S,children:[r("editor.imageUpload.crop"),i.jsx($,{name:"Crop",className:"richtext-ml-[4px]"})]})]})]})]}),i.jsx("input",{type:"file",accept:"image/*",ref:m,multiple:!0,style:{display:"none"},onChange:k})]})}function ns(e){const{t}=b.useLocale(),n=Ko(),[r,a]=l.useState(""),o=l.useRef(null),[s,c]=l.useState(!1);async function h(m){var S,A;const x=(S=m==null?void 0:m.target)==null?void 0:S.files;if(!e.editor||e.editor.isDestroyed||x.length===0)return;const g=x[0],w=(A=e.editor.extensionManager.extensions.find(k=>k.name==="image"))==null?void 0:A.options;let _="";w.upload?_=await w.upload(g):_=URL.createObjectURL(g),e.editor.chain().focus().setImageInline({src:_,inline:s}).run(),Ae.setOpen(!1),c(!1)}function d(m){m.preventDefault(),m.stopPropagation(),e.editor.chain().focus().setImageInline({src:r,inline:s}).run(),Ae.setOpen(!1),c(!1)}function u(m){var x;m.preventDefault(),(x=o.current)==null||x.click()}return i.jsxs(ke,{open:n.isOpen,onOpenChange:Ae.setOpen,children:[i.jsx(Ce,{asChild:!0,children:i.jsx(y,{icon:e.icon,action:()=>Ae.setOpen(!0),tooltip:e.tooltip})}),i.jsxs(me,{children:[i.jsx(xe,{children:t("editor.image.dialog.title")}),i.jsxs(Ot,{defaultValue:"upload",activationMode:"manual",children:[i.jsxs(lt,{className:"richtext-grid richtext-w-full richtext-grid-cols-2",children:[i.jsxs(Ee,{value:"upload",children:[t("editor.image.dialog.tab.upload")," "]}),i.jsxs(Ee,{value:"link",children:[" ",t("editor.image.dialog.tab.url")," "]})]}),i.jsxs("div",{className:"richtext-flex richtext-items-center richtext-gap-[4px] richtext-my-[10px]",children:[i.jsx(Cn,{checked:s,onCheckedChange:m=>{c(m)}}),i.jsx(X,{children:t("editor.link.dialog.inline")})]}),i.jsxs(Ie,{value:"upload",children:[i.jsxs("div",{className:"richtext-flex richtext-items-center richtext-gap-[10px]",children:[i.jsx(F,{className:"richtext-w-full richtext-mt-1",size:"sm",onClick:u,children:t("editor.image.dialog.tab.upload")}),i.jsx(ts,{editor:e.editor,imageInline:s,onClose:()=>Ae.setOpen(!1)})]}),i.jsx("input",{type:"file",accept:"image/*",ref:o,multiple:!0,style:{display:"none"},onChange:h})]}),i.jsx(Ie,{value:"link",children:i.jsx("form",{onSubmit:d,children:i.jsxs("div",{className:"richtext-flex richtext-items-center richtext-gap-2",children:[i.jsx(Z,{type:"url",autoFocus:!0,value:r,onChange:m=>a(m.target.value),required:!0,placeholder:t("editor.image.dialog.placeholder")}),i.jsx(F,{type:"submit",children:t("editor.image.dialog.button.apply")})]})})})]})]})]})}const Le=new v.PluginKey("upload-image");function is(){return new v.Plugin({key:Le,state:{init(){return v.DecorationSet.empty},apply(e,t){t=t.map(e.mapping,e.doc);const n=e.getMeta(Le);if(n!=null&&n.add)for(const{id:r,pos:a,src:o}of n.add){const s=rs(o),c=v.Decoration.widget(a,s,{id:r});t=t.add(e.doc,[c])}else if(n!=null&&n.remove)for(const r of n.remove)t=t.remove(t.find(void 0,void 0,a=>a.id===r));return t}},props:{decorations(e){return this.getState(e)}}})}function rs(e){const t=document.createElement("div"),n=document.createElement("img");return n.setAttribute("class","opacity-50"),n.src=e,n.addEventListener("load",()=>{t.setAttribute("class","img-placeholder")}),t.append(n),t}function as(e,t){var a;const r=Le.getState(e).find(void 0,void 0,o=>o.id===t);return r.length>0?(a=r[0])==null?void 0:a.from:null}function os({validateFn:e,onUpload:t,postUpload:n}){return(r,a,o)=>{for(const s of r){if(e&&!e(s))continue;const c=Date.now().toString(),h=a.state.tr;h.selection.empty||h.deleteSelection();const d=URL.createObjectURL(s);h.setMeta(Le,{add:[{id:c,pos:o,src:d}]}),a.dispatch(h),t(s).then(async u=>{var A;n&&typeof u=="string"&&(u=await n(u));const{schema:m}=a.state;let x=as(a.state,c);if(x===null)return;const g=typeof u=="object"?d:u,w=(A=m.nodes.image)==null?void 0:A.create({src:g});if(!w)return;const{doc:_}=a.state;x>_.content.size&&(x=_.content.size-1);const S=a.state.tr.replaceWith(x,x,w).setMeta(Le,{remove:[c]});a.dispatch(S)},()=>{const u=a.state.tr.delete(o,o).setMeta(Le,{remove:[c]});a.dispatch(u)})}}}function ss(e,t,n){var a;const r=[...((a=t.clipboardData)==null?void 0:a.files)||[]];if(r.length>0){t.preventDefault();const o=e.state.selection.from;return n(r,e,o+1),!0}return!1}function cs(e,t,n,r){var o;const a=[...((o=t.dataTransfer)==null?void 0:o.files)||[]];if(!n&&a.length>0){t.preventDefault();const s=e.posAtCoords({left:t.clientX,top:t.clientY});if(s)return r(a,e,s.pos+1),!0}return!1}const ls={acceptMimes:["image/jpeg","image/gif","image/png","image/jpg"],maxSize:1024*1024*5},ds=f.Image.extend({group:"inline",inline:!0,defining:!0,draggable:!0,selectable:!0,addOptions(){var e;return{...ls,...(e=this.parent)==null?void 0:e.call(this),upload:()=>Promise.reject("Image Upload Function"),button:({editor:t,extension:n,t:r})=>{var a,o;return{component:ns,componentProps:{action:()=>{},upload:n.options.upload,disabled:!((o=(a=t.can()).setImage)!=null&&o.call(a,{})),icon:"ImageUp",tooltip:r("editor.image.tooltip"),editor:t}}}}},addAttributes(){var e;return{...(e=this.parent)==null?void 0:e.call(this),flipX:{default:!1},flipY:{default:!1},width:{default:null,parseHTML:t=>{const n=t.style.width||t.getAttribute("width")||null;return n?Number.parseInt(n,10):null},renderHTML:t=>({width:t.width})},align:{default:"center",parseHTML:t=>t.getAttribute("align"),renderHTML:t=>({align:t.align})},inline:{default:!1,parseHTML:t=>!!t.getAttribute("inline"),renderHTML:t=>({inline:t.inline})}}},addNodeView(){return f.ReactNodeViewRenderer(es)},addCommands(){var e;return{...(e=this.parent)==null?void 0:e.call(this),setImageInline:t=>({commands:n})=>n.insertContent({type:this.name,attrs:t}),updateImage:t=>({commands:n})=>n.updateAttributes(this.name,t),setAlignImage:t=>({commands:n})=>n.updateAttributes(this.name,{align:t})}},renderHTML({HTMLAttributes:e}){const{flipX:t,flipY:n,align:r,inline:a}=e,o=t||n?`transform: rotateX(${t?"180":"0"}deg) rotateY(${n?"180":"0"}deg);`:"",s=r?`text-align: ${r};`:"";return[a?"span":"div",{style:s,class:"image"},["img",f.mergeAttributes({height:"auto",style:o},this.options.HTMLAttributes,e)]]},parseHTML(){return[{tag:"span.image img",getAttrs:e=>{var o;const t=e==null?void 0:e.parentElement,n=e==null?void 0:e.getAttribute("width"),r=(e==null?void 0:e.getAttribute("flipx"))||!1,a=(e==null?void 0:e.getAttribute("flipy"))||!1;return{src:e==null?void 0:e.getAttribute("src"),alt:e==null?void 0:e.getAttribute("alt"),caption:e==null?void 0:e.getAttribute("caption"),width:n?Number.parseInt(n,10):null,align:(e==null?void 0:e.getAttribute("align"))||((o=t==null?void 0:t.style)==null?void 0:o.textAlign)||null,inline:(e==null?void 0:e.getAttribute("inline"))||!1,flipX:r==="true",flipY:a==="true"}}},{tag:"div[class=image]",getAttrs:e=>{const t=e.querySelector("img"),n=t==null?void 0:t.getAttribute("width"),r=(t==null?void 0:t.getAttribute("flipx"))||!1,a=(t==null?void 0:t.getAttribute("flipy"))||!1;return{src:t==null?void 0:t.getAttribute("src"),alt:t==null?void 0:t.getAttribute("alt"),caption:t==null?void 0:t.getAttribute("caption"),width:n?Number.parseInt(n,10):null,align:(t==null?void 0:t.getAttribute("align"))||e.style.textAlign||null,inline:(t==null?void 0:t.getAttribute("inline"))||!1,flipX:r==="true",flipY:a==="true"}}}]},addProseMirrorPlugins(){const t=os({validateFn:n=>!(!this.options.acceptMimes.includes(n.type)||n.size>this.options.maxSize),onUpload:this.options.upload});return[new v.Plugin({props:{handlePaste:(n,r)=>!r.clipboardData||[...r.clipboardData.files||[]].some(o=>o.type==="text/html")?!1:ss(n,r,t),handleDrop:(n,r,a,o)=>(!(r instanceof DragEvent)||!r.dataTransfer||cs(n,r,o,t),!1)}}),is()]}});function hs(e){return/\.(?:mp4|webm|ogg|mov)$/i.test(e)}function us(e){const{t}=b.useLocale(),[n,r]=l.useState(""),a=l.useRef(null),o=Zo(),[s,c]=l.useState("");async function h(m){var S,A;const x=(S=m==null?void 0:m.target)==null?void 0:S.files;if(!e.editor||e.editor.isDestroyed||x.length===0)return;const g=x[0],w=(A=e.editor.extensionManager.extensions.find(k=>k.name===Xn.name))==null?void 0:A.options;let _="";w.upload?_=await w.upload(g):_=URL.createObjectURL(g),e.editor.chain().setVideo({src:_,width:"100%"}).focus().run(),Ve.setOpen(!1)}function d(m){m.preventDefault(),m.stopPropagation(),n&&(e.editor.chain().setVideo({src:n,width:"100%"}).focus().run(),Ve.setOpen(!1))}function u(m){var x;m.preventDefault(),(x=a.current)==null||x.click()}return i.jsxs(ke,{open:o.isOpen,onOpenChange:Ve.setOpen,children:[i.jsx(Ce,{asChild:!0,children:i.jsx(y,{icon:e.icon,action:()=>Ve.setOpen(!0),tooltip:e.tooltip})}),i.jsxs(me,{children:[i.jsx(xe,{children:t("editor.video.dialog.title")}),i.jsxs(Ot,{defaultValue:"upload",activationMode:"manual",children:[i.jsxs(lt,{className:"richtext-grid richtext-w-full richtext-grid-cols-2",children:[i.jsxs(Ee,{value:"upload",children:[t("editor.video.dialog.tab.upload")," "]}),i.jsxs(Ee,{value:"link",children:[" ",t("editor.video.dialog.link")," "]})]}),i.jsxs(Ie,{value:"upload",children:[i.jsx("div",{className:"richtext-flex richtext-items-center richtext-gap-[10px]",children:i.jsx(F,{className:"richtext-w-full richtext-mt-1",size:"sm",onClick:u,children:t("editor.video.dialog.tab.upload")})}),i.jsx("input",{type:"file",accept:"video/*",ref:a,multiple:!0,style:{display:"none"},onChange:h})]}),i.jsxs(Ie,{value:"link",children:[i.jsx("form",{onSubmit:d,children:i.jsxs("div",{className:"richtext-flex richtext-items-center richtext-gap-2",children:[i.jsx(Z,{type:"url",autoFocus:!0,value:n,onChange:m=>{const x=m.target.value;if(!hs(x)){c("Invalid video URL"),r("");return}c(""),r(x)},required:!0,placeholder:t("editor.video.dialog.placeholder")}),i.jsx(F,{type:"submit",children:t("editor.video.dialog.button.apply")})]})}),s&&i.jsx("div",{className:"richtext-text-red-500 richtext-my-[5px]",children:s})]})]})]})]})}function ms(e){return e=e.replace("https://youtu.be/","https://www.youtube.com/watch?v=").replace("watch?v=","embed/"),e=e.replace("https://vimeo.com/","https://player.vimeo.com/video/"),/^https?:\/\/www.bilibili.com\/video\/.*/i.test(e)&&(e=e.replace(/\?.*$/,"").replace("https://www.bilibili.com/video/","https://player.bilibili.com/player.html?bvid=")),e.includes("drive.google.com")&&(e=e.replace("/view","/preview")),e}const Xn=f.Node.create({name:"video",group:"block",atom:!0,draggable:!0,addOptions(){return{divider:!1,spacer:!1,allowFullscreen:!0,upload:void 0,frameborder:!1,width:b.VIDEO_SIZE["size-medium"],HTMLAttributes:{class:"iframe-wrapper",style:"display: flex;justify-content: center;"},button:({editor:e,t})=>{var n,r;return{component:us,componentProps:{action:()=>{},isActive:()=>e.isActive("video")||!1,disabled:!((r=(n=e.can()).setVideo)!=null&&r.call(n,{})),icon:"Video",tooltip:t("editor.video.tooltip"),editor:e}}}}},addAttributes(){return{src:{default:null,renderHTML:({src:e})=>({src:e?ms(e):null})},width:{default:this.options.width,renderHTML:({width:e})=>({width:Vi(e)})},frameborder:{default:this.options.frameborder?1:0,parseHTML:()=>this.options.frameborder?1:0},allowfullscreen:{default:this.options.allowFullscreen,parseHTML:()=>this.options.allowFullscreen}}},parseHTML(){return[{tag:"div[data-video] iframe"}]},renderHTML({HTMLAttributes:e}){const{width:t="100%"}=e??{},n={...e,width:"100%",height:"100%"},r=`position: relative;overflow: hidden;display: flex;flex: 1;max-width: ${t};`,a=`flex: 1;padding-bottom: ${9/16*100}%;`,c=["div",{style:r},["div",{style:a}],["iframe",n]];return["div",{...this.options.HTMLAttributes,"data-video":""},c]},addCommands(){return{setVideo:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e}),updateVideo:e=>({commands:t})=>t.updateAttributes(this.name,e)}}});function xs(e,t,n){if(!e.doc)return e;const r=e.doc.nodeAt(t);if(!r||n===r.attrs.backgroundColor)return e;const a={...r.attrs,backgroundColor:n};return e.setNodeMarkup(t,r.type,a,r.marks)}function fs(e,t,n){const{doc:r,selection:a}=e;return!r||!a||!(a instanceof v.CellSelection)||a.forEachCell((o,s)=>{e=xs(e,s,n)}),e}function ln(e,t){return({tr:n,state:r,dispatch:a})=>{const{selection:o}=r;return n=n.setSelection(o),n=fs(n,t,e),n.docChanged?(a==null||a(n),!0):!1}}const gs=f.Extension.create({name:"tableCellBackground",addOptions(){return{types:["tableCell"],HTMLAttributes:{}}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{parseHTML:e=>e.style.backgroundColor||"",renderHTML:e=>!e.backgroundColor||e.backgroundColor===""?{}:{style:`background-color: ${e.backgroundColor}`}}}}]},addCommands(){return{setTableCellBackground:e=>ln(e,this.options),unsetTableCellBackground:()=>ln("",this.options)}}}),bs=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,ps=/CrOS/,ws=/android|ipad|playbook|silk/i;function dn(e={}){let t=e.ua||typeof navigator<"u"&&navigator.userAgent;return t&&typeof t=="object"&&t.headers&&typeof t.headers["user-agent"]=="string"&&(t=t.headers["user-agent"]),typeof t!="string"?!1:!!(bs.test(t)&&!ps.test(t)||e.tablet&&ws.test(t)||e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.includes("Macintosh")&&t.includes("Safari"))}const hn=e=>Array.from({length:e}).map((t,n)=>n+1);function _s(e){var u;const[t,n]=l.useState(!0),[r,a]=l.useState({rows:dn()?b.TABLE_MAX_GRID_SIZE:b.TABLE_INIT_GRID_SIZE,cols:dn()?b.TABLE_MAX_GRID_SIZE:b.TABLE_INIT_GRID_SIZE}),[o,s]=l.useState({rows:b.TABLE_DEFAULT_SELECTED_GRID_SIZE,cols:b.TABLE_DEFAULT_SELECTED_GRID_SIZE});function c(m,x){m===r.rows&&a(g=>({...g,rows:Math.min(m+1,b.TABLE_MAX_GRID_SIZE)})),x===r.cols&&a(g=>({...g,cols:Math.min(x+1,b.TABLE_MAX_GRID_SIZE)})),s({rows:m,cols:x})}function h(m,x){e==null||e.createTable({rows:m,cols:x,withHeaderRow:t}),d()}function d(){n(!1),a({rows:b.TABLE_INIT_GRID_SIZE,cols:b.TABLE_INIT_GRID_SIZE}),s({rows:b.TABLE_DEFAULT_SELECTED_GRID_SIZE,cols:b.TABLE_DEFAULT_SELECTED_GRID_SIZE})}return i.jsxs(ee,{modal:!0,children:[i.jsx(te,{asChild:!0,children:e==null?void 0:e.children}),i.jsx(Y,{className:"richtext-w-full !richtext-p-2",align:"start",side:"bottom",children:i.jsxs("div",{className:"richtext-p-0 table-grid-size-editor",children:[i.jsx("div",{className:"richtext-flex richtext-flex-col richtext-flex-wrap richtext-justify-between richtext-gap-1",children:(u=hn(r==null?void 0:r.rows))==null?void 0:u.map(m=>{var x;return i.jsx("div",{className:"richtext-flex richtext-gap-1",children:(x=hn(r==null?void 0:r.cols))==null?void 0:x.map(g=>i.jsx("div",{className:`richtext-cursor-pointer richtext-border-border ${g<=o.cols&&m<=o.rows&&"!richtext-bg-foreground tableCellActive"}`,onMouseOver:()=>c(m,g),onMouseDown:()=>h(m,g),children:i.jsx("div",{className:"richtext-w-4 richtext-h-4 richtext-p-1 !richtext-border richtext-rounded-[2px] richtext-box-border richtext-border-solid !richtext-border-border"})},`c-${g}`))},`r-${m}`)})}),i.jsxs("div",{className:"richtext-mt-2 richtext-text-sm richtext-text-center richtext-text-zinc-600",children:[o.rows," ","x",o.cols]})]})})]})}function vs(e){function t(n){e.disabled||e.editor.chain().focus().insertTable({...n,withHeaderRow:!1}).run()}return i.jsx(_s,{createTable:t,children:i.jsx(y,{icon:e==null?void 0:e.icon,tooltip:e==null?void 0:e.tooltip,disabled:e==null?void 0:e.disabled,color:e==null?void 0:e.color,action:e==null?void 0:e.action,isActive:e==null?void 0:e.isActive})})}const ys=f.Table.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),resizable:!0,lastColumnResizable:!0,allowTableNodeSelection:!1,button:({editor:t,t:n})=>({component:vs,componentProps:{disabled:t.isActive("table")||!1,icon:"Table",tooltip:n("editor.table.tooltip"),editor:t}})}},addExtensions(){return[f.TableRow.configure(this.options.tableRow),f.TableHeader.configure(this.options.tableHeader),f.TableCell.configure(this.options.tableCell),gs.configure(this.options.tableCellBackground)]}}),js=f.Extension.create({name:"painter",addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),button:({editor:t,t:n})=>({component:y,componentProps:{action:()=>{t.commands.setPainter(t==null?void 0:t.state.selection.$head.marks())},icon:"PaintRoller",tooltip:n("editor.format")}})}},addCommands(){return{setPainter:e=>({view:{dispatch:t,state:{tr:n},dom:r}})=>{const s=`url("data:image/svg+xml;utf8,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="#000" d="M9 22v-6H4V7q0-1.65 1.175-2.825T8 3h12v13h-5v6zM6 10h12V5h-1v4h-2V5h-1v2h-2V5H8q-.825 0-1.412.588T6 7zm0 4h12v-2H6zm0 0v-2z"/></svg>')}"), auto`;return r.style.cursor=s,t(n.setMeta("painterAction",{type:"start",marks:e})),!0}}},addProseMirrorPlugins(){return[new v.Plugin({key:new v.PluginKey("format-painter"),state:{init:()=>[],apply:(e,t)=>{const n=e.getMeta("painterAction");return n&&n.type==="start"?t=n.marks:n&&n.type==="end"&&(t=[]),t}},props:{handleDOMEvents:{mousedown(e,t){const n=this.getState(e.state);if(!n||n.length===0)return e.dom.style.cursor="",!1;const r=()=>{document.removeEventListener("mouseup",r);let{dispatch:a,state:{tr:o,selection:s},dom:c}=e;c.style.cursor="",o=o.removeMark(s.from,s.to);for(const h of n)h.type.name!=="link"&&(o=o.addMark(s.from,s.to,h));a(o.setMeta("painterAction",{type:"end"}))};return document.addEventListener("mouseup",r),!0}}}})]}});function ks({editor:e,...t}){const{t:n}=b.useLocale(),[r,a]=l.useState(-1),[o,s]=l.useState([]),[c,h]=l.useState(""),[d,u]=l.useState(""),[m,x]=l.useState(!1),[g,w]=l.useState(!1);return l.useEffect(()=>{m||(h(""),u(""),a(-1),s([]),e.commands.setSearchTerm(""),e.commands.setReplaceTerm(""))},[e,m]),l.useEffect(()=>{m&&e&&e.commands&&e.commands.setSearchTerm&&e.commands.setSearchTerm(c)},[m,c,e]),l.useEffect(()=>{m&&e&&e.commands&&e.commands.setReplaceTerm&&e.commands.setReplaceTerm(d)},[m,d,e]),l.useEffect(()=>{if(!e)return;const _=e.extensionManager.extensions.find(A=>A.name===Yn.name);if(!_)return;const S=()=>{if(!m)return;const A=_?_.storage.currentIndex:-1,k=_?_.storage.results:[];a(j=>j!==A?A:j),s(j=>v.deepEqual(j,k)?j:k)};return window.addEventListener(Lt,S),()=>{_&&window.removeEventListener(Lt,S)}},[m,e]),i.jsxs(ee,{open:m,onOpenChange:x,children:[i.jsx(te,{disabled:t==null?void 0:t.disabled,asChild:!0,children:i.jsx(y,{tooltip:t==null?void 0:t.tooltip,isActive:t==null?void 0:t.isActive,disabled:t==null?void 0:t.disabled,children:i.jsx($,{name:t==null?void 0:t.icon})})}),i.jsxs(Y,{hideWhenDetached:!0,className:"richtext-w-full",align:"start",side:"bottom",children:[i.jsxs("div",{className:"richtext-mb-[6px] richtext-flex richtext-items-center richtext-justify-between",children:[i.jsx(X,{children:n("editor.search.dialog.text")}),i.jsx("span",{className:"richtext-font-semibold",children:o.length?`${r+1}/${o.length}`:"0/0"})]}),i.jsxs("div",{className:"richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5 richtext-mb-[10px]",children:[i.jsx(Z,{type:"text",required:!0,className:"richtext-w-full",placeholder:"Text",autoFocus:!0,value:c,onChange:_=>h(_.target.value)}),i.jsx(F,{disabled:!o.length,className:"richtext-flex-1",onClick:e.commands.goToPrevSearchResult,children:i.jsx($,{name:"ChevronUp"})}),i.jsx(F,{disabled:!o.length,className:"richtext-flex-1",onClick:e.commands.goToNextSearchResult,children:i.jsx($,{name:"ChevronDown"})})]}),i.jsx(X,{className:"richtext-mb-[6px]",children:n("editor.replace.dialog.text")}),i.jsx("div",{className:"richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5 richtext-mb-[5px]",children:i.jsx("div",{className:"richtext-relative richtext-items-center richtext-w-full richtext-max-w-sm",children:i.jsx(Z,{type:"text",required:!0,className:"richtext-w-80",placeholder:"Text",value:d,onChange:_=>u(_.target.value)})})}),i.jsxs("div",{className:"richtext-flex richtext-items-center richtext-space-x-2 richtext-mb-[10px]",children:[i.jsx(zt,{checked:g,onCheckedChange:_=>{w(_),e.commands.setCaseSensitive(_)}}),i.jsx(X,{children:n("editor.replace.caseSensitive")})]}),i.jsxs("div",{className:"richtext-flex richtext-items-center richtext-gap-[10px]",children:[i.jsx(F,{disabled:!o.length,className:"richtext-flex-1",onClick:e.commands.replace,children:n("editor.replace.dialog.text")}),i.jsx(F,{disabled:!o.length,className:"richtext-flex-1",onClick:e.commands.replaceAll,children:n("editor.replaceAll.dialog.text")})]})]})]})}const Fe=(e,t)=>t(e.tr);function Cs(e,t,n){return RegExp(t?e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"):e,n?"gu":"gui")}function Ns(e,t,n){const r=[];let a=[];const o=[];let s=0;if(!t)return{decorationsToReturn:[],results:[]};e==null||e.descendants((c,h)=>{c.isText?a[s]?a[s]={text:a[s].text+c.text,pos:a[s].pos}:a[s]={text:`${c.text}`,pos:h}:s+=1}),a=a.filter(Boolean);for(let c=0;c<a.length;c+=1){const{text:h,pos:d}=a[c],u=[...h.matchAll(t)];for(let m=0;m<u.length;m+=1){const x=u[m];if(x[0]==="")break;x.index!==void 0&&o.push({from:d+x.index,to:d+x.index+x[0].length})}}for(let c=0;c<o.length;c+=1){const h=o[c];r.push(v.Decoration.inline(h.from,h.to,{class:n}))}return{decorationsToReturn:r,results:o}}function un(e,t,{state:n,dispatch:r}){if(!t[0])return;const{from:o,to:s}=t[0];r&&r(n.tr.insertText(e,o,s))}function Ss(e,t,n,r){const a=t+1;if(!r[a])return null;const{from:o,to:s}=r[t],c=s-o-e.length+n,{from:h,to:d}=r[a];return r[a]={to:d-c,from:h-c},[c,r]}function Ts(e,t,{tr:n,dispatch:r}){let a=0,o=t.slice();if(!o.length)return!1;for(let s=0;s<o.length;s+=1){const{from:c,to:h}=o[s];n.insertText(e,c,h);const d=Ss(e,s,a,o);d&&(a=d[0],o=d[1])}return r(n),!0}function mn({view:e,tr:t,searchResults:n,searchResultCurrentClass:r,gotoIndex:a}){const o=n[a];if(o){const s=t.setMeta("directDecoration",{fromPos:o.from,toPos:o.to,attrs:{class:r}});return e==null||e.dispatch(s),setTimeout(()=>{const c=window.document.querySelector(`.${r}`);c&&It(c,{behavior:"smooth",scrollMode:"if-needed"})},0),!0}return!1}const Lt="ON_SEARCH_RESULTS",Se=new CustomEvent(Lt),Yn=f.Extension.create({name:"search",addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),searchTerm:"",replaceTerm:"",results:[],currentIndex:0,searchResultClass:"search-result",searchResultCurrentClass:"search-result-current",caseSensitive:!1,disableRegex:!1,onChange:()=>{},button:({editor:t,t:n})=>({component:ks,componentProps:{action:()=>{},icon:"SearchAndReplace",tooltip:n("editor.searchAndReplace.tooltip"),isActive:()=>!1,disabled:!1,editor:t}})}},addStorage(){return{results:[],currentIndex:-1}},addCommands(){return{setSearchTerm:e=>({state:t,dispatch:n})=>(this.options.searchTerm=e,this.storage.results=[],this.storage.currentIndex=0,window.dispatchEvent(Se),Fe(t,n),!1),setReplaceTerm:e=>({state:t,dispatch:n})=>(this.options.replaceTerm=e,Fe(t,n),!1),setCaseSensitive:e=>({state:t,dispatch:n})=>(this.options.caseSensitive=e,Fe(t,n),!1),replace:()=>({state:e,dispatch:t})=>{const{replaceTerm:n}=this.options,{currentIndex:r,results:a}=this.storage,o=a[r];return o?(un(n,[o],{state:e,dispatch:t}),this.storage.results.splice(r,1)):(un(n,a,{state:e,dispatch:t}),this.storage.results.shift()),window.dispatchEvent(Se),Fe(e,t),!1},replaceAll:()=>({state:e,tr:t,dispatch:n})=>{const{replaceTerm:r}=this.options,{results:a}=this.storage;return Ts(r,a,{tr:t,dispatch:n}),this.storage.currentIndex=-1,this.storage.results=[],window.dispatchEvent(Se),Fe(e,n),!1},goToPrevSearchResult:()=>({view:e,tr:t})=>{const{searchResultCurrentClass:n}=this.options,{currentIndex:r,results:a}=this.storage,o=(r+a.length-1)%a.length;return this.storage.currentIndex=o,window.dispatchEvent(Se),mn({view:e,tr:t,searchResults:a,searchResultCurrentClass:n,gotoIndex:o})},goToNextSearchResult:()=>({view:e,tr:t})=>{const{searchResultCurrentClass:n}=this.options,{currentIndex:r,results:a}=this.storage,o=(r+1)%a.length;return this.storage.currentIndex=o,this.options.onChange&&this.options.onChange(),window.dispatchEvent(Se),mn({view:e,tr:t,searchResults:a,searchResultCurrentClass:n,gotoIndex:o})}}},addProseMirrorPlugins(){const e=this;return[new v.Plugin({key:new v.PluginKey("search"),state:{init(){return v.DecorationSet.empty},apply(t){const{doc:n,docChanged:r}=t,{searchTerm:a,searchResultClass:o,searchResultCurrentClass:s,disableRegex:c,caseSensitive:h}=e.options;if(r||a){const{decorationsToReturn:d,results:u}=Ns(n,Cs(a,c,h),o);if(e.storage.results=u,e.storage.currentIndex>u.length-1&&(e.storage.currentIndex=0),window.dispatchEvent(Se),t.getMeta("directDecoration")){const{fromPos:m,toPos:x,attrs:g}=t.getMeta("directDecoration");d.push(v.Decoration.inline(m,x,g))}else u.length&&(d[0]=v.Decoration.inline(u[0].from,u[0].to,{class:s}));return v.DecorationSet.create(n,d)}return v.DecorationSet.empty}},props:{decorations(t){return this.getState(t)}}})]}}),He={100:"💯",1234:"🔢",grinning:"😀",smiley:"😃",smile:"😄",grin:"😁",laughing:"😆",satisfied:"😆",sweat_smile:"😅",rofl:"🤣",joy:"😂",slightly_smiling_face:"🙂",upside_down_face:"🙃",wink:"😉",blush:"😊",innocent:"😇",smiling_face_with_three_hearts:"🥰",heart_eyes:"😍",star_struck:"🤩",kissing_heart:"😘",kissing:"😗",relaxed:"☺️",kissing_closed_eyes:"😚",kissing_smiling_eyes:"😙",smiling_face_with_tear:"🥲",yum:"😋",stuck_out_tongue:"😛",stuck_out_tongue_winking_eye:"😜",zany_face:"🤪",stuck_out_tongue_closed_eyes:"😝",money_mouth_face:"🤑",hugs:"🤗",hand_over_mouth:"🤭",shushing_face:"🤫",thinking:"🤔",zipper_mouth_face:"🤐",raised_eyebrow:"🤨",neutral_face:"😐",expressionless:"😑",no_mouth:"😶",smirk:"😏",unamused:"😒",roll_eyes:"🙄",grimacing:"😬",lying_face:"🤥",relieved:"😌",pensive:"😔",sleepy:"😪",drooling_face:"🤤",sleeping:"😴",mask:"😷",face_with_thermometer:"🤒",face_with_head_bandage:"🤕",nauseated_face:"🤢",vomiting_face:"🤮",sneezing_face:"🤧",hot_face:"🥵",cold_face:"🥶",woozy_face:"🥴",dizzy_face:"😵",exploding_head:"🤯",cowboy_hat_face:"🤠",partying_face:"🥳",disguised_face:"🥸",sunglasses:"😎",nerd_face:"🤓",monocle_face:"🧐",confused:"😕",worried:"😟",slightly_frowning_face:"🙁",frowning_face:"☹️",open_mouth:"😮",hushed:"😯",astonished:"😲",flushed:"😳",pleading_face:"🥺",frowning:"😦",anguished:"😧",fearful:"😨",cold_sweat:"😰",disappointed_relieved:"😥",cry:"😢",sob:"😭",scream:"😱",confounded:"😖",persevere:"😣",disappointed:"😞",sweat:"😓",weary:"😩",tired_face:"😫",yawning_face:"🥱",triumph:"😤",rage:"😡",pout:"😡",angry:"😠",cursing_face:"🤬",smiling_imp:"😈",imp:"👿",skull:"💀",skull_and_crossbones:"☠️",hankey:"💩",poop:"💩",shit:"💩",clown_face:"🤡",japanese_ogre:"👹",japanese_goblin:"👺",ghost:"👻",alien:"👽",space_invader:"👾",robot:"🤖",smiley_cat:"😺",smile_cat:"😸",joy_cat:"😹",heart_eyes_cat:"😻",smirk_cat:"😼",kissing_cat:"😽",scream_cat:"🙀",crying_cat_face:"😿",pouting_cat:"😾",see_no_evil:"🙈",hear_no_evil:"🙉",speak_no_evil:"🙊",kiss:"💋",love_letter:"💌",cupid:"💘",gift_heart:"💝",sparkling_heart:"💖",heartpulse:"💗",heartbeat:"💓",revolving_hearts:"💞",two_hearts:"💕",heart_decoration:"💟",heavy_heart_exclamation:"❣️",broken_heart:"💔",heart:"❤️",orange_heart:"🧡",yellow_heart:"💛",green_heart:"💚",blue_heart:"💙",purple_heart:"💜",brown_heart:"🤎",black_heart:"🖤",white_heart:"🤍",anger:"💢",boom:"💥",collision:"💥",dizzy:"💫",sweat_drops:"💦",dash:"💨",hole:"🕳️",bomb:"💣",speech_balloon:"💬",eye_speech_bubble:"👁️‍🗨️",left_speech_bubble:"🗨️",right_anger_bubble:"🗯️",thought_balloon:"💭",zzz:"💤",wave:"👋",raised_back_of_hand:"🤚",raised_hand_with_fingers_splayed:"🖐️",hand:"✋",raised_hand:"✋",vulcan_salute:"🖖",ok_hand:"👌",pinched_fingers:"🤌",pinching_hand:"🤏",v:"✌️",crossed_fingers:"🤞",love_you_gesture:"🤟",metal:"🤘",call_me_hand:"🤙",point_left:"👈",point_right:"👉",point_up_2:"👆",middle_finger:"🖕",fu:"🖕",point_down:"👇",point_up:"☝️","+1":"👍",thumbsup:"👍","-1":"👎",thumbsdown:"👎",fist_raised:"✊",fist:"✊",fist_oncoming:"👊",facepunch:"👊",punch:"👊",fist_left:"🤛",fist_right:"🤜",clap:"👏",raised_hands:"🙌",open_hands:"👐",palms_up_together:"🤲",handshake:"🤝",pray:"🙏",writing_hand:"✍️",nail_care:"💅",selfie:"🤳",muscle:"💪",mechanical_arm:"🦾",mechanical_leg:"🦿",leg:"🦵",foot:"🦶",ear:"👂",ear_with_hearing_aid:"🦻",nose:"👃",brain:"🧠",anatomical_heart:"🫀",lungs:"🫁",tooth:"🦷",bone:"🦴",eyes:"👀",eye:"👁️",tongue:"👅",lips:"👄",baby:"👶",child:"🧒",boy:"👦",girl:"👧",adult:"🧑",blond_haired_person:"👱",man:"👨",bearded_person:"🧔",red_haired_man:"👨‍🦰",curly_haired_man:"👨‍🦱",white_haired_man:"👨‍🦳",bald_man:"👨‍🦲",woman:"👩",red_haired_woman:"👩‍🦰",person_red_hair:"🧑‍🦰",curly_haired_woman:"👩‍🦱",person_curly_hair:"🧑‍🦱",white_haired_woman:"👩‍🦳",person_white_hair:"🧑‍🦳",bald_woman:"👩‍🦲",person_bald:"🧑‍🦲",blond_haired_woman:"👱‍♀️",blonde_woman:"👱‍♀️",blond_haired_man:"👱‍♂️",older_adult:"🧓",older_man:"👴",older_woman:"👵",frowning_person:"🙍",frowning_man:"🙍‍♂️",frowning_woman:"🙍‍♀️",pouting_face:"🙎",pouting_man:"🙎‍♂️",pouting_woman:"🙎‍♀️",no_good:"🙅",no_good_man:"🙅‍♂️",ng_man:"🙅‍♂️",no_good_woman:"🙅‍♀️",ng_woman:"🙅‍♀️",ok_person:"🙆",ok_man:"🙆‍♂️",ok_woman:"🙆‍♀️",tipping_hand_person:"💁",information_desk_person:"💁",tipping_hand_man:"💁‍♂️",sassy_man:"💁‍♂️",tipping_hand_woman:"💁‍♀️",sassy_woman:"💁‍♀️",raising_hand:"🙋",raising_hand_man:"🙋‍♂️",raising_hand_woman:"🙋‍♀️",deaf_person:"🧏",deaf_man:"🧏‍♂️",deaf_woman:"🧏‍♀️",bow:"🙇",bowing_man:"🙇‍♂️",bowing_woman:"🙇‍♀️",facepalm:"🤦",man_facepalming:"🤦‍♂️",woman_facepalming:"🤦‍♀️",shrug:"🤷",man_shrugging:"🤷‍♂️",woman_shrugging:"🤷‍♀️",health_worker:"🧑‍⚕️",man_health_worker:"👨‍⚕️",woman_health_worker:"👩‍⚕️",student:"🧑‍🎓",man_student:"👨‍🎓",woman_student:"👩‍🎓",teacher:"🧑‍🏫",man_teacher:"👨‍🏫",woman_teacher:"👩‍🏫",judge:"🧑‍⚖️",man_judge:"👨‍⚖️",woman_judge:"👩‍⚖️",farmer:"🧑‍🌾",man_farmer:"👨‍🌾",woman_farmer:"👩‍🌾",cook:"🧑‍🍳",man_cook:"👨‍🍳",woman_cook:"👩‍🍳",mechanic:"🧑‍🔧",man_mechanic:"👨‍🔧",woman_mechanic:"👩‍🔧",factory_worker:"🧑‍🏭",man_factory_worker:"👨‍🏭",woman_factory_worker:"👩‍🏭",office_worker:"🧑‍💼",man_office_worker:"👨‍💼",woman_office_worker:"👩‍💼",scientist:"🧑‍🔬",man_scientist:"👨‍🔬",woman_scientist:"👩‍🔬",technologist:"🧑‍💻",man_technologist:"👨‍💻",woman_technologist:"👩‍💻",singer:"🧑‍🎤",man_singer:"👨‍🎤",woman_singer:"👩‍🎤",artist:"🧑‍🎨",man_artist:"👨‍🎨",woman_artist:"👩‍🎨",pilot:"🧑‍✈️",man_pilot:"👨‍✈️",woman_pilot:"👩‍✈️",astronaut:"🧑‍🚀",man_astronaut:"👨‍🚀",woman_astronaut:"👩‍🚀",firefighter:"🧑‍🚒",man_firefighter:"👨‍🚒",woman_firefighter:"👩‍🚒",police_officer:"👮",cop:"👮",policeman:"👮‍♂️",policewoman:"👮‍♀️",detective:"🕵️",male_detective:"🕵️‍♂️",female_detective:"🕵️‍♀️",guard:"💂",guardsman:"💂‍♂️",guardswoman:"💂‍♀️",ninja:"🥷",construction_worker:"👷",construction_worker_man:"👷‍♂️",construction_worker_woman:"👷‍♀️",prince:"🤴",princess:"👸",person_with_turban:"👳",man_with_turban:"👳‍♂️",woman_with_turban:"👳‍♀️",man_with_gua_pi_mao:"👲",woman_with_headscarf:"🧕",person_in_tuxedo:"🤵",man_in_tuxedo:"🤵‍♂️",woman_in_tuxedo:"🤵‍♀️",person_with_veil:"👰",man_with_veil:"👰‍♂️",woman_with_veil:"👰‍♀️",bride_with_veil:"👰‍♀️",pregnant_woman:"🤰",breast_feeding:"🤱",woman_feeding_baby:"👩‍🍼",man_feeding_baby:"👨‍🍼",person_feeding_baby:"🧑‍🍼",angel:"👼",santa:"🎅",mrs_claus:"🤶",mx_claus:"🧑‍🎄",superhero:"🦸",superhero_man:"🦸‍♂️",superhero_woman:"🦸‍♀️",supervillain:"🦹",supervillain_man:"🦹‍♂️",supervillain_woman:"🦹‍♀️",mage:"🧙",mage_man:"🧙‍♂️",mage_woman:"🧙‍♀️",fairy:"🧚",fairy_man:"🧚‍♂️",fairy_woman:"🧚‍♀️",vampire:"🧛",vampire_man:"🧛‍♂️",vampire_woman:"🧛‍♀️",merperson:"🧜",merman:"🧜‍♂️",mermaid:"🧜‍♀️",elf:"🧝",elf_man:"🧝‍♂️",elf_woman:"🧝‍♀️",genie:"🧞",genie_man:"🧞‍♂️",genie_woman:"🧞‍♀️",zombie:"🧟",zombie_man:"🧟‍♂️",zombie_woman:"🧟‍♀️",massage:"💆",massage_man:"💆‍♂️",massage_woman:"💆‍♀️",haircut:"💇",haircut_man:"💇‍♂️",haircut_woman:"💇‍♀️",walking:"🚶",walking_man:"🚶‍♂️",walking_woman:"🚶‍♀️",standing_person:"🧍",standing_man:"🧍‍♂️",standing_woman:"🧍‍♀️",kneeling_person:"🧎",kneeling_man:"🧎‍♂️",kneeling_woman:"🧎‍♀️",person_with_probing_cane:"🧑‍🦯",man_with_probing_cane:"👨‍🦯",woman_with_probing_cane:"👩‍🦯",person_in_motorized_wheelchair:"🧑‍🦼",man_in_motorized_wheelchair:"👨‍🦼",woman_in_motorized_wheelchair:"👩‍🦼",person_in_manual_wheelchair:"🧑‍🦽",man_in_manual_wheelchair:"👨‍🦽",woman_in_manual_wheelchair:"👩‍🦽",runner:"🏃",running:"🏃",running_man:"🏃‍♂️",running_woman:"🏃‍♀️",woman_dancing:"💃",dancer:"💃",man_dancing:"🕺",business_suit_levitating:"🕴️",dancers:"👯",dancing_men:"👯‍♂️",dancing_women:"👯‍♀️",sauna_person:"🧖",sauna_man:"🧖‍♂️",sauna_woman:"🧖‍♀️",climbing:"🧗",climbing_man:"🧗‍♂️",climbing_woman:"🧗‍♀️",person_fencing:"🤺",horse_racing:"🏇",skier:"⛷️",snowboarder:"🏂",golfing:"🏌️",golfing_man:"🏌️‍♂️",golfing_woman:"🏌️‍♀️",surfer:"🏄",surfing_man:"🏄‍♂️",surfing_woman:"🏄‍♀️",rowboat:"🚣",rowing_man:"🚣‍♂️",rowing_woman:"🚣‍♀️",swimmer:"🏊",swimming_man:"🏊‍♂️",swimming_woman:"🏊‍♀️",bouncing_ball_person:"⛹️",bouncing_ball_man:"⛹️‍♂️",basketball_man:"⛹️‍♂️",bouncing_ball_woman:"⛹️‍♀️",basketball_woman:"⛹️‍♀️",weight_lifting:"🏋️",weight_lifting_man:"🏋️‍♂️",weight_lifting_woman:"🏋️‍♀️",bicyclist:"🚴",biking_man:"🚴‍♂️",biking_woman:"🚴‍♀️",mountain_bicyclist:"🚵",mountain_biking_man:"🚵‍♂️",mountain_biking_woman:"🚵‍♀️",cartwheeling:"🤸",man_cartwheeling:"🤸‍♂️",woman_cartwheeling:"🤸‍♀️",wrestling:"🤼",men_wrestling:"🤼‍♂️",women_wrestling:"🤼‍♀️",water_polo:"🤽",man_playing_water_polo:"🤽‍♂️",woman_playing_water_polo:"🤽‍♀️",handball_person:"🤾",man_playing_handball:"🤾‍♂️",woman_playing_handball:"🤾‍♀️",juggling_person:"🤹",man_juggling:"🤹‍♂️",woman_juggling:"🤹‍♀️",lotus_position:"🧘",lotus_position_man:"🧘‍♂️",lotus_position_woman:"🧘‍♀️",bath:"🛀",sleeping_bed:"🛌",people_holding_hands:"🧑‍🤝‍🧑",two_women_holding_hands:"👭",couple:"👫",two_men_holding_hands:"👬",couplekiss:"💏",couplekiss_man_woman:"👩‍❤️‍💋‍👨",couplekiss_man_man:"👨‍❤️‍💋‍👨",couplekiss_woman_woman:"👩‍❤️‍💋‍👩",couple_with_heart:"💑",couple_with_heart_woman_man:"👩‍❤️‍👨",couple_with_heart_man_man:"👨‍❤️‍👨",couple_with_heart_woman_woman:"👩‍❤️‍👩",family:"👪",family_man_woman_boy:"👨‍👩‍👦",family_man_woman_girl:"👨‍👩‍👧",family_man_woman_girl_boy:"👨‍👩‍👧‍👦",family_man_woman_boy_boy:"👨‍👩‍👦‍👦",family_man_woman_girl_girl:"👨‍👩‍👧‍👧",family_man_man_boy:"👨‍👨‍👦",family_man_man_girl:"👨‍👨‍👧",family_man_man_girl_boy:"👨‍👨‍👧‍👦",family_man_man_boy_boy:"👨‍👨‍👦‍👦",family_man_man_girl_girl:"👨‍👨‍👧‍👧",family_woman_woman_boy:"👩‍👩‍👦",family_woman_woman_girl:"👩‍👩‍👧",family_woman_woman_girl_boy:"👩‍👩‍👧‍👦",family_woman_woman_boy_boy:"👩‍👩‍👦‍👦",family_woman_woman_girl_girl:"👩‍👩‍👧‍👧",family_man_boy:"👨‍👦",family_man_boy_boy:"👨‍👦‍👦",family_man_girl:"👨‍👧",family_man_girl_boy:"👨‍👧‍👦",family_man_girl_girl:"👨‍👧‍👧",family_woman_boy:"👩‍👦",family_woman_boy_boy:"👩‍👦‍👦",family_woman_girl:"👩‍👧",family_woman_girl_boy:"👩‍👧‍👦",family_woman_girl_girl:"👩‍👧‍👧",speaking_head:"🗣️",bust_in_silhouette:"👤",busts_in_silhouette:"👥",people_hugging:"🫂",footprints:"👣",monkey_face:"🐵",monkey:"🐒",gorilla:"🦍",orangutan:"🦧",dog:"🐶",dog2:"🐕",guide_dog:"🦮",service_dog:"🐕‍🦺",poodle:"🐩",wolf:"🐺",fox_face:"🦊",raccoon:"🦝",cat:"🐱",cat2:"🐈",black_cat:"🐈‍⬛",lion:"🦁",tiger:"🐯",tiger2:"🐅",leopard:"🐆",horse:"🐴",racehorse:"🐎",unicorn:"🦄",zebra:"🦓",deer:"🦌",bison:"🦬",cow:"🐮",ox:"🐂",water_buffalo:"🐃",cow2:"🐄",pig:"🐷",pig2:"🐖",boar:"🐗",pig_nose:"🐽",ram:"🐏",sheep:"🐑",goat:"🐐",dromedary_camel:"🐪",camel:"🐫",llama:"🦙",giraffe:"🦒",elephant:"🐘",mammoth:"🦣",rhinoceros:"🦏",hippopotamus:"🦛",mouse:"🐭",mouse2:"🐁",rat:"🐀",hamster:"🐹",rabbit:"🐰",rabbit2:"🐇",chipmunk:"🐿️",beaver:"🦫",hedgehog:"🦔",bat:"🦇",bear:"🐻",polar_bear:"🐻‍❄️",koala:"🐨",panda_face:"🐼",sloth:"🦥",otter:"🦦",skunk:"🦨",kangaroo:"🦘",badger:"🦡",feet:"🐾",paw_prints:"🐾",turkey:"🦃",chicken:"🐔",rooster:"🐓",hatching_chick:"🐣",baby_chick:"🐤",hatched_chick:"🐥",bird:"🐦",penguin:"🐧",dove:"🕊️",eagle:"🦅",duck:"🦆",swan:"🦢",owl:"🦉",dodo:"🦤",feather:"🪶",flamingo:"🦩",peacock:"🦚",parrot:"🦜",frog:"🐸",crocodile:"🐊",turtle:"🐢",lizard:"🦎",snake:"🐍",dragon_face:"🐲",dragon:"🐉",sauropod:"🦕","t-rex":"🦖",whale:"🐳",whale2:"🐋",dolphin:"🐬",flipper:"🐬",seal:"🦭",fish:"🐟",tropical_fish:"🐠",blowfish:"🐡",shark:"🦈",octopus:"🐙",shell:"🐚",snail:"🐌",butterfly:"🦋",bug:"🐛",ant:"🐜",bee:"🐝",honeybee:"🐝",beetle:"🪲",lady_beetle:"🐞",cricket:"🦗",cockroach:"🪳",spider:"🕷️",spider_web:"🕸️",scorpion:"🦂",mosquito:"🦟",fly:"🪰",worm:"🪱",microbe:"🦠",bouquet:"💐",cherry_blossom:"🌸",white_flower:"💮",rosette:"🏵️",rose:"🌹",wilted_flower:"🥀",hibiscus:"🌺",sunflower:"🌻",blossom:"🌼",tulip:"🌷",seedling:"🌱",potted_plant:"🪴",evergreen_tree:"🌲",deciduous_tree:"🌳",palm_tree:"🌴",cactus:"🌵",ear_of_rice:"🌾",herb:"🌿",shamrock:"☘️",four_leaf_clover:"🍀",maple_leaf:"🍁",fallen_leaf:"🍂",leaves:"🍃",grapes:"🍇",melon:"🍈",watermelon:"🍉",tangerine:"🍊",orange:"🍊",mandarin:"🍊",lemon:"🍋",banana:"🍌",pineapple:"🍍",mango:"🥭",apple:"🍎",green_apple:"🍏",pear:"🍐",peach:"🍑",cherries:"🍒",strawberry:"🍓",blueberries:"🫐",kiwi_fruit:"🥝",tomato:"🍅",olive:"🫒",coconut:"🥥",avocado:"🥑",eggplant:"🍆",potato:"🥔",carrot:"🥕",corn:"🌽",hot_pepper:"🌶️",bell_pepper:"🫑",cucumber:"🥒",leafy_green:"🥬",broccoli:"🥦",garlic:"🧄",onion:"🧅",mushroom:"🍄",peanuts:"🥜",chestnut:"🌰",bread:"🍞",croissant:"🥐",baguette_bread:"🥖",flatbread:"🫓",pretzel:"🥨",bagel:"🥯",pancakes:"🥞",waffle:"🧇",cheese:"🧀",meat_on_bone:"🍖",poultry_leg:"🍗",cut_of_meat:"🥩",bacon:"🥓",hamburger:"🍔",fries:"🍟",pizza:"🍕",hotdog:"🌭",sandwich:"🥪",taco:"🌮",burrito:"🌯",tamale:"🫔",stuffed_flatbread:"🥙",falafel:"🧆",egg:"🥚",fried_egg:"🍳",shallow_pan_of_food:"🥘",stew:"🍲",fondue:"🫕",bowl_with_spoon:"🥣",green_salad:"🥗",popcorn:"🍿",butter:"🧈",salt:"🧂",canned_food:"🥫",bento:"🍱",rice_cracker:"🍘",rice_ball:"🍙",rice:"🍚",curry:"🍛",ramen:"🍜",spaghetti:"🍝",sweet_potato:"🍠",oden:"🍢",sushi:"🍣",fried_shrimp:"🍤",fish_cake:"🍥",moon_cake:"🥮",dango:"🍡",dumpling:"🥟",fortune_cookie:"🥠",takeout_box:"🥡",crab:"🦀",lobster:"🦞",shrimp:"🦐",squid:"🦑",oyster:"🦪",icecream:"🍦",shaved_ice:"🍧",ice_cream:"🍨",doughnut:"🍩",cookie:"🍪",birthday:"🎂",cake:"🍰",cupcake:"🧁",pie:"🥧",chocolate_bar:"🍫",candy:"🍬",lollipop:"🍭",custard:"🍮",honey_pot:"🍯",baby_bottle:"🍼",milk_glass:"🥛",coffee:"☕",teapot:"🫖",tea:"🍵",sake:"🍶",champagne:"🍾",wine_glass:"🍷",cocktail:"🍸",tropical_drink:"🍹",beer:"🍺",beers:"🍻",clinking_glasses:"🥂",tumbler_glass:"🥃",cup_with_straw:"🥤",bubble_tea:"🧋",beverage_box:"🧃",mate:"🧉",ice_cube:"🧊",chopsticks:"🥢",plate_with_cutlery:"🍽️",fork_and_knife:"🍴",spoon:"🥄",hocho:"🔪",knife:"🔪",amphora:"🏺",earth_africa:"🌍",earth_americas:"🌎",earth_asia:"🌏",globe_with_meridians:"🌐",world_map:"🗺️",japan:"🗾",compass:"🧭",mountain_snow:"🏔️",mountain:"⛰️",volcano:"🌋",mount_fuji:"🗻",camping:"🏕️",beach_umbrella:"🏖️",desert:"🏜️",desert_island:"🏝️",national_park:"🏞️",stadium:"🏟️",classical_building:"🏛️",building_construction:"🏗️",bricks:"🧱",rock:"🪨",wood:"🪵",hut:"🛖",houses:"🏘️",derelict_house:"🏚️",house:"🏠",house_with_garden:"🏡",office:"🏢",post_office:"🏣",european_post_office:"🏤",hospital:"🏥",bank:"🏦",hotel:"🏨",love_hotel:"🏩",convenience_store:"🏪",school:"🏫",department_store:"🏬",factory:"🏭",japanese_castle:"🏯",european_castle:"🏰",wedding:"💒",tokyo_tower:"🗼",statue_of_liberty:"🗽",church:"⛪",mosque:"🕌",hindu_temple:"🛕",synagogue:"🕍",shinto_shrine:"⛩️",kaaba:"🕋",fountain:"⛲",tent:"⛺",foggy:"🌁",night_with_stars:"🌃",cityscape:"🏙️",sunrise_over_mountains:"🌄",sunrise:"🌅",city_sunset:"🌆",city_sunrise:"🌇",bridge_at_night:"🌉",hotsprings:"♨️",carousel_horse:"🎠",ferris_wheel:"🎡",roller_coaster:"🎢",barber:"💈",circus_tent:"🎪",steam_locomotive:"🚂",railway_car:"🚃",bullettrain_side:"🚄",bullettrain_front:"🚅",train2:"🚆",metro:"🚇",light_rail:"🚈",station:"🚉",tram:"🚊",monorail:"🚝",mountain_railway:"🚞",train:"🚋",bus:"🚌",oncoming_bus:"🚍",trolleybus:"🚎",minibus:"🚐",ambulance:"🚑",fire_engine:"🚒",police_car:"🚓",oncoming_police_car:"🚔",taxi:"🚕",oncoming_taxi:"🚖",car:"🚗",red_car:"🚗",oncoming_automobile:"🚘",blue_car:"🚙",pickup_truck:"🛻",truck:"🚚",articulated_lorry:"🚛",tractor:"🚜",racing_car:"🏎️",motorcycle:"🏍️",motor_scooter:"🛵",manual_wheelchair:"🦽",motorized_wheelchair:"🦼",auto_rickshaw:"🛺",bike:"🚲",kick_scooter:"🛴",skateboard:"🛹",roller_skate:"🛼",busstop:"🚏",motorway:"🛣️",railway_track:"🛤️",oil_drum:"🛢️",fuelpump:"⛽",rotating_light:"🚨",traffic_light:"🚥",vertical_traffic_light:"🚦",stop_sign:"🛑",construction:"🚧",anchor:"⚓",boat:"⛵",sailboat:"⛵",canoe:"🛶",speedboat:"🚤",passenger_ship:"🛳️",ferry:"⛴️",motor_boat:"🛥️",ship:"🚢",airplane:"✈️",small_airplane:"🛩️",flight_departure:"🛫",flight_arrival:"🛬",parachute:"🪂",seat:"💺",helicopter:"🚁",suspension_railway:"🚟",mountain_cableway:"🚠",aerial_tramway:"🚡",artificial_satellite:"🛰️",rocket:"🚀",flying_saucer:"🛸",bellhop_bell:"🛎️",luggage:"🧳",hourglass:"⌛",hourglass_flowing_sand:"⏳",watch:"⌚",alarm_clock:"⏰",stopwatch:"⏱️",timer_clock:"⏲️",mantelpiece_clock:"🕰️",clock12:"🕛",clock1230:"🕧",clock1:"🕐",clock130:"🕜",clock2:"🕑",clock230:"🕝",clock3:"🕒",clock330:"🕞",clock4:"🕓",clock430:"🕟",clock5:"🕔",clock530:"🕠",clock6:"🕕",clock630:"🕡",clock7:"🕖",clock730:"🕢",clock8:"🕗",clock830:"🕣",clock9:"🕘",clock930:"🕤",clock10:"🕙",clock1030:"🕥",clock11:"🕚",clock1130:"🕦",new_moon:"🌑",waxing_crescent_moon:"🌒",first_quarter_moon:"🌓",moon:"🌔",waxing_gibbous_moon:"🌔",full_moon:"🌕",waning_gibbous_moon:"🌖",last_quarter_moon:"🌗",waning_crescent_moon:"🌘",crescent_moon:"🌙",new_moon_with_face:"🌚",first_quarter_moon_with_face:"🌛",last_quarter_moon_with_face:"🌜",thermometer:"🌡️",sunny:"☀️",full_moon_with_face:"🌝",sun_with_face:"🌞",ringed_planet:"🪐",star:"⭐",star2:"🌟",stars:"🌠",milky_way:"🌌",cloud:"☁️",partly_sunny:"⛅",cloud_with_lightning_and_rain:"⛈️",sun_behind_small_cloud:"🌤️",sun_behind_large_cloud:"🌥️",sun_behind_rain_cloud:"🌦️",cloud_with_rain:"🌧️",cloud_with_snow:"🌨️",cloud_with_lightning:"🌩️",tornado:"🌪️",fog:"🌫️",wind_face:"🌬️",cyclone:"🌀",rainbow:"🌈",closed_umbrella:"🌂",open_umbrella:"☂️",umbrella:"☔",parasol_on_ground:"⛱️",zap:"⚡",snowflake:"❄️",snowman_with_snow:"☃️",snowman:"⛄",comet:"☄️",fire:"🔥",droplet:"💧",ocean:"🌊",jack_o_lantern:"🎃",christmas_tree:"🎄",fireworks:"🎆",sparkler:"🎇",firecracker:"🧨",sparkles:"✨",balloon:"🎈",tada:"🎉",confetti_ball:"🎊",tanabata_tree:"🎋",bamboo:"🎍",dolls:"🎎",flags:"🎏",wind_chime:"🎐",rice_scene:"🎑",red_envelope:"🧧",ribbon:"🎀",gift:"🎁",reminder_ribbon:"🎗️",tickets:"🎟️",ticket:"🎫",medal_military:"🎖️",trophy:"🏆",medal_sports:"🏅","1st_place_medal":"🥇","2nd_place_medal":"🥈","3rd_place_medal":"🥉",soccer:"⚽",baseball:"⚾",softball:"🥎",basketball:"🏀",volleyball:"🏐",football:"🏈",rugby_football:"🏉",tennis:"🎾",flying_disc:"🥏",bowling:"🎳",cricket_game:"🏏",field_hockey:"🏑",ice_hockey:"🏒",lacrosse:"🥍",ping_pong:"🏓",badminton:"🏸",boxing_glove:"🥊",martial_arts_uniform:"🥋",goal_net:"🥅",golf:"⛳",ice_skate:"⛸️",fishing_pole_and_fish:"🎣",diving_mask:"🤿",running_shirt_with_sash:"🎽",ski:"🎿",sled:"🛷",curling_stone:"🥌",dart:"🎯",yo_yo:"🪀",kite:"🪁","8ball":"🎱",crystal_ball:"🔮",magic_wand:"🪄",nazar_amulet:"🧿",video_game:"🎮",joystick:"🕹️",slot_machine:"🎰",game_die:"🎲",jigsaw:"🧩",teddy_bear:"🧸",pinata:"🪅",nesting_dolls:"🪆",spades:"♠️",hearts:"♥️",diamonds:"♦️",clubs:"♣️",chess_pawn:"♟️",black_joker:"🃏",mahjong:"🀄",flower_playing_cards:"🎴",performing_arts:"🎭",framed_picture:"🖼️",art:"🎨",thread:"🧵",sewing_needle:"🪡",yarn:"🧶",knot:"🪢",eyeglasses:"👓",dark_sunglasses:"🕶️",goggles:"🥽",lab_coat:"🥼",safety_vest:"🦺",necktie:"👔",shirt:"👕",tshirt:"👕",jeans:"👖",scarf:"🧣",gloves:"🧤",coat:"🧥",socks:"🧦",dress:"👗",kimono:"👘",sari:"🥻",one_piece_swimsuit:"🩱",swim_brief:"🩲",shorts:"🩳",bikini:"👙",womans_clothes:"👚",purse:"👛",handbag:"👜",pouch:"👝",shopping:"🛍️",school_satchel:"🎒",thong_sandal:"🩴",mans_shoe:"👞",shoe:"👞",athletic_shoe:"👟",hiking_boot:"🥾",flat_shoe:"🥿",high_heel:"👠",sandal:"👡",ballet_shoes:"🩰",boot:"👢",crown:"👑",womans_hat:"👒",tophat:"🎩",mortar_board:"🎓",billed_cap:"🧢",military_helmet:"🪖",rescue_worker_helmet:"⛑️",prayer_beads:"📿",lipstick:"💄",ring:"💍",gem:"💎",mute:"🔇",speaker:"🔈",sound:"🔉",loud_sound:"🔊",loudspeaker:"📢",mega:"📣",postal_horn:"📯",bell:"🔔",no_bell:"🔕",musical_score:"🎼",musical_note:"🎵",notes:"🎶",studio_microphone:"🎙️",level_slider:"🎚️",control_knobs:"🎛️",microphone:"🎤",headphones:"🎧",radio:"📻",saxophone:"🎷",accordion:"🪗",guitar:"🎸",musical_keyboard:"🎹",trumpet:"🎺",violin:"🎻",banjo:"🪕",drum:"🥁",long_drum:"🪘",iphone:"📱",calling:"📲",phone:"☎️",telephone:"☎️",telephone_receiver:"📞",pager:"📟",fax:"📠",battery:"🔋",electric_plug:"🔌",computer:"💻",desktop_computer:"🖥️",printer:"🖨️",keyboard:"⌨️",computer_mouse:"🖱️",trackball:"🖲️",minidisc:"💽",floppy_disk:"💾",cd:"💿",dvd:"📀",abacus:"🧮",movie_camera:"🎥",film_strip:"🎞️",film_projector:"📽️",clapper:"🎬",tv:"📺",camera:"📷",camera_flash:"📸",video_camera:"📹",vhs:"📼",mag:"🔍",mag_right:"🔎",candle:"🕯️",bulb:"💡",flashlight:"🔦",izakaya_lantern:"🏮",lantern:"🏮",diya_lamp:"🪔",notebook_with_decorative_cover:"📔",closed_book:"📕",book:"📖",open_book:"📖",green_book:"📗",blue_book:"📘",orange_book:"📙",books:"📚",notebook:"📓",ledger:"📒",page_with_curl:"📃",scroll:"📜",page_facing_up:"📄",newspaper:"📰",newspaper_roll:"🗞️",bookmark_tabs:"📑",bookmark:"🔖",label:"🏷️",moneybag:"💰",coin:"🪙",yen:"💴",dollar:"💵",euro:"💶",pound:"💷",money_with_wings:"💸",credit_card:"💳",receipt:"🧾",chart:"💹",envelope:"✉️",email:"📧","e-mail":"📧",incoming_envelope:"📨",envelope_with_arrow:"📩",outbox_tray:"📤",inbox_tray:"📥",package:"📦",mailbox:"📫",mailbox_closed:"📪",mailbox_with_mail:"📬",mailbox_with_no_mail:"📭",postbox:"📮",ballot_box:"🗳️",pencil2:"✏️",black_nib:"✒️",fountain_pen:"🖋️",pen:"🖊️",paintbrush:"🖌️",crayon:"🖍️",memo:"📝",pencil:"📝",briefcase:"💼",file_folder:"📁",open_file_folder:"📂",card_index_dividers:"🗂️",date:"📅",calendar:"📆",spiral_notepad:"🗒️",spiral_calendar:"🗓️",card_index:"📇",chart_with_upwards_trend:"📈",chart_with_downwards_trend:"📉",bar_chart:"📊",clipboard:"📋",pushpin:"📌",round_pushpin:"📍",paperclip:"📎",paperclips:"🖇️",straight_ruler:"📏",triangular_ruler:"📐",scissors:"✂️",card_file_box:"🗃️",file_cabinet:"🗄️",wastebasket:"🗑️",lock:"🔒",unlock:"🔓",lock_with_ink_pen:"🔏",closed_lock_with_key:"🔐",key:"🔑",old_key:"🗝️",hammer:"🔨",axe:"🪓",pick:"⛏️",hammer_and_pick:"⚒️",hammer_and_wrench:"🛠️",dagger:"🗡️",crossed_swords:"⚔️",gun:"🔫",boomerang:"🪃",bow_and_arrow:"🏹",shield:"🛡️",carpentry_saw:"🪚",wrench:"🔧",screwdriver:"🪛",nut_and_bolt:"🔩",gear:"⚙️",clamp:"🗜️",balance_scale:"⚖️",probing_cane:"🦯",link:"🔗",chains:"⛓️",hook:"🪝",toolbox:"🧰",magnet:"🧲",ladder:"🪜",alembic:"⚗️",test_tube:"🧪",petri_dish:"🧫",dna:"🧬",microscope:"🔬",telescope:"🔭",satellite:"📡",syringe:"💉",drop_of_blood:"🩸",pill:"💊",adhesive_bandage:"🩹",stethoscope:"🩺",door:"🚪",elevator:"🛗",mirror:"🪞",window:"🪟",bed:"🛏️",couch_and_lamp:"🛋️",chair:"🪑",toilet:"🚽",plunger:"🪠",shower:"🚿",bathtub:"🛁",mouse_trap:"🪤",razor:"🪒",lotion_bottle:"🧴",safety_pin:"🧷",broom:"🧹",basket:"🧺",roll_of_paper:"🧻",bucket:"🪣",soap:"🧼",toothbrush:"🪥",sponge:"🧽",fire_extinguisher:"🧯",shopping_cart:"🛒",smoking:"🚬",coffin:"⚰️",headstone:"🪦",funeral_urn:"⚱️",moyai:"🗿",placard:"🪧",atm:"🏧",put_litter_in_its_place:"🚮",potable_water:"🚰",wheelchair:"♿",mens:"🚹",womens:"🚺",restroom:"🚻",baby_symbol:"🚼",wc:"🚾",passport_control:"🛂",customs:"🛃",baggage_claim:"🛄",left_luggage:"🛅",warning:"⚠️",children_crossing:"🚸",no_entry:"⛔",no_entry_sign:"🚫",no_bicycles:"🚳",no_smoking:"🚭",do_not_litter:"🚯","non-potable_water":"🚱",no_pedestrians:"🚷",no_mobile_phones:"📵",underage:"🔞",radioactive:"☢️",biohazard:"☣️",arrow_up:"⬆️",arrow_upper_right:"↗️",arrow_right:"➡️",arrow_lower_right:"↘️",arrow_down:"⬇️",arrow_lower_left:"↙️",arrow_left:"⬅️",arrow_upper_left:"↖️",arrow_up_down:"↕️",left_right_arrow:"↔️",leftwards_arrow_with_hook:"↩️",arrow_right_hook:"↪️",arrow_heading_up:"⤴️",arrow_heading_down:"⤵️",arrows_clockwise:"🔃",arrows_counterclockwise:"🔄",back:"🔙",end:"🔚",on:"🔛",soon:"🔜",top:"🔝",place_of_worship:"🛐",atom_symbol:"⚛️",om:"🕉️",star_of_david:"✡️",wheel_of_dharma:"☸️",yin_yang:"☯️",latin_cross:"✝️",orthodox_cross:"☦️",star_and_crescent:"☪️",peace_symbol:"☮️",menorah:"🕎",six_pointed_star:"🔯",aries:"♈",taurus:"♉",gemini:"♊",cancer:"♋",leo:"♌",virgo:"♍",libra:"♎",scorpius:"♏",sagittarius:"♐",capricorn:"♑",aquarius:"♒",pisces:"♓",ophiuchus:"⛎",twisted_rightwards_arrows:"🔀",repeat:"🔁",repeat_one:"🔂",arrow_forward:"▶️",fast_forward:"⏩",next_track_button:"⏭️",play_or_pause_button:"⏯️",arrow_backward:"◀️",rewind:"⏪",previous_track_button:"⏮️",arrow_up_small:"🔼",arrow_double_up:"⏫",arrow_down_small:"🔽",arrow_double_down:"⏬",pause_button:"⏸️",stop_button:"⏹️",record_button:"⏺️",eject_button:"⏏️",cinema:"🎦",low_brightness:"🔅",high_brightness:"🔆",signal_strength:"📶",vibration_mode:"📳",mobile_phone_off:"📴",female_sign:"♀️",male_sign:"♂️",transgender_symbol:"⚧️",heavy_multiplication_x:"✖️",heavy_plus_sign:"➕",heavy_minus_sign:"➖",heavy_division_sign:"➗",infinity:"♾️",bangbang:"‼️",interrobang:"⁉️",question:"❓",grey_question:"❔",grey_exclamation:"❕",exclamation:"❗",heavy_exclamation_mark:"❗",wavy_dash:"〰️",currency_exchange:"💱",heavy_dollar_sign:"💲",medical_symbol:"⚕️",recycle:"♻️",fleur_de_lis:"⚜️",trident:"🔱",name_badge:"📛",beginner:"🔰",o:"⭕",white_check_mark:"✅",ballot_box_with_check:"☑️",heavy_check_mark:"✔️",x:"❌",negative_squared_cross_mark:"❎",curly_loop:"➰",loop:"➿",part_alternation_mark:"〽️",eight_spoked_asterisk:"✳️",eight_pointed_black_star:"✴️",sparkle:"❇️",copyright:"©️",registered:"®️",tm:"™️",hash:"#️⃣",asterisk:"*️⃣",zero:"0️⃣",one:"1️⃣",two:"2️⃣",three:"3️⃣",four:"4️⃣",five:"5️⃣",six:"6️⃣",seven:"7️⃣",eight:"8️⃣",nine:"9️⃣",keycap_ten:"🔟",capital_abcd:"🔠",abcd:"🔡",symbols:"🔣",abc:"🔤",a:"🅰️",ab:"🆎",b:"🅱️",cl:"🆑",cool:"🆒",free:"🆓",information_source:"ℹ️",id:"🆔",m:"Ⓜ️",new:"🆕",ng:"🆖",o2:"🅾️",ok:"🆗",parking:"🅿️",sos:"🆘",up:"🆙",vs:"🆚",koko:"🈁",sa:"🈂️",ideograph_advantage:"🉐",accept:"🉑",congratulations:"㊗️",secret:"㊙️",u6e80:"🈵",red_circle:"🔴",orange_circle:"🟠",yellow_circle:"🟡",green_circle:"🟢",large_blue_circle:"🔵",purple_circle:"🟣",brown_circle:"🟤",black_circle:"⚫",white_circle:"⚪",red_square:"🟥",orange_square:"🟧",yellow_square:"🟨",green_square:"🟩",blue_square:"🟦",purple_square:"🟪",brown_square:"🟫",black_large_square:"⬛",white_large_square:"⬜",black_medium_square:"◼️",white_medium_square:"◻️",black_medium_small_square:"◾",white_medium_small_square:"◽",black_small_square:"▪️",white_small_square:"▫️",large_orange_diamond:"🔶",large_blue_diamond:"🔷",small_orange_diamond:"🔸",small_blue_diamond:"🔹",small_red_triangle:"🔺",small_red_triangle_down:"🔻",diamond_shape_with_a_dot_inside:"💠",radio_button:"🔘",white_square_button:"🔳",black_square_button:"🔲",checkered_flag:"🏁",triangular_flag_on_post:"🚩",crossed_flags:"🎌",black_flag:"🏴",white_flag:"🏳️",rainbow_flag:"🏳️‍🌈",transgender_flag:"🏳️‍⚧️",pirate_flag:"🏴‍☠️",ascension_island:"🇦🇨",andorra:"🇦🇩",united_arab_emirates:"🇦🇪",afghanistan:"🇦🇫",antigua_barbuda:"🇦🇬",anguilla:"🇦🇮",albania:"🇦🇱",armenia:"🇦🇲",angola:"🇦🇴",antarctica:"🇦🇶",argentina:"🇦🇷",american_samoa:"🇦🇸",austria:"🇦🇹",australia:"🇦🇺",aruba:"🇦🇼",aland_islands:"🇦🇽",azerbaijan:"🇦🇿",bosnia_herzegovina:"🇧🇦",barbados:"🇧🇧",bangladesh:"🇧🇩",belgium:"🇧🇪",burkina_faso:"🇧🇫",bulgaria:"🇧🇬",bahrain:"🇧🇭",burundi:"🇧🇮",benin:"🇧🇯",st_barthelemy:"🇧🇱",bermuda:"🇧🇲",brunei:"🇧🇳",bolivia:"🇧🇴",caribbean_netherlands:"🇧🇶",brazil:"🇧🇷",bahamas:"🇧🇸",bhutan:"🇧🇹",bouvet_island:"🇧🇻",botswana:"🇧🇼",belarus:"🇧🇾",belize:"🇧🇿",canada:"🇨🇦",cocos_islands:"🇨🇨",congo_kinshasa:"🇨🇩",central_african_republic:"🇨🇫",congo_brazzaville:"🇨🇬",switzerland:"🇨🇭",cote_divoire:"🇨🇮",cook_islands:"🇨🇰",chile:"🇨🇱",cameroon:"🇨🇲",cn:"🇨🇳",colombia:"🇨🇴",clipperton_island:"🇨🇵",costa_rica:"🇨🇷",cuba:"🇨🇺",cape_verde:"🇨🇻",curacao:"🇨🇼",christmas_island:"🇨🇽",cyprus:"🇨🇾",czech_republic:"🇨🇿",de:"🇩🇪",diego_garcia:"🇩🇬",djibouti:"🇩🇯",denmark:"🇩🇰",dominica:"🇩🇲",dominican_republic:"🇩🇴",algeria:"🇩🇿",ceuta_melilla:"🇪🇦",ecuador:"🇪🇨",estonia:"🇪🇪",egypt:"🇪🇬",western_sahara:"🇪🇭",eritrea:"🇪🇷",es:"🇪🇸",ethiopia:"🇪🇹",eu:"🇪🇺",european_union:"🇪🇺",finland:"🇫🇮",fiji:"🇫🇯",falkland_islands:"🇫🇰",micronesia:"🇫🇲",faroe_islands:"🇫🇴",fr:"🇫🇷",gabon:"🇬🇦",gb:"🇬🇧",uk:"🇬🇧",grenada:"🇬🇩",georgia:"🇬🇪",french_guiana:"🇬🇫",guernsey:"🇬🇬",ghana:"🇬🇭",gibraltar:"🇬🇮",greenland:"🇬🇱",gambia:"🇬🇲",guinea:"🇬🇳",guadeloupe:"🇬🇵",equatorial_guinea:"🇬🇶",greece:"🇬🇷",south_georgia_south_sandwich_islands:"🇬🇸",guatemala:"🇬🇹",guam:"🇬🇺",guinea_bissau:"🇬🇼",guyana:"🇬🇾",hong_kong:"🇭🇰",heard_mcdonald_islands:"🇭🇲",honduras:"🇭🇳",croatia:"🇭🇷",haiti:"🇭🇹",hungary:"🇭🇺",canary_islands:"🇮🇨",indonesia:"🇮🇩",ireland:"🇮🇪",israel:"🇮🇱",isle_of_man:"🇮🇲",india:"🇮🇳",british_indian_ocean_territory:"🇮🇴",iraq:"🇮🇶",iran:"🇮🇷",iceland:"🇮🇸",it:"🇮🇹",jersey:"🇯🇪",jamaica:"🇯🇲",jordan:"🇯🇴",jp:"🇯🇵",kenya:"🇰🇪",kyrgyzstan:"🇰🇬",cambodia:"🇰🇭",kiribati:"🇰🇮",comoros:"🇰🇲",st_kitts_nevis:"🇰🇳",north_korea:"🇰🇵",kr:"🇰🇷",kuwait:"🇰🇼",cayman_islands:"🇰🇾",kazakhstan:"🇰🇿",laos:"🇱🇦",lebanon:"🇱🇧",st_lucia:"🇱🇨",liechtenstein:"🇱🇮",sri_lanka:"🇱🇰",liberia:"🇱🇷",lesotho:"🇱🇸",lithuania:"🇱🇹",luxembourg:"🇱🇺",latvia:"🇱🇻",libya:"🇱🇾",morocco:"🇲🇦",monaco:"🇲🇨",moldova:"🇲🇩",montenegro:"🇲🇪",st_martin:"🇲🇫",madagascar:"🇲🇬",marshall_islands:"🇲🇭",macedonia:"🇲🇰",mali:"🇲🇱",myanmar:"🇲🇲",mongolia:"🇲🇳",macau:"🇲🇴",northern_mariana_islands:"🇲🇵",martinique:"🇲🇶",mauritania:"🇲🇷",montserrat:"🇲🇸",malta:"🇲🇹",mauritius:"🇲🇺",maldives:"🇲🇻",malawi:"🇲🇼",mexico:"🇲🇽",malaysia:"🇲🇾",mozambique:"🇲🇿",namibia:"🇳🇦",new_caledonia:"🇳🇨",niger:"🇳🇪",norfolk_island:"🇳🇫",nigeria:"🇳🇬",nicaragua:"🇳🇮",netherlands:"🇳🇱",norway:"🇳🇴",nepal:"🇳🇵",nauru:"🇳🇷",niue:"🇳🇺",new_zealand:"🇳🇿",oman:"🇴🇲",panama:"🇵🇦",peru:"🇵🇪",french_polynesia:"🇵🇫",papua_new_guinea:"🇵🇬",philippines:"🇵🇭",pakistan:"🇵🇰",poland:"🇵🇱",st_pierre_miquelon:"🇵🇲",pitcairn_islands:"🇵🇳",puerto_rico:"🇵🇷",palestinian_territories:"🇵🇸",portugal:"🇵🇹",palau:"🇵🇼",paraguay:"🇵🇾",qatar:"🇶🇦",reunion:"🇷🇪",romania:"🇷🇴",serbia:"🇷🇸",ru:"🇷🇺",rwanda:"🇷🇼",saudi_arabia:"🇸🇦",solomon_islands:"🇸🇧",seychelles:"🇸🇨",sudan:"🇸🇩",sweden:"🇸🇪",singapore:"🇸🇬",st_helena:"🇸🇭",slovenia:"🇸🇮",svalbard_jan_mayen:"🇸🇯",slovakia:"🇸🇰",sierra_leone:"🇸🇱",san_marino:"🇸🇲",senegal:"🇸🇳",somalia:"🇸🇴",suriname:"🇸🇷",south_sudan:"🇸🇸",sao_tome_principe:"🇸🇹",el_salvador:"🇸🇻",sint_maarten:"🇸🇽",syria:"🇸🇾",swaziland:"🇸🇿",tristan_da_cunha:"🇹🇦",turks_caicos_islands:"🇹🇨",chad:"🇹🇩",french_southern_territories:"🇹🇫",togo:"🇹🇬",thailand:"🇹🇭",tajikistan:"🇹🇯",tokelau:"🇹🇰",timor_leste:"🇹🇱",turkmenistan:"🇹🇲",tunisia:"🇹🇳",tonga:"🇹🇴",tr:"🇹🇷",trinidad_tobago:"🇹🇹",tuvalu:"🇹🇻",taiwan:"🇹🇼",tanzania:"🇹🇿",ukraine:"🇺🇦",uganda:"🇺🇬",us_outlying_islands:"🇺🇲",united_nations:"🇺🇳",us:"🇺🇸",uruguay:"🇺🇾",uzbekistan:"🇺🇿",vatican_city:"🇻🇦",st_vincent_grenadines:"🇻🇨",venezuela:"🇻🇪",british_virgin_islands:"🇻🇬",us_virgin_islands:"🇻🇮",vietnam:"🇻🇳",vanuatu:"🇻🇺",wallis_futuna:"🇼🇫",samoa:"🇼🇸",kosovo:"🇽🇰",yemen:"🇾🇪",mayotte:"🇾🇹",south_africa:"🇿🇦",zambia:"🇿🇲",zimbabwe:"🇿🇼",england:"🏴󠁧󠁢󠁥󠁮󠁧󠁿",scotland:"🏴󠁧󠁢󠁳󠁣󠁴󠁿",wales:"🏴󠁧󠁢󠁷󠁬󠁳󠁿"};Object.keys(He).reduce((e,t)=>{const n=He[t];return e[n]=t,e},{});const As=Object.keys(He).map(e=>e);Object.keys(He).map(e=>He[e]);function Ls(e){return As.filter(t=>t.startsWith(e)).map(t=>({name:t,emoji:He[t]}))}const Jn=l.forwardRef((e,t)=>{const n=l.useRef(),[r,a]=l.useState(0),{t:o}=b.useLocale(),s=u=>{const m=e.items[u];m&&e.command(m)},c=()=>{a((r+e.items.length-1)%e.items.length)},h=()=>{a((r+1)%e.items.length)},d=()=>{s(r)};return l.useEffect(()=>a(0),[e.items]),l.useEffect(()=>{if(Number.isNaN(r+1))return;const u=n.current.querySelector(`span:nth-of-type(${r+1})`);u&&It(u,{behavior:"smooth",scrollMode:"if-needed"})},[r]),l.useImperativeHandle(t,()=>({onKeyDown:({event:u})=>u.key==="ArrowUp"?(c(),!0):u.key==="ArrowDown"?(h(),!0):u.key==="Enter"?(d(),!0):!1})),i.jsx("div",{className:"richtext-w-[200px] richtext-max-h-[320px] richtext-overflow-x-hidden richtext-overflow-y-auto richtext-rounded-sm !richtext-border richtext-bg-popover richtext-p-1 richtext-text-popover-foreground richtext-shadow-md richtext-outline-none",children:i.jsx("div",{ref:n,children:e.items.length?e.items.map((u,m)=>i.jsxs("span",{className:v.clsx(" richtext-flex richtext-relative  richtext-cursor-default richtext-select-none richtext-items-center richtext-rounded-sm richtext-px-2 richtext-py-1.5 richtext-text-sm richtext-outline-none richtext-transition-colors focus:richtext-bg-accent focus:richtext-text-accent-foreground  hover:richtext-bg-accent",m===r?"bg-accent":""),onClick:()=>s(m),children:[u.fallbackImage?i.jsx("img",{src:u.fallbackImage,className:"richtext-w-[1em] richtext-h-[1em]"}):u.emoji,":",u.name,":"]},`emoji-list-code-${m}`)):i.jsx("div",{className:"richtext-flex richtext-relative  richtext-cursor-default richtext-select-none richtext-items-center richtext-rounded-sm richtext-px-2 richtext-py-1.5 richtext-text-sm richtext-outline-none richtext-transition-colors",children:i.jsx("span",{children:o("no_result_found")})})})})});Jn.displayName="EmojiList";const Ms=["😀","😃","😄","😁","😆","😅","😂","🤣","🥲","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🥸","🤩","🥳","😏","😒","😞","😔","😟","😕","🙁","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲","🥱","😴","🤤","😪","😵","🤐","🥴","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","😈","👿","👹","👺","🤡","💩","👻","💀","☠️","👽","👾","🤖","🎃","😺","😸","😹","😻","😼","😽","🙀","😿","😾","👋","🤚","🖐","✋","🖖","👌","🤌","🤏","✌️","🤞","🤟","🤘","🤙","👈","👉","👆","🖕","👇","☝️","👍","👎","✊","👊","🤛","🤜","👏","🙌","👐","🤲","🤝","🙏","✍️","💅","🤳","💪","🦾","🦵","🦿","🦶","👣","👂","🦻","👃","🫀","🫁","🧠","🦷","🦴","👀","👁","👅","👄","💋","🩸","💋","💌","💘","💝","💖","💗","💓","💞","💕","💟","❣️","❣","💔","❤️‍🔥","❤‍🔥","❤️‍🩹","❤‍🩹","❤️","❤","🧡","💛","💚","💙","💜","🤎","🖤","🤍","💯","💢","💥","💫","💦","💨","🕳️","🕳","💣","💬","👁️‍🗨️","👁‍🗨️","👁️‍🗨","👁‍🗨","🗨️","🗨","🗯️","🗯","💭","💤"],Es=["🏧","🚮","🚰","♿","🚹","🚺","🚻","🚼","🚾","🛂","🛃","🛄","🛅","⚠️","⚠","🚸","⛔","🚫","🚳","🚭","🚯","🚱","🚷","📵","🔞","☢️","☢","☣️","☣","⬆️","⬆","↗️","↗","➡️","➡","↘️","↘","⬇️","⬇","↙️","↙","⬅️","⬅","↖️","↖","↕️","↕","↔️","↔","↩️","↩","↪️","↪","⤴️","⤴","⤵️","⤵","🔃","🔄","🔙","🔚","🔛","🔜","🔝","🛐","⚛️","⚛","🕉️","🕉","✡️","✡","☸️","☸","☯️","☯","✝️","✝","☦️","☦","☪️","☪","☮️","☮","🕎","🔯","♈","♉","♊","♋","♌","♍","♎","♏","♐","♑","♒","♓","⛎","🔀","🔁","🔂","▶️","▶","⏩","⏭️","⏭","⏯️","⏯","◀️","◀","⏪","⏮️","⏮","🔼","⏫","🔽","⏬","⏸️","⏸","⏹️","⏹","⏺️","⏺","⏏️","⏏","🎦","🔅","🔆","📶","📳","📴","♀️","♀","♂️","♂","⚧️","⚧","✖️","✖","➕","➖","➗","♾️","♾","‼️","‼","⁉️","⁉","❓","❔","❕","❗","〰️","〰","💱","💲","⚕️","⚕","♻️","♻","⚜️","⚜","🔱","📛","🔰","⭕","✅","☑️","☑","✔️","✔","❌","❎","➰","➿","〽️","〽","✳️","✳","✴️","✴","❇️","❇","©️","©","®️","®","™️","™","#️⃣","#⃣","*️⃣","*⃣","0️⃣","0⃣","1️⃣","1⃣","2️⃣","2⃣","3️⃣","3⃣","4️⃣","4⃣","5️⃣","5⃣","6️⃣","6⃣","7️⃣","7⃣","8️⃣","8⃣","9️⃣","9⃣","🔟","🔠","🔡","🔢","🔣","🔤","🅰️","🅰","🆎","🅱️","🅱","🆑","🆒","🆓","ℹ️","ℹ","🆔","Ⓜ️","Ⓜ","🆕","🆖","🅾️","🅾","🆗","🅿️","🅿","🆘","🆙","🆚","🈁","🈂️","🈂","🈷️","🈷","🈶","🈯","🉐","🈹","🈚","🈲","🉑","🈸","🈴","🈳","㊗️","㊗","㊙️","㊙","🈺","🈵","🔴","🟠","🟡","🟢","🔵","🟣","🟤","⚫","⚪","🟥","🟧","🟨","🟩","🟦","🟪","🟫","⬛","⬜","◼️","◼","◻️","◻","◾","◽","▪️","▪","▫️","▫","🔶","🔷","🔸","🔹","🔺","🔻","💠","🔘","🔳","🔲"],Is=["👓","🕶️","🕶","🥽","🥼","🦺","👔","👕","👖","🧣","🧤","🧥","🧦","👗","👘","🥻","🩱","🩲","🩳","👙","👚","👛","👜","👝","🛍️","🛍","🎒","🩴","👞","👟","🥾","🥿","👠","👡","🩰","👢","👑","👒","🎩","🎓","🧢","🪖","⛑️","⛑","📿","💄","💍","💎","🔇","🔈","🔉","🔊","📢","📣","📯","🔔","🔕","🎼","🎵","🎶","🎙️","🎙","🎚️","🎚","🎛️","🎛","🎤","🎧","📻","🎷","🪗","🎸","🎹","🎺","🎻","🪕","🥁","🪘","📱","📲","☎️","☎","📞","📟","📠","🔋","🔌","💻","🖥️","🖥","🖨️","🖨","⌨️","⌨","🖱️","🖱","🖲️","🖲","💽","💾","💿","📀","🧮","🎥","🎞️","🎞","📽️","📽","🎬","📺","📷","📸","📹","📼","🔍","🔎","🕯️","🕯","💡","🔦","🏮","🪔","📔","📕","📖","📗","📘","📙","📚","📓","📒","📃","📜","📄","📰","🗞️","🗞","📑","🔖","🏷️","🏷","💰","🪙","💴","💵","💶","💷","💸","💳","🧾","💹","✉️","✉","📧","📨","📩","📤","📥","📦","📫","📪","📬","📭","📮","🗳️","🗳","✏️","✏","✒️","✒","🖋️","🖋","🖊️","🖊","🖌️","🖌","🖍️","🖍","📝","💼","📁","📂","🗂️","🗂","📅","📆","🗒️","🗒","🗓️","🗓","📇","📈","📉","📊","📋","📌","📍","📎","🖇️","🖇","📏","📐","✂️","✂","🗃️","🗃","🗄️","🗄","🗑️","🗑","🔒","🔓","🔏","🔐","🔑","🗝️","🗝","🔨","🪓","⛏️","⛏","⚒️","⚒","🛠️","🛠","🗡️","🗡","⚔️","⚔","🔫","🪃","🏹","🛡️","🛡","🪚","🔧","🪛","🔩","⚙️","⚙","🗜️","🗜","⚖️","⚖","🦯","🔗","⛓️","⛓","🪝","🧰","🧲","🪜","⚗️","⚗","🧪","🧫","🧬","🔬","🔭","📡","💉","🩸","💊","🩹","🩺","🚪","🛗","🪞","🪟","🛏️","🛏","🛋️","🛋","🪑","🚽","🪠","🚿","🛁","🪤","🪒","🧴","🧷","🧹","🧺","🧻","🪣","🧼","🪥","🧽","🧯","🛒","🚬","⚰️","⚰","🪦","⚱️","⚱","🗿","🪧"],Rs=["🎃","🎄","🎆","🎇","🧨","✨","🎈","🎉","🎊","🎋","🎍","🎎","🎏","🎐","🎑","🧧","🎀","🎁","🎗️","🎗","🎟️","🎟","🎫","🎖️","🎖","🏆","🏅","🥇","🥈","🥉","⚽","⚾","🥎","🏀","🏐","🏈","🏉","🎾","🥏","🎳","🏏","🏑","🏒","🥍","🏓","🏸","🥊","🥋","🥅","⛳","⛸️","⛸","🎣","🤿","🎽","🎿","🛷","🥌","🎯","🪀","🪁","🎱","🔮","🪄","🧿","🎮","🕹️","🕹","🎰","🎲","🧩","🧸","🪅","🪆","♠️","♠","♥️","♥","♦️","♦","♣️","♣","♟️","♟","🃏","🀄","🎴","🎭","🖼️","🖼","🎨","🧵","🪡","🧶","🪢"],Hs=["🌍","🌎","🌏","🌐","🗺️","🗺","🗾","🧭","🏔️","🏔","⛰️","⛰","🌋","🗻","🏕️","🏕","🏖️","🏖","🏜️","🏜","🏝️","🏝","🏞️","🏞","🏟️","🏟","🏛️","🏛","🏗️","🏗","🧱","🪨","🪵","🛖","🏘️","🏘","🏚️","🏚","🏠","🏡","🏢","🏣","🏤","🏥","🏦","🏨","🏩","🏪","🏫","🏬","🏭","🏯","🏰","💒","🗼","🗽","⛪","🕌","🛕","🕍","⛩️","⛩","🕋","⛲","⛺","🌁","🌃","🏙️","🏙","🌄","🌅","🌆","🌇","🌉","♨️","♨","🎠","🎡","🎢","💈","🎪","🚂","🚃","🚄","🚅","🚆","🚇","🚈","🚉","🚊","🚝","🚞","🚋","🚌","🚍","🚎","🚐","🚑","🚒","🚓","🚔","🚕","🚖","🚗","🚘","🚙","🛻","🚚","🚛","🚜","🏎️","🏎","🏍️","🏍","🛵","🦽","🦼","🛺","🚲","🛴","🛹","🛼","🚏","🛣️","🛣","🛤️","🛤","🛢️","🛢","⛽","🚨","🚥","🚦","🛑","🚧","⚓","⛵","🛶","🚤","🛳️","🛳","⛴️","⛴","🛥️","🛥","🚢","✈️","✈","🛩️","🛩","🛫","🛬","🪂","💺","🚁","🚟","🚠","🚡","🛰️","🛰","🚀","🛸","🛎️","🛎","🧳","⌛","⏳","⌚","⏰","⏱️","⏱","⏲️","⏲","🕰️","🕰","🕛","🕧","🕐","🕜","🕑","🕝","🕒","🕞","🕓","🕟","🕔","🕠","🕕","🕡","🕖","🕢","🕗","🕣","🕘","🕤","🕙","🕥","🕚","🕦","🌑","🌒","🌓","🌔","🌕","🌖","🌗","🌘","🌙","🌚","🌛","🌜","🌡️","🌡","☀️","☀","🌝","🌞","🪐","⭐","🌟","🌠","🌌","☁️","☁","⛅","⛈️","⛈","🌤️","🌤","🌥️","🌥","🌦️","🌦","🌧️","🌧","🌨️","🌨","🌩️","🌩","🌪️","🌪","🌫️","🌫","🌬️","🌬","🌀","🌈","🌂","☂️","☂","☔","⛱️","⛱","⚡","❄️","❄","☃️","☃","⛄","☄️","☄","🔥","💧","🌊"],zs=["🏁","🚩","🎌","🏴","🏳️","🏳","🏳️‍🌈","🏳‍🌈","🏳️‍⚧️","🏳‍⚧️","🏳️‍⚧","🏳‍⚧","🏴‍☠️","🏴‍☠","🇦🇨","🇦🇩","🇦🇪","🇦🇫","🇦🇬","🇦🇮","🇦🇱","🇦🇲","🇦🇴","🇦🇶","🇦🇷","🇦🇸","🇦🇹","🇦🇺","🇦🇼","🇦🇽","🇦🇿","🇧🇦","🇧🇧","🇧🇩","🇧🇪","🇧🇫","🇧🇬","🇧🇭","🇧🇮","🇧🇯","🇧🇱","🇧🇲","🇧🇳","🇧🇴","🇧🇶","🇧🇷","🇧🇸","🇧🇹","🇧🇻","🇧🇼","🇧🇾","🇧🇿","🇨🇦","🇨🇨","🇨🇩","🇨🇫","🇨🇬","🇨🇭","🇨🇮","🇨🇰","🇨🇱","🇨🇲","🇨🇳","🇨🇴","🇨🇵","🇨🇷","🇨🇺","🇨🇻","🇨🇼","🇨🇽","🇨🇾","🇨🇿","🇩🇪","🇩🇬","🇩🇯","🇩🇰","🇩🇲","🇩🇴","🇩🇿","🇪🇦","🇪🇨","🇪🇪","🇪🇬","🇪🇭","🇪🇷","🇪🇸","🇪🇹","🇪🇺","🇫🇮","🇫🇯","🇫🇰","🇫🇲","🇫🇴","🇫🇷","🇬🇦","🇬🇧","🇬🇩","🇬🇪","🇬🇫","🇬🇬","🇬🇭","🇬🇮","🇬🇱","🇬🇲","🇬🇳","🇬🇵","🇬🇶","🇬🇷","🇬🇸","🇬🇹","🇬🇺","🇬🇼","🇬🇾","🇭🇰","🇭🇲","🇭🇳","🇭🇷","🇭🇹","🇭🇺","🇮🇨","🇮🇩","🇮🇪","🇮🇱","🇮🇲","🇮🇳","🇮🇴","🇮🇶","🇮🇷","🇮🇸","🇮🇹","🇯🇪","🇯🇲","🇯🇴","🇯🇵","🇰🇪","🇰🇬","🇰🇭","🇰🇮","🇰🇲","🇰🇳","🇰🇵","🇰🇷","🇰🇼","🇰🇾","🇰🇿","🇱🇦","🇱🇧","🇱🇨","🇱🇮","🇱🇰","🇱🇷","🇱🇸","🇱🇹","🇱🇺","🇱🇻","🇱🇾","🇲🇦","🇲🇨","🇲🇩","🇲🇪","🇲🇫","🇲🇬","🇲🇭","🇲🇰","🇲🇱","🇲🇲","🇲🇳","🇲🇴","🇲🇵","🇲🇶","🇲🇷","🇲🇸","🇲🇹","🇲🇺","🇲🇻","🇲🇼","🇲🇽","🇲🇾","🇲🇿","🇳🇦","🇳🇨","🇳🇪","🇳🇫","🇳🇬","🇳🇮","🇳🇱","🇳🇴","🇳🇵","🇳🇷","🇳🇺","🇳🇿","🇴🇲","🇵🇦","🇵🇪","🇵🇫","🇵🇬","🇵🇭","🇵🇰","🇵🇱","🇵🇲","🇵🇳","🇵🇷","🇵🇸","🇵🇹","🇵🇼","🇵🇾","🇶🇦","🇷🇪","🇷🇴","🇷🇸","🇷🇺","🇷🇼","🇸🇦","🇸🇧","🇸🇨","🇸🇩","🇸🇪","🇸🇬","🇸🇭","🇸🇮","🇸🇯","🇸🇰","🇸🇱","🇸🇲","🇸🇳","🇸🇴","🇸🇷","🇸🇸","🇸🇹","🇸🇻","🇸🇽","🇸🇾","🇸🇿","🇹🇦","🇹🇨","🇹🇩","🇹🇫","🇹🇬","🇹🇭","🇹🇯","🇹🇰","🇹🇱","🇹🇲","🇹🇳","🇹🇴","🇹🇷","🇹🇹","🇹🇻","🇹🇼","🇹🇿","🇺🇦","🇺🇬","🇺🇲","🇺🇳","🇺🇸","🇺🇾","🇺🇿","🇻🇦","🇻🇨","🇻🇪","🇻🇬","🇻🇮","🇻🇳","🇻🇺","🇼🇫","🇼🇸","🇽🇰","🇾🇪","🇾🇹","🇿🇦","🇿🇲","🇿🇼","🏴󠁧󠁢󠁥󠁮󠁧󠁿","🏴󠁧󠁢󠁳󠁣󠁴󠁿","🏴󠁧󠁢󠁷󠁬󠁳󠁿"],Os=["🐵","🐒","🦍","🦧","🐶","🐕","🦮","🐕‍🦺","🐩","🐺","🦊","🦝","🐱","🐈","🐈‍⬛","🦁","🐯","🐅","🐆","🐴","🐎","🦄","🦓","🦌","🦬","🐮","🐂","🐃","🐄","🐷","🐖","🐗","🐽","🐏","🐑","🐐","🐪","🐫","🦙","🦒","🐘","🦣","🦏","🦛","🐭","🐁","🐀","🐹","🐰","🐇","🐿️","🐿","🦫","🦔","🦇","🐻","🐻‍❄️","🐻‍❄","🐨","🐼","🦥","🦦","🦨","🦘","🦡","🐾","🦃","🐔","🐓","🐣","🐤","🐥","🐦","🐧","🕊️","🕊","🦅","🦆","🦢","🦉","🦤","🪶","🦩","🦚","🦜","🐸","🐊","🐢","🦎","🐍","🐲","🐉","🦕","🦖","🐳","🐋","🐬","🦭","🐟","🐠","🐡","🦈","🐙","🐚","🐌","🦋","🐛","🐜","🐝","🪲","🐞","🦗","🪳","🕷️","🕷","🕸️","🕸","🦂","🦟","🪰","🪱","🦠","💐","🌸","💮","🏵️","🏵","🌹","🥀","🌺","🌻","🌼","🌷","🌱","🪴","🌲","🌳","🌴","🌵","🌾","🌿","☘️","☘","🍀","🍁","🍂","🍃"],Ps=["🍇","🍈","🍉","🍊","🍋","🍌","🍍","🥭","🍎","🍏","🍐","🍑","🍒","🍓","🫐","🥝","🍅","🫒","🥥","🥑","🍆","🥔","🥕","🌽","🌶️","🌶","🫑","🥒","🥬","🥦","🧄","🧅","🍄","🥜","🌰","🍞","🥐","🥖","🫓","🥨","🥯","🥞","🧇","🧀","🍖","🍗","🥩","🥓","🍔","🍟","🍕","🌭","🥪","🌮","🌯","🫔","🥙","🧆","🥚","🍳","🥘","🍲","🫕","🥣","🥗","🍿","🧈","🧂","🥫","🍱","🍘","🍙","🍚","🍛","🍜","🍝","🍠","🍢","🍣","🍤","🍥","🥮","🍡","🥟","🥠","🥡","🦀","🦞","🦐","🦑","🦪","🍦","🍧","🍨","🍩","🍪","🎂","🍰","🧁","🥧","🍫","🍬","🍭","🍮","🍯","🍼","🥛","☕","🫖","🍵","🍶","🍾","🍷","🍸","🍹","🍺","🍻","🥂","🥃","🥤","🧋","🧃","🧉","🧊","🥢","🍽️","🍽","🍴","🥄","🔪","🏺"];function Ds(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",children:i.jsx("path",{d:"M12 0C5.373 0 0 5.372 0 12c0 6.627 5.373 12 12 12 6.628 0 12-5.373 12-12 0-6.628-5.372-12-12-12m9.949 11H17.05c.224-2.527 1.232-4.773 1.968-6.113A9.966 9.966 0 0 1 21.949 11M13 11V2.051a9.945 9.945 0 0 1 4.432 1.564c-.858 1.491-2.156 4.22-2.392 7.385H13zm-2 0H8.961c-.238-3.165-1.536-5.894-2.393-7.385A9.95 9.95 0 0 1 11 2.051V11zm0 2v8.949a9.937 9.937 0 0 1-4.432-1.564c.857-1.492 2.155-4.221 2.393-7.385H11zm4.04 0c.236 3.164 1.534 5.893 2.392 7.385A9.92 9.92 0 0 1 13 21.949V13h2.04zM4.982 4.887C5.718 6.227 6.726 8.473 6.951 11h-4.9a9.977 9.977 0 0 1 2.931-6.113M2.051 13h4.9c-.226 2.527-1.233 4.771-1.969 6.113A9.972 9.972 0 0 1 2.051 13m16.967 6.113c-.735-1.342-1.744-3.586-1.968-6.113h4.899a9.961 9.961 0 0 1-2.931 6.113",fill:"currentColor"})})}function Bs(){return i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",children:[i.jsx("path",{d:"M15.5 8a1.5 1.5 0 1 0 .001 3.001A1.5 1.5 0 0 0 15.5 8M8.5 8a1.5 1.5 0 1 0 .001 3.001A1.5 1.5 0 0 0 8.5 8",fill:"currentColor"}),i.jsx("path",{d:"M18.933 0h-.027c-.97 0-2.138.787-3.018 1.497-1.274-.374-2.612-.51-3.887-.51-1.285 0-2.616.133-3.874.517C7.245.79 6.069 0 5.093 0h-.027C3.352 0 .07 2.67.002 7.026c-.039 2.479.276 4.238 1.04 5.013.254.258.882.677 1.295.882.191 3.177.922 5.238 2.536 6.38.897.637 2.187.949 3.2 1.102C8.04 20.6 8 20.795 8 21c0 1.773 2.35 3 4 3 1.648 0 4-1.227 4-3 0-.201-.038-.393-.072-.586 2.573-.385 5.435-1.877 5.925-7.587.396-.22.887-.568 1.104-.788.763-.774 1.079-2.534 1.04-5.013C23.929 2.67 20.646 0 18.933 0M3.223 9.135c-.237.281-.837 1.155-.884 1.238-.15-.41-.368-1.349-.337-3.291.051-3.281 2.478-4.972 3.091-5.031.256.015.731.27 1.265.646-1.11 1.171-2.275 2.915-2.352 5.125-.133.546-.398.858-.783 1.313M12 22c-.901 0-1.954-.693-2-1 0-.654.475-1.236 1-1.602V20a1 1 0 1 0 2 0v-.602c.524.365 1 .947 1 1.602-.046.307-1.099 1-2 1m3-3.48v.02a4.752 4.752 0 0 0-1.262-1.02c1.092-.516 2.239-1.334 2.239-2.217 0-1.842-1.781-2.195-3.977-2.195-2.196 0-3.978.354-3.978 2.195 0 .883 1.148 1.701 2.238 2.217A4.8 4.8 0 0 0 9 18.539v-.025c-1-.076-2.182-.281-2.973-.842-1.301-.92-1.838-3.045-1.853-6.478l.023-.041c.496-.826 1.49-1.45 1.804-3.102 0-2.047 1.357-3.631 2.362-4.522C9.37 3.178 10.555 3 11.948 3c1.447 0 2.685.192 3.733.57 1 .9 2.316 2.465 2.316 4.48.313 1.651 1.307 2.275 1.803 3.102.035.058.068.117.102.178-.059 5.967-1.949 7.01-4.902 7.19m6.628-8.202c-.037-.065-.074-.13-.113-.195a7.587 7.587 0 0 0-.739-.987c-.385-.455-.648-.768-.782-1.313-.076-2.209-1.241-3.954-2.353-5.124.531-.376 1.004-.63 1.261-.647.636.071 3.044 1.764 3.096 5.031.027 1.81-.347 3.218-.37 3.235",fill:"currentColor"})]})}function $s(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",children:i.jsx("path",{d:"M0 0l6.084 24H8L1.916 0zM21 5h-4l-1-4H4l3 12h3l1 4h13L21 5zM6.563 3h7.875l2 8H8.563l-2-8zm8.832 10l-2.856 1.904L12.063 13h3.332zM19 13l-1.5-6h1.938l2 8H16l3-2z",fill:"currentColor"})})}function Fs(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",children:i.jsx("path",{d:"M17 4.978c-1.838 0-2.876.396-3.68.934.513-1.172 1.768-2.934 4.68-2.934a1 1 0 0 0 0-2c-2.921 0-4.629 1.365-5.547 2.512-.064.078-.119.162-.18.244C11.73 1.838 10.798.023 9.207.023 8.579.022 7.85.306 7 .978 5.027 2.54 5.329 3.902 6.492 4.999 3.609 5.222 0 7.352 0 12.969c0 4.582 4.961 11.009 9 11.009 1.975 0 2.371-.486 3-1 .629.514 1.025 1 3 1 4.039 0 9-6.418 9-11 0-5.953-4.055-8-7-8M8.242 2.546c.641-.508.943-.523.965-.523.426.169.975 1.405 1.357 3.055-1.527-.629-2.741-1.352-2.98-1.846.059-.112.241-.356.658-.686M15 21.978c-1.08 0-1.21-.109-1.559-.402l-.176-.146c-.367-.302-.816-.452-1.266-.452s-.898.15-1.266.452l-.176.146c-.347.292-.477.402-1.557.402-2.813 0-7-5.389-7-9.009 0-5.823 4.488-5.991 5-5.991 1.939 0 2.484.471 3.387 1.251l.323.276a1.995 1.995 0 0 0 2.58 0l.323-.276c.902-.78 1.447-1.251 3.387-1.251.512 0 5 .168 5 6 0 3.617-4.187 9-7 9",fill:"currentColor"})})}function Vs(){return i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",children:[i.jsx("path",{d:"M12 0a9 9 0 0 0-5 16.482V21s2.035 3 5 3 5-3 5-3v-4.518A9 9 0 0 0 12 0zm0 2c3.86 0 7 3.141 7 7s-3.14 7-7 7-7-3.141-7-7 3.14-7 7-7zM9 17.477c.94.332 1.946.523 3 .523s2.06-.19 3-.523v.834c-.91.436-1.925.689-3 .689a6.924 6.924 0 0 1-3-.69v-.833zm.236 3.07A8.854 8.854 0 0 0 12 21c.965 0 1.888-.167 2.758-.451C14.155 21.173 13.153 22 12 22c-1.102 0-2.117-.789-2.764-1.453z",fill:"currentColor"}),i.jsx("path",{d:"M14.745 12.449h-.004c-.852-.024-1.188-.858-1.577-1.824-.421-1.061-.703-1.561-1.182-1.566h-.009c-.481 0-.783.497-1.235 1.537-.436.982-.801 1.811-1.636 1.791l-.276-.043c-.565-.171-.853-.691-1.284-1.794-.125-.313-.202-.632-.27-.913-.051-.213-.127-.53-.195-.634C7.067 9.004 7.039 9 6.99 9A1 1 0 0 1 7 7h.01c1.662.017 2.015 1.373 2.198 2.134.486-.981 1.304-2.058 2.797-2.075 1.531.018 2.28 1.153 2.731 2.141l.002-.008C14.944 8.424 15.327 7 16.979 7h.032A1 1 0 1 1 17 9h-.011c-.149.076-.256.474-.319.709a6.484 6.484 0 0 1-.311.951c-.429.973-.79 1.789-1.614 1.789",fill:"currentColor"})]})}function Us(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",children:i.jsx("path",{d:"M0 0h11v2H0zM4 11h3V6h4V4H0v2h4zM15.5 17c1.381 0 2.5-1.116 2.5-2.493s-1.119-2.493-2.5-2.493S13 13.13 13 14.507 14.119 17 15.5 17m0-2.986c.276 0 .5.222.5.493 0 .272-.224.493-.5.493s-.5-.221-.5-.493.224-.493.5-.493M21.5 19.014c-1.381 0-2.5 1.116-2.5 2.493S20.119 24 21.5 24s2.5-1.116 2.5-2.493-1.119-2.493-2.5-2.493m0 2.986a.497.497 0 0 1-.5-.493c0-.271.224-.493.5-.493s.5.222.5.493a.497.497 0 0 1-.5.493M22 13l-9 9 1.513 1.5 8.99-9.009zM17 11c2.209 0 4-1.119 4-2.5V2s.985-.161 1.498.949C23.01 4.055 23 6 23 6s1-1.119 1-3.135C24-.02 21 0 21 0h-2v6.347A5.853 5.853 0 0 0 17 6c-2.209 0-4 1.119-4 2.5s1.791 2.5 4 2.5M10.297 20.482l-1.475-1.585a47.54 47.54 0 0 1-1.442 1.129c-.307-.288-.989-1.016-2.045-2.183.902-.836 1.479-1.466 1.729-1.892s.376-.871.376-1.336c0-.592-.273-1.178-.818-1.759-.546-.581-1.329-.871-2.349-.871-1.008 0-1.79.293-2.344.879-.556.587-.832 1.181-.832 1.784 0 .813.419 1.748 1.256 2.805-.847.614-1.444 1.208-1.794 1.784a3.465 3.465 0 0 0-.523 1.833c0 .857.308 1.56.924 2.107.616.549 1.423.823 2.42.823 1.173 0 2.444-.379 3.813-1.137L8.235 24h2.819l-2.09-2.383 1.333-1.135zm-6.736-6.389a1.02 1.02 0 0 1 .73-.286c.31 0 .559.085.747.254a.849.849 0 0 1 .283.659c0 .518-.419 1.112-1.257 1.784-.536-.651-.805-1.231-.805-1.742a.901.901 0 0 1 .302-.669M3.74 22c-.427 0-.778-.116-1.057-.349-.279-.232-.418-.487-.418-.766 0-.594.509-1.288 1.527-2.083.968 1.134 1.717 1.946 2.248 2.438-.921.507-1.686.76-2.3.76",fill:"currentColor"})})}function Ws(){return i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",children:[i.jsx("path",{d:"M6.5 12C5.122 12 4 13.121 4 14.5S5.122 17 6.5 17 9 15.879 9 14.5 7.878 12 6.5 12m0 3c-.275 0-.5-.225-.5-.5s.225-.5.5-.5.5.225.5.5-.225.5-.5.5M17.5 12c-1.378 0-2.5 1.121-2.5 2.5s1.122 2.5 2.5 2.5 2.5-1.121 2.5-2.5-1.122-2.5-2.5-2.5m0 3c-.275 0-.5-.225-.5-.5s.225-.5.5-.5.5.225.5.5-.225.5-.5.5",fill:"currentColor"}),i.jsx("path",{d:"M22.482 9.494l-1.039-.346L21.4 9h.6c.552 0 1-.439 1-.992 0-.006-.003-.008-.003-.008H23c0-1-.889-2-1.984-2h-.642l-.731-1.717C19.262 3.012 18.091 2 16.764 2H7.236C5.909 2 4.738 3.012 4.357 4.283L3.626 6h-.642C1.889 6 1 7 1 8h.003S1 8.002 1 8.008C1 8.561 1.448 9 2 9h.6l-.043.148-1.039.346a2.001 2.001 0 0 0-1.359 2.097l.751 7.508a1 1 0 0 0 .994.901H3v1c0 1.103.896 2 2 2h2c1.104 0 2-.897 2-2v-1h6v1c0 1.103.896 2 2 2h2c1.104 0 2-.897 2-2v-1h1.096a.999.999 0 0 0 .994-.901l.751-7.508a2.001 2.001 0 0 0-1.359-2.097M6.273 4.857C6.402 4.43 6.788 4 7.236 4h9.527c.448 0 .834.43.963.857L19.313 9H4.688l1.585-4.143zM7 21H5v-1h2v1zm12 0h-2v-1h2v1zm2.189-3H2.811l-.662-6.607L3 11h18l.852.393L21.189 18z",fill:"currentColor"})]})}function qs(e,t=null){if(typeof window>"u")throw new Error;const n=localStorage.getItem(e);if(!n)return t;try{return JSON.parse(n)}catch{return n}}function Gs(e,t){window.localStorage.setItem(e,`${t}`)}class wt{constructor(t,n){re(this,"key");re(this,"value");re(this,"prev");re(this,"next");this.key=t,this.value=n,this.prev=null,this.next=null}}class Ks{constructor(t){re(this,"capacity");re(this,"usedCapacity");re(this,"head");re(this,"tail");re(this,"store");this.capacity=t||20,this.usedCapacity=0,this.store={},this.head=new wt("fakeHeadNode","fakeHeadNode"),this.tail=new wt("fakeTailNode","fakeTailNode"),this.head.next=this.tail,this.tail.prev=this.head}removeNode(t){t.prev.next=t.next,t.next.prev=t.prev}addToHead(t){t.prev=this.head,t.next=this.head.next,this.head.next.prev=t,this.head.next=t}moveToHead(t){this.removeNode(t),this.addToHead(t)}removeTail(){const t=this.tail.prev;return this.removeNode(t),t}get(t){if(t in this.store){const n=this.store[t];return this.moveToHead(n),n.value}return-1}put(t,n){if(t in this.store){const r=this.store[t];r.value=n,this.moveToHead(r)}else{const r=new wt(t,n);if(this.addToHead(r),this.store[t]=r,this.usedCapacity+=1,this.usedCapacity>this.capacity){const a=this.removeTail();delete this.store[a.key],this.usedCapacity-=1}}}keys(){const t=[];let n=this.head;for(;n;)t.push(n.key),n=n.next;return t.slice(1,-1)}values(){const t=[];let n=this.head;for(;n;)t.push(n.value),n=n.next;return t.slice(1,-1)}toJSON(){return this.store}}function Zs(e,t){const n=new Ks(t);return{syncFromStorage(){(qs(e)||[]).slice().reverse().forEach(o=>{n.put(o,o)})},syncToStorage(){Gs(e,Zi(n.keys()))},put(a){n.put(a,a),this.syncToStorage()},get(a){return a?n.get(a):n.keys()}}}const Te=Zs("EMOJI_PICKER",20),xn=[{title:"Smileys & People",data:Ms,icon:p.Laugh},{title:"Animals & Nature",data:Os,icon:Bs},{title:"Food & Drink",data:Ps,icon:Fs},{title:"Activity",data:Rs,icon:Ds},{title:"Travel & Places",data:Hs,icon:Ws},{title:"Object",data:Is,icon:Vs},{title:"Symbol",data:Es,icon:Us},{title:"Flags",data:zs,icon:$s}],Xs=["😀","😃","😄","😁","😆","😅","😂","🤣"];function Ys({onSelectEmoji:e,children:t}){const[n,r]=l.useState([]),{t:a}=b.useLocale(),o=l.useMemo(()=>n.length?[{title:"Frequently used",icon:p.Clock3,data:n},...xn]:xn,[n]),s=l.useCallback(c=>{Te.put(c),r(Te.get()),e&&e(c)},[e]);return l.useEffect(()=>{Te.syncFromStorage();const c=Te.get();c!=null&&c.length||Xs.forEach(d=>{Te.put(d)});const h=Te.get();r(h)},[]),i.jsxs(ee,{modal:!0,children:[i.jsx(te,{asChild:!0,children:t}),i.jsx(Y,{hideWhenDetached:!0,className:"richtext-w-full richtext-h-full richtext-p-2",align:"start",side:"bottom",children:i.jsxs(Ot,{defaultValue:"Frequently used",children:[i.jsx(lt,{className:"richtext-flex richtext-items-center richtext-gap-[4px]",children:o.map(c=>i.jsx(Ee,{value:c.title,className:"!richtext-p-[6px] richtext-bg-accent hover:richtext-text-accent-foreground",children:c.icon&&i.jsx(c.icon,{size:16})},`emoji-picker-title-${c.title}`))}),o.map(c=>i.jsxs(Ie,{value:c.title,children:[i.jsx("p",{className:"richtext-mb-[6px] richtext-font-semibold",children:a(c.title)}),i.jsx("div",{className:"richtext-max-h-[280px] richtext-overflow-y-auto",children:i.jsx("div",{className:"richtext-grid richtext-grid-cols-8 richtext-gap-1 ",children:(c.data||[]).map(h=>i.jsx("div",{onClick:()=>s(h),className:"richtext-text-center richtext-cursor-pointer",children:h},`emoji-picker-${h}`))})})]},`emoji-picker-content-${c.title}`))]})})]})}function Js({editor:e,icon:t,...n}){const r=l.useCallback(a=>{const{selection:o}=e.state,{$anchor:s}=o;return e.chain().insertContentAt(s.pos,a).run()},[e]);return i.jsx(Ys,{onSelectEmoji:r,children:i.jsx(y,{tooltip:n==null?void 0:n.tooltip,icon:t})})}const Qs=200,ec=new v.PluginKey("emoji"),tc=f.Node.create({name:"emoji",content:"text*",priority:Qs,addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),HTMLAttributes:{},suggestion:{char:":",pluginKey:ec,command:({editor:t,range:n,props:r})=>{t.chain().focus().insertContentAt(n,`${r.emoji} `).run()}},button:({editor:t,t:n})=>({component:Js,componentProps:{editor:t,action:()=>{},isActive:()=>!1,disabled:!1,icon:"EmojiIcon",tooltip:n("editor.emoji.tooltip")}})}},addCommands(){return{setEmoji:e=>({commands:t})=>t.insertContent(`${e.emoji} `)}},addProseMirrorPlugins(){return[f.Suggestion({editor:this.editor,...this.options.suggestion})]}}).configure({suggestion:{items:({query:e})=>Ls(e),render:()=>{let e,t,n;return{onStart:r=>{n=r.editor.isEditable,n&&(e=new f.ReactRenderer(Jn,{props:r,editor:r.editor}),t=at("body",{getReferenceClientRect:r.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"}))},onUpdate(r){n&&(e.updateProps(r),t[0].setProps({getReferenceClientRect:r.clientRect}))},onKeyDown(r){var a;if(n)return r.event.key==="Escape"?(t[0].hide(),!0):(a=e.ref)==null?void 0:a.onKeyDown(r)},onExit(){n&&(t[0].destroy(),e.destroy())}}}}});function nc({editor:e,...t}){const{t:n}=b.useLocale(),r=Ge(e,_e.name,{text:"",defaultShowPicker:!1}),{text:a,defaultShowPicker:o}=r,[s,c]=l.useState(""),h=l.useCallback(()=>{e.chain().focus().setKatex({text:s}).run(),c("")},[e,s]);l.useEffect(()=>{o&&e.chain().updateAttributes(_e.name,{defaultShowPicker:!1}).focus().run()},[e,o]);const d=l.useMemo(()=>{try{return Rt.renderToString(`${s}`)}catch{return s}},[s]),u=l.useMemo(()=>`${s}`.trim()?i.jsx("span",{contentEditable:!1,dangerouslySetInnerHTML:{__html:d||""}}):null,[s,d]);return i.jsxs(ee,{modal:!0,children:[i.jsx(te,{asChild:!0,children:i.jsx(y,{tooltip:t==null?void 0:t.tooltip,icon:t==null?void 0:t.icon})}),i.jsxs(Y,{hideWhenDetached:!0,className:"richtext-w-full richtext-h-full richtext-p-2",align:"start",side:"bottom",children:[i.jsx(X,{className:"richtext-mb-[6px]",children:n("editor.formula.dialog.text")}),i.jsx("div",{className:"richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5 richtext-mb-[16px]",children:i.jsx("div",{className:"richtext-relative richtext-w-full richtext-max-w-sm",children:i.jsx(Ke,{value:s,onChange:m=>c(m.target.value),autoFocus:!0,required:!0,rows:3,defaultValue:a,className:"richtext-w-full",placeholder:"Text"})})}),u&&i.jsx("div",{className:"richtext-my-[10px] richtext-p-[10px] richtext-rounded-[6px] !richtext-border-[1px] richtext-max-w-[286px] richtext-whitespace-nowrap richtext-overflow-auto",children:u}),i.jsxs("div",{className:"richtext-flex richtext-items-center richtext-justify-between richtext-gap-[6px]",children:[i.jsx(F,{onClick:h,className:"richtext-flex-1",children:"Submit"}),i.jsx("a",{href:"https://katex.org/docs/supported",target:"_blank",rel:"noreferrer noopener",children:i.jsx(p.HelpCircle,{size:16})})]})]})]})}function ic(e,t=1){let n=0,r=0,a=0;if(e.startsWith("rgb")){const o=e.replace(/\s/g,"").match(/rgb\((.*)\)$/)[1].split(",");n=+o[0],r=+o[1],a=+o[2]}else if(e.startsWith("#")){let o=e.replace("#","");o.length===3&&(o=`${o[0]}${o[0]}${o[1]}${o[1]}${o[2]}${o[2]}`),n=Number.parseInt(o.substring(0,2),16),r=Number.parseInt(o.substring(2,4),16),a=Number.parseInt(o.substring(4,6),16)}else return e;return t>1&&t<=100&&(t=t/100),`rgba(${n},${r},${a},${t})`}function rc({node:e}){const t=Er(),{text:n}=e.attrs,r=l.useMemo(()=>{const s="rgb(254, 242, 237)";return t==="dark"?ic(s,.75):s},[t]),a=l.useMemo(()=>{try{return Rt.renderToString(`${n}`)}catch{return n}},[n]),o=l.useMemo(()=>n.trim()?i.jsx("span",{contentEditable:!1,dangerouslySetInnerHTML:{__html:a}}):i.jsx("span",{contentEditable:!1,children:"Not enter a formula"}),[n,a]);return i.jsx(f.NodeViewWrapper,{style:{display:"inline-block",backgroundColor:r},as:"span",children:o})}function ac(e){return t=>t.getAttribute(e)}const _e=f.Node.create({name:"katex",group:"inline",inline:!0,defining:!0,draggable:!0,selectable:!0,addOptions(){return{HTMLAttributes:{class:"katex"},button:({editor:e,t})=>({component:nc,componentProps:{editor:e,action:()=>{},isActive:()=>!1,disabled:!1,icon:"KatexIcon",tooltip:t("editor.katex.tooltip")}})}},addAttributes(){return{text:{default:"",parseHTML:ac("text")},defaultShowPicker:{default:!1}}},parseHTML(){return[{tag:"span.katex"}]},renderHTML({HTMLAttributes:e}){return["span",f.mergeAttributes(this.options&&this.options.HTMLAttributes||{},e)]},addCommands(){return{setKatex:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[f.nodeInputRule({find:/^\$katex\$$/,type:this.type,getAttributes:()=>({defaultShowPicker:!0})})]},addNodeView(){return f.ReactNodeViewRenderer(rc)}});function oc(e){const t=document.createElement("iframe");t.setAttribute("style","position: absolute; width: 0; height: 0; top: 0; left: 0;"),document.body.appendChild(t),t.textContent=`
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <title>Echo Editor</title>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body class="is-print">
      <div class="tiptap ProseMirror" translate="no" aria-expanded="false">
          ${e}
      </div>
    </body>
    </html>
  `;const n=t.contentWindow,r=t.contentDocument||t.contentWindow&&t.contentWindow.document,a=document.createElement("link");a.rel="stylesheet",a.href="https://cdn.jsdelivr.net/npm/reactjs-tiptap-editor@latest/lib/style.css",r.head.appendChild(a),r&&(r.open(),r.write(e),r.close()),n&&(t.onload=function(){try{setTimeout(()=>{n.focus();try{n.document.execCommand("print",!1)||n.print()}catch{n.print()}n.close()},10)}catch(o){console.error(o)}setTimeout(()=>{document.body.removeChild(t)},100)})}function sc(e){const t=e.getHTML();return t?(oc(t),!0):!1}const cc=f.Extension.create({name:"exportPdf",addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),button:({editor:t,t:n})=>({component:y,componentProps:{action:()=>{sc(t)},icon:"ExportPdf",tooltip:n("editor.exportPdf.tooltip"),isActive:()=>!1,disabled:!1}})}}});function lc(e,t){const n=atob(e.split(",")[1]),r=Array.from({length:n.length});for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);const a=new Uint8Array(r);return new Blob([a],{type:t})}function dc(e,t){return new File([e],t,{type:e.type})}function hc(e){const[t,n]=l.useState(!1),[r,a]=l.useState(),o=l.useRef();function s(){o.current.click()}function c(m){const x=m.target.files[0];a(x),x&&d()}async function h(m){var S;const g=new DOMParser().parseFromString(m,"text/html"),w=g.querySelectorAll("img");if(!w.length)return g.body.innerHTML;if(Ui(e.editor,"image")){const A=(S=e.editor.extensionManager.extensions.find(k=>k.name==="importWord"))==null?void 0:S.options;if(A&&typeof A.upload=="function"){const k=[];for(const N of w){const T=N.getAttribute("src"),I=lc(T,"image/jpeg"),O=dc(I,"image.jpeg");k.push(O)}const j=await A.upload(k);for(let N=0;N<w.length;N++){const T=w[N];T.setAttribute("src",j[N].src);const I=T.parentElement;(I==null?void 0:I.tagName)==="P"&&(I.insertAdjacentElement("beforebegin",T),!I.hasChildNodes()&&I.textContent===""&&I.remove())}return g.body.innerHTML}else return console.warn("Image Upload method found, skip image conversion"),g.body.innerHTML}else return console.error("Image extension not found, unable to convert image"),g.body.innerHTML}async function d(){if(e.convert){const m=await e.convert(r);u(m)}else{const m=new FormData,x=JSON.stringify({collaboration_features:{comments:!0,user_id:"e3",track_changes:!0},formatting:{resets:"none",defaults:"inline",styles:"inline",comments:"basic"}});m.append("config",x),m.append("file",r),n(!0),fetch("https://docx-converter.cke-cs.com/v2/convert/docx-html",{method:"POST",body:m}).then(g=>g.json()).then(async g=>{u(g.html)}).catch(g=>{console.error("Error:",g),n(!1)})}}async function u(m){const x=await h(m);e.editor.chain().setContent(x,!0).run(),n(!1)}return i.jsxs("div",{children:[i.jsx(y,{loading:t,disabled:e==null?void 0:e.disabled,icon:e==null?void 0:e.icon,tooltip:e==null?void 0:e.tooltip,action:s}),i.jsx("input",{type:"file",accept:".docx",ref:o,style:{display:"none"},onChange:c})]})}const uc=f.Extension.create({name:"importWord",addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),upload:void 0,convert:void 0,button:({editor:t,extension:n,t:r})=>{const{convert:a}=n.options;return{component:hc,componentProps:{convert:a,action:()=>t.commands.setHorizontalRule(),disabled:!t.can().setHorizontalRule(),icon:"Word",shortcutKeys:["alt","mod","S"],tooltip:r("editor.importWrod.tooltip")}}}}}}),mc=typeof window<"u";function xc(e,t){if(mc){const n=window.URL.createObjectURL(e),r=document.createElement("a");return r.href=n,r.download=t,r.click(),window.URL.revokeObjectURL(n),Promise.resolve()}return console.error("Download is not supported in Node.js"),Promise.resolve()}const fc={...se.defaultNodes,hardBreak:se.defaultNodes.hard_break,codeBlock:se.defaultNodes.code_block,orderedList:se.defaultNodes.ordered_list,listItem:se.defaultNodes.list_item,bulletList:se.defaultNodes.bullet_list,horizontalRule:se.defaultNodes.horizontal_rule,image(e,t){e.renderInline(t),e.closeBlock(t)}},gc=new se.DocxSerializer(fc,se.defaultMarks),bc=f.Extension.create({name:"exportWord",addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),button:({editor:t,t:n})=>({component:y,componentProps:{icon:"ExportWord",action:()=>{t==null||t.commands.exportToWord()},tooltip:n("editor.exportWord.tooltip"),isActive:()=>!1,disabled:!1}})}},addCommands(){return{exportToWord:()=>async({editor:e})=>{const t={getImageBuffer:async r=>{const o=await(await fetch(r)).arrayBuffer();return new Uint8Array(o)}},n=gc.serialize(e.state.doc,t);return hi.Packer.toBlob(n).then(r=>xc(new Blob([r]),"export-document.docx")),!0}}}}),pc="_toc_aag8a_1",wc="_visible_aag8a_7",_c="_list_aag8a_11",vc="_item_aag8a_16",Qe={toc:pc,visible:wc,list:_c,item:vc,"item--3":"_item--3_aag8a_19","item--4":"_item--4_aag8a_22","item--5":"_item--5_aag8a_25","item--6":"_item--6_aag8a_28"};function yc(e){const t=[],n=[t];return e.forEach(r=>{let a=-1,o=n[r.level+a];for(;!o;)a-=1,o=n[r.level+a];o.push({...r,children:n[r.level]=[]})}),t}function jc({editor:e}){const t=dt(),[n,r]=l.useState([]),{t:a}=b.useLocale(),o=l.useCallback(()=>{const s=[],c=e.state.tr;e.state.doc.descendants((h,d)=>{if(h.type.name==="heading"){const u=`heading-${s.length+1}`;h.attrs.id!==u&&c.setNodeMarkup(d,void 0,{...h.attrs,id:u}),s.push({level:h.attrs.level,text:h.textContent,id:u})}}),c.setMeta("addToHistory",!1),c.setMeta("preventUpdate",!0),e.view.dispatch(c),r(s),e.eventEmitter&&e.eventEmitter.emit("TableOfContents",yc(s))},[e]);return l.useEffect(()=>{if(e){if(!e.options.editable){o();return}return e.on("update",o),()=>{e.off("update",o)}}},[e,o]),l.useEffect(()=>{o()},[]),i.jsx(f.NodeViewWrapper,{className:v.clsx("tableOfContent",Qe.toc,t&&Qe.visible),children:t?i.jsxs("div",{style:{position:"relative"},children:[i.jsx("p",{className:"richtext-mb-[8px] text-[20px] richtext-font-semibold",children:a("editor.table_of_content")}),i.jsx("ul",{className:Qe.list,children:n.map((s,c)=>i.jsx("li",{className:Qe.item,style:{paddingLeft:`${s.level-1}rem`},children:i.jsx("a",{href:`#${s.id}`,children:s.text})},`table-of-content-${c}`))})]}):null})}function kc(e){return e&&e.type.name==="title"}function Cc(e,t){const r=[e.getJSON()],a=[];for(;r.length;){const o=r.shift();o.type===t&&a.push(o),o.content&&o.content.length&&r.push(...o.content)}return a}function Nc(e,...t){const[n,r]=l.useState(!1);return l.useEffect(()=>{const a=()=>{r(e.isActive.apply(e,t))};return e.on("selectionUpdate",a),e.on("transaction",a),()=>{e.off("selectionUpdate",a),e.off("transaction",a)}},[e,t,r]),n}function Sc({editor:e,icon:t,tooltip:n}){const r=Nc(e,Qn.name),a=l.useCallback(()=>{if(r){e.chain().focus().removeTableOfContents().run();return}e.chain().focus().setTableOfContents().run()},[e,r]);return i.jsx(y,{action:a,isActive:()=>r||!1,icon:t,tooltip:n})}const Qn=f.Node.create({name:"tableOfContents",group:"block",atom:!0,addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),onHasOneBeforeInsert:()=>{},resizable:!0,lastColumnResizable:!0,allowTableNodeSelection:!1,button:({editor:t,t:n})=>({component:Sc,componentProps:{disabled:!1,icon:"BookMarked",tooltip:n("editor.table.tooltip"),editor:t}})}},parseHTML(){return[{tag:"toc"}]},renderHTML({HTMLAttributes:e}){return["toc",f.mergeAttributes(e)]},addNodeView(){return f.ReactNodeViewRenderer(jc)},addCommands(){return{setTableOfContents:()=>({commands:e,editor:t,view:n})=>{if(Cc(t,this.name).length){this.options.onHasOneBeforeInsert();return}const a=n.props.state.doc.content.firstChild;if(kc(a)){const o=(a.firstChild&&a.firstChild.nodeSize||0)+1;return e.insertContentAt(o,{type:this.name})}return e.insertContent({type:this.name})},removeTableOfContents:()=>({state:e,dispatch:t})=>{const{tr:n}=e,r=e.schema.nodes.tableOfContents;return e.doc.descendants((a,o)=>{if(a.type===r){const s=o,c=o+a.nodeSize;n.delete(s,c)}}),n.docChanged?(t(n),!0):!1}}},addGlobalAttributes(){return[{types:["heading"],attributes:{id:{default:null}}}]}});function Tc(e){var n;const t=l.useMemo(()=>{var o;const r=(o=e==null?void 0:e.items)==null?void 0:o.find(s=>s.isActive());return r&&!r.default?{...r,icon:r.icon?r.icon:e.icon}:{title:e==null?void 0:e.tooltip,icon:e.icon,isActive:()=>!1}},[e]);return i.jsxs(ee,{modal:!0,children:[i.jsx(te,{disabled:e==null?void 0:e.disabled,asChild:!0,children:i.jsx(y,{customClass:"!richtext-w-12 richtext-h-12",icon:e==null?void 0:e.icon,tooltip:e==null?void 0:e.tooltip,disabled:e==null?void 0:e.disabled,children:i.jsx($,{className:"richtext-w-3 richtext-h-3 richtext-ml-1 richtext-text-zinc-500",name:"MenuDown"})})}),i.jsx(Y,{className:"richtext-min-w-4 richtext-w-full !richtext-p-[4px] richtext-flex richtext-flex-row richtext-gap-1",align:"start",side:"bottom",children:(n=e==null?void 0:e.items)==null?void 0:n.map((r,a)=>{var o,s;return i.jsxs(Oe,{children:[i.jsx(Pe,{asChild:!0,children:i.jsx(Ze,{size:"sm",onClick:r==null?void 0:r.action,className:"richtext-p-1 richtext-w-7 richtext-h-7",pressed:t.title===r.title,"data-state":t.title===r.title?"on":"off",children:(r==null?void 0:r.icon)&&i.jsx($,{name:r.icon})})}),i.jsxs(je,{className:"richtext-flex richtext-flex-col richtext-items-center",children:[i.jsx("span",{children:r.title}),!!((o=r.shortcutKeys)!=null&&o.length)&&i.jsx("span",{children:(s=r.shortcutKeys)==null?void 0:s.map(c=>ot(c)).join(" ")})]})]},`text-align-${a}`)})})]})}const Ac=f.Extension.create({name:"text-direction",addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),types:["heading","paragraph"],directions:["auto","ltr","rtl"],defaultDirection:"auto",button({editor:t,extension:n,t:r}){var h;const a=((h=n.options)==null?void 0:h.directions)||[],o={auto:"TextDirection",ltr:"LeftToRight",rtl:"RightToLeft"},s=a.map(d=>({title:r(`editor.textDirection.${d}.tooltip`),icon:o[d],isActive:()=>!1,action:()=>{var u,m,x,g;if(d==="auto"){(m=(u=t.commands)==null?void 0:u.unsetTextDirection)==null||m.call(u);return}(g=(x=t.commands)==null?void 0:x.setTextDirection)==null||g.call(x,d)},disabled:!1})),c=s.filter(d=>d.disabled).length===s.length;return{component:Tc,componentProps:{icon:"TextDirection",tooltip:r("editor.textDirection.tooltip"),disabled:c,items:s}}}}},addGlobalAttributes(){return[{types:this.options.types,attributes:{dir:{default:this.options.defaultDirection,parseHTML:e=>e.attributes.dir&&this.options.directions.includes(e.attributes.dir)?e.attributes.dir.value:this.options.defaultDirection,renderHTML:e=>({dir:e.dir})}}}]},addCommands(){return{setTextDirection:e=>({commands:t})=>this.options.directions.includes(e)?this.options.types.every(n=>t.updateAttributes(n,{dir:e})):!1,unsetTextDirection:()=>({commands:e})=>this.options.types.every(t=>e.resetAttributes(t,"dir"))}}}),Lc="_listUsers_en3pm_1",Mc="_itemUser_en3pm_10",Ec="_selectedUser_en3pm_31",et={listUsers:Lc,itemUser:Mc,selectedUser:Ec},Ic=l.forwardRef((e,t)=>{const n=l.useRef(),[r,a]=l.useState(0),o=d=>{const u=e.items[d];u&&e.command({id:u,label:u})},s=()=>{a((r+e.items.length-1)%e.items.length)},c=()=>{a((r+1)%e.items.length)},h=()=>{o(r)};return l.useEffect(()=>a(0),[e.items]),l.useEffect(()=>{if(Number.isNaN(r+1))return;const d=n.current.querySelector(`span:nth-of-type(${r+1})`);d&&It(d,{behavior:"smooth",scrollMode:"if-needed"})},[r]),l.useImperativeHandle(t,()=>({onKeyDown:({event:d})=>d.key==="ArrowUp"?(s(),!0):d.key==="ArrowDown"?(c(),!0):d.key==="Enter"?(h(),!0):!1})),i.jsx("div",{className:v.clsx("listUsers",et.listUsers),children:i.jsx("div",{ref:n,children:e.items.length?e.items.map((d,u)=>i.jsx("span",{className:v.clsx("itemUser",et.itemUser,u===r?et.selectedUser:""),onClick:()=>o(u),children:d},u)):i.jsx("div",{className:v.clsx("itemUserEmpty",et.itemUser),children:"Empty"})})})}),Rc=[{id:"1",name:"John Doe"},{id:"2",name:"Jane Doe"},{id:"3",name:"Alice"},{id:"4",name:"Bob"}],Hc={items:async({query:e})=>Rc.map(n=>n.name).filter(n=>n.toLowerCase().startsWith(e.toLowerCase())),render:()=>{let e,t;return{onStart:n=>{e=new f.ReactRenderer(Ic,{props:n,editor:n.editor}),t=at("body",{getReferenceClientRect:n.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"})},onUpdate(n){e.updateProps(n),t[0].setProps({getReferenceClientRect:n.clientRect})},onKeyDown(n){var r;return n.event.key==="Escape"?(t[0].hide(),!0):(r=e.ref)==null?void 0:r.onKeyDown(n)},onExit(){t[0].destroy(),e.destroy()}}}},zc=f.Mention.extend({addAttributes(){return{id:{default:"",parseHTML:K("id")},label:{default:"",parseHTML:K("label")}}}}).configure({HTMLAttributes:{class:"mention"},suggestion:Hc});function Oc(e){switch(gr(e)){case"audio":return i.jsx(p.LucideAudioLines,{});case"video":return i.jsx(p.LucideVideo,{});case"file":return i.jsx(p.LucideFile,{});case"image":return i.jsx(p.LucideImage,{});case"pdf":return i.jsx($n,{});case"word":return i.jsx(Fn,{});case"excel":return i.jsx(p.LucideSheet,{});case"ppt":return i.jsx(p.LucideTableProperties,{});default:return i.jsx(i.Fragment,{})}}const Pc="_wrap_gpqtf_1",_t={wrap:Pc};function Dc({editor:e,node:t,updateAttributes:n,deleteNode:r,extension:a}){var T;const o=l.useRef(),s=dt(),{hasTrigger:c,fileName:h,fileSize:d,fileExt:u,fileType:m,url:x,error:g}=t.attrs,[w,_]=l.useState(!1),{t:S}=b.useLocale(),A=(T=a==null?void 0:a.options)==null?void 0:T.upload,k=l.useCallback(()=>{!s||x||s&&o.current.click()},[s,x]),j=l.useCallback(async I=>{const O=I.target.files&&I.target.files[0];if(!O)return;const E={fileName:mr(O.name),fileSize:O.size,fileType:O.type,fileExt:xr(O.name)};_(!0);try{const L=await A(O);n({...E,url:L}),_(!1)}catch(L){n({error:`File upload fail: ${L&&L.message}`||"Unknown error"}),_(!1),o.current.value=""}},[_,n]);l.useEffect(()=>{!x&&!c&&(k(),n({hasTrigger:!0}))},[x,c,k,n]);const N=l.useCallback(()=>r(),[e]);return s&&!x?i.jsx(f.NodeViewWrapper,{children:i.jsxs("div",{className:v.clsx(_t.wrap,"render-wrapper"),children:[i.jsx("p",{style:{cursor:"pointer"},onClick:k,children:w?i.jsx("span",{children:S("editor.attachment.uploading")}):i.jsx("span",{children:S("editor.attachment.please_upload")})}),i.jsx("input",{ref:o,type:"file",hidden:!0,onChange:j})]})}):x?i.jsx(f.NodeViewWrapper,{children:i.jsxs("div",{className:v.clsx(_t.wrap,"render-wrapper"),onClick:k,children:[i.jsxs("div",{className:"richtext-flex richtext-items-center richtext-gap-[4px]",children:[i.jsx("span",{children:Oc(m)}),i.jsxs("span",{children:[h,".",u]}),i.jsxs("span",{children:["(",fr(d),")"]})]}),i.jsx(y,{icon:"Trash2",action:N,tooltip:S("editor.delete")})]})}):g!=="null"?i.jsx(f.NodeViewWrapper,{children:i.jsx("div",{className:v.clsx(_t.wrap,"render-wrapper"),onClick:k,children:i.jsx("p",{children:g})})}):i.jsx(i.Fragment,{})}const Bc=f.Node.create({name:"attachment",content:"",marks:"",group:"block",selectable:!0,atom:!0,draggable:!0,addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),HTMLAttributes:{class:"attachment"},button:({editor:t,t:n})=>({component:y,componentProps:{action:()=>t.chain().focus().setAttachment().run(),isActive:()=>!1,disabled:!1,icon:"Attachment",tooltip:n("editor.attachment.tooltip")}})}},parseHTML(){return[{tag:"div[class=attachment]"}]},renderHTML({HTMLAttributes:e}){return["div",f.mergeAttributes(this.options.HTMLAttributes,e)]},addAttributes(){return{fileName:{default:null,parseHTML:K("filename")},fileSize:{default:null,parseHTML:K("filesize")},fileType:{default:null,parseHTML:K("filetype")},fileExt:{default:null,parseHTML:K("fileext")},url:{default:null,parseHTML:K("url")},hasTrigger:{default:!1,parseHTML:e=>K("hastrigger")(e)==="true"},error:{default:null,parseHTML:K("error")}}},addCommands(){return{setAttachment:(e={})=>({chain:t})=>t().insertContent({type:this.name,attrs:e}).run()}},addNodeView(){return f.ReactNodeViewRenderer(Dc)}}),tt={TOP_LEFT:"tl",TOP_RIGHT:"tr",BOTTOM_LEFT:"bl",BOTTOM_RIGHT:"br"};function $c(e){var I,O;const[t,n]=l.useState({width:b.IMAGE_MAX_SIZE,height:b.IMAGE_MAX_SIZE}),[r,a]=l.useState({width:0,height:0}),[o]=l.useState([tt.TOP_LEFT,tt.TOP_RIGHT,tt.BOTTOM_LEFT,tt.BOTTOM_RIGHT]),[s,c]=l.useState(!1),[h,d]=l.useState({x:0,y:0,w:0,h:0,dir:""}),{align:u}=(I=e==null?void 0:e.node)==null?void 0:I.attrs,m=l.useMemo(()=>{var H;const{src:E,alt:L,width:M,height:C}=(H=e==null?void 0:e.node)==null?void 0:H.attrs,D=v.isNumber(M)?`${M}px`:M,z=v.isNumber(C)?`${C}px`:C;return{src:E||void 0,alt:L||void 0,style:{width:D||void 0,height:z||void 0}}},[(O=e==null?void 0:e.node)==null?void 0:O.attrs]),x=l.useMemo(()=>{const{style:{width:E}}=m;return{width:E==="100%"?E:void 0}},[m]);function g(E){a({width:E.target.width,height:E.target.height})}function w(){const{editor:E,getPos:L}=e;E.commands.setNodeSelection(L())}const _=l.useCallback(v.throttle(()=>{const{editor:E}=e,{width:L}=getComputedStyle(E.view.dom);n(M=>({...M,width:Number.parseInt(L,10)}))},b.IMAGE_THROTTLE_WAIT_TIME),[e==null?void 0:e.editor]);function S(E,L){E.preventDefault(),E.stopPropagation();const M=r.width,C=r.height,D=M/C;let z=Number(e.node.attrs.width),H=Number(e.node.attrs.height);const R=t.width;z&&!H?(z=z>R?R:z,H=Math.round(z/D)):H&&!z?(z=Math.round(H*D),z=z>R?R:z):!z&&!H?(z=M>R?R:M,H=Math.round(z/D)):z=z>R?R:z,Me.flushSync(()=>{c(!0),d({x:E.clientX,y:E.clientY,w:z,h:H,dir:L})})}const A=l.useCallback(v.throttle(E=>{if(E.preventDefault(),E.stopPropagation(),!s)return;const{x:L,w:M,dir:C}=h,D=(E.clientX-L)*(/l/.test(C)?-1:1),z=v.clamp(M+D,b.IMAGE_MIN_SIZE,t.width);e.updateAttributes({width:z,height:null})},b.IMAGE_THROTTLE_WAIT_TIME),[s,h,t,e.updateAttributes]),k=l.useCallback(E=>{E.preventDefault(),E.stopPropagation(),s&&(Me.flushSync(()=>{d({x:0,y:0,w:0,h:0,dir:""}),c(!1)}),w())},[s,w]),j=l.useCallback(()=>{document==null||document.addEventListener("mousemove",A,!0),document==null||document.addEventListener("mouseup",k,!0)},[A,k]),N=l.useCallback(()=>{document==null||document.removeEventListener("mousemove",A,!0),document==null||document.removeEventListener("mouseup",k,!0)},[A,k]);l.useEffect(()=>(s?j():N(),()=>{N()}),[s,j,N]);const T=l.useMemo(()=>new ResizeObserver(()=>_()),[_]);return l.useEffect(()=>(T.observe(e.editor.view.dom),()=>{T.disconnect()}),[e.editor.view.dom,T]),i.jsx(f.NodeViewWrapper,{className:"image-view",style:{...x,width:"100%",textAlign:u},children:i.jsxs("div",{draggable:"true","data-drag-handle":!0,className:`image-view__body ${e!=null&&e.selected?"image-view__body--focused":""} ${s?"image-view__body--resizing":""}`,style:x,children:[i.jsx("img",{src:m.src,alt:m.alt,style:m.style,height:"auto",className:"image-view__body__image block",onLoad:g,onClick:w}),(e==null?void 0:e.editor.view.editable)&&((e==null?void 0:e.selected)||s)&&i.jsx("div",{className:"image-resizer",children:o==null?void 0:o.map(E=>i.jsx("span",{className:`image-resizer__handler image-resizer__handler--${E}`,onMouseDown:L=>S(L,E)},`image-dir-${E}`))})]})})}function Fc({selectImage:e,giphyApiKey:t,children:n}){const[r,a]=l.useState([]),[o]=l.useState(15),s=l.useRef(null),c=(d,u="search")=>{if(!t)return;const x=`${u==="search"?`https://api.giphy.com/v1/gifs/search?q=${d}`:`https://api.giphy.com/v1/gifs/trending?q=${d}`}&limit=${o}&api_key=${t}`;fetch(x).then(g=>g.json()).then(g=>{a(g.data)}).catch(g=>{console.log(g)})};l.useEffect(()=>{c("","trend")},[]);const h=l.useCallback(v.debounce(d=>{if(!d.target.value){c("","trend");return}c(d.target.value)},350),[]);return i.jsxs(ee,{modal:!0,children:[i.jsx(te,{asChild:!0,children:n}),i.jsx(Y,{hideWhenDetached:!0,className:"richtext-w-full richtext-h-full richtext-p-2",align:"start",side:"bottom",children:t?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"richtext-w-full richtext-mb-[10px]",children:i.jsx(Z,{ref:s,type:"text",placeholder:"Search GIF",onChange:h})}),i.jsx("div",{className:"richtext-max-h-[280px] richtext-overflow-y-auto",children:i.jsx("div",{className:"richtext-grid richtext-grid-cols-2 richtext-gap-1 ",children:r!=null&&r.length?r==null?void 0:r.map(d=>i.jsx("img",{alt:"giphy",className:"richtext-text-center richtext-cursor-pointer",onClick:u=>e(d),height:d.images.fixed_width_downsampled.height,width:d.images.fixed_width_downsampled.width,src:d.images.fixed_width_downsampled.url},`giphy-${d.id}`)):i.jsx("p",{children:"No GIFs found"})})})]}):i.jsx("div",{children:i.jsx("p",{children:"Missing Giphy API Key"})})})]})}function Vc({editor:e,icon:t,giphyApiKey:n,...r}){const a=o=>{const{url:s}=o.images.original;e.chain().focus().setImageGif({src:s}).run()};return i.jsx(Fc,{selectImage:a,giphyApiKey:n,children:i.jsx(y,{tooltip:r==null?void 0:r.tooltip,icon:t})})}const Vt=f.Image.extend({name:"imageGif",addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),inline:!1,content:"",marks:"",group:"block",GIPHY_API_KEY:"",draggable:!1,selectable:!0,atom:!0,button:({editor:t,extension:n,t:r})=>{var o;const a=((o=n==null?void 0:n.options)==null?void 0:o.GIPHY_API_KEY)||"";return{component:Vc,componentProps:{editor:t,action:()=>{},isActive:()=>!1,disabled:!1,icon:"GifIcon",tooltip:r("editor.imageGif.tooltip"),giphyApiKey:a}}}}},addAttributes(){var e;return{...(e=this.parent)==null?void 0:e.call(this),width:{default:null,parseHTML:t=>{const n=t.style.width||t.getAttribute("width")||"10";return n===void 0?null:Number.parseInt(`${n}`,10)},renderHTML:t=>({width:t.width})},align:{default:"center",parseHTML:t=>t.getAttribute("align"),renderHTML:t=>({align:t.align})}}},addNodeView(){return f.ReactNodeViewRenderer($c)},addCommands(){var e;return{...(e=this.parent)==null?void 0:e.call(this),setImageGif:t=>({commands:n})=>n.insertContent({type:this.name,attrs:t}),updateImageGif:t=>({commands:n})=>n.updateAttributes(this.name,t),setAlignImageGif:t=>({commands:n})=>n.updateAttributes(this.name,{align:t})}},renderHTML({HTMLAttributes:e}){const{align:t}=e;return["div",{style:t?`text-align: ${t};`:"",class:"imageGIf"},["img",f.mergeAttributes({height:"auto"},this.options.HTMLAttributes,e)]]},parseHTML(){return[{tag:"div[class=imageGIf]",getAttrs:e=>{const t=e.querySelector("img"),n=t==null?void 0:t.getAttribute("width");return{src:t==null?void 0:t.getAttribute("src"),alt:t==null?void 0:t.getAttribute("alt"),title:t==null?void 0:t.getAttribute("title"),width:n?Number.parseInt(n,10):null,align:(t==null?void 0:t.getAttribute("align"))||e.style.textAlign||null}}}]}}),fn=`graph TB
a-->b`,Uc=({editor:e,upload:t})=>{const[n,r]=l.useState(fn),[a,o]=l.useState(""),[s,c]=l.useState(!1),h=l.useRef(null),d=async x=>{try{const{svg:g}=await it.render("mermaid-svg",x);o(g)}catch{o("")}},u=()=>{it.initialize({darkMode:!1,startOnLoad:!1,fontSize:12,theme:"base"}),d(n)};l.useEffect(()=>{s&&u()},[s]),l.useEffect(()=>{s&&d(n)},[n]);const m=async()=>{if(n!==""){if(n){const x=h.current.querySelector("svg"),{width:g,height:w}=x.getBoundingClientRect(),_=`mermaid-${En()}.svg`;let S=v.i(x.outerHTML);if(t){const A=Dt(S,_);S=await t(A)}e==null||e.chain().focus().setMermaid({type:"mermaid",src:S,alt:encodeURIComponent(n),width:g,height:w},!!n).run()}c(!1)}};return i.jsxs(ke,{open:s,onOpenChange:c,children:[i.jsx(Ce,{asChild:!0,children:i.jsx(y,{icon:"Mermaid",tooltip:"Mermaid",action:()=>c(!0)})}),i.jsxs(me,{className:"!richtext-max-w-[1300px] richtext-z-[99999]",children:[i.jsx(xe,{children:"Mermaid"}),i.jsx("div",{style:{height:"100%",borderWidth:1},children:i.jsxs("div",{className:"richtext-flex richtext-gap-[10px] richtext-rounded-[10px] richtext-p-[10px]",children:[i.jsx(Ke,{className:"richtext-flex-1",value:n,onChange:x=>r(x.target.value),autoFocus:!0,required:!0,rows:10,defaultValue:fn,placeholder:"Text",style:{color:"hsl(var(--richtext-foreground))"}}),i.jsx("div",{className:"richtext-flex-1 richtext-flex richtext-items-center richtext-justify-center richtext-rounded-[10px] richtext-p-[10px]",style:{height:"100%",borderWidth:1,minHeight:500,background:"#fff"},ref:h,dangerouslySetInnerHTML:{__html:a}})]})}),i.jsx(De,{children:i.jsx(F,{type:"button",onClick:m,children:"Save changes"})})]})]})},nt={TOP_LEFT:"tl",TOP_RIGHT:"tr",BOTTOM_LEFT:"bl",BOTTOM_RIGHT:"br"};function Wc({editor:e,node:t,updateAttributes:n,getPos:r,selected:a}){const[o,s]=l.useState({width:b.IMAGE_MAX_SIZE,height:b.IMAGE_MAX_SIZE}),[c,h]=l.useState({width:0,height:0}),[d]=l.useState([nt.TOP_LEFT,nt.TOP_RIGHT,nt.BOTTOM_LEFT,nt.BOTTOM_RIGHT]),[u,m]=l.useState(!1),[x,g]=l.useState({x:0,y:0,w:0,h:0,dir:""}),{align:w}=t==null?void 0:t.attrs,_=l.useMemo(()=>{const{src:M,alt:C,width:D,height:z}=t==null?void 0:t.attrs,H=f.isNumber(D)?`${D}px`:D,R=f.isNumber(z)?`${z}px`:z;return{src:M||void 0,alt:C||void 0,style:{width:H||void 0,height:R||void 0}}},[t==null?void 0:t.attrs]),S=l.useMemo(()=>{const{style:{width:M}}=_;return{width:M==="100%"?M:void 0}},[_]);function A(M){h({width:M.target.width,height:M.target.height})}function k(){e.commands.setNodeSelection(r())}const j=l.useCallback(v.throttle(()=>{const{width:M}=getComputedStyle(e.view.dom);s(C=>({...C,width:Number.parseInt(M,10)}))},b.IMAGE_THROTTLE_WAIT_TIME),[e]);function N(M,C){M.preventDefault(),M.stopPropagation();const D=c.width,z=c.height,H=D/z;let R=Number(t.attrs.width),U=Number(t.attrs.height);const q=o.width;R&&!U?(R=R>q?q:R,U=Math.round(R/H)):U&&!R?(R=Math.round(U*H),R=R>q?q:R):!R&&!U?(R=D>q?q:D,U=Math.round(R/H)):R=R>q?q:R,Me.flushSync(()=>{m(!0),g({x:M.clientX,y:M.clientY,w:R,h:U,dir:C})})}const T=l.useCallback(v.throttle(M=>{if(M.preventDefault(),M.stopPropagation(),!u)return;const{x:C,w:D,dir:z}=x,H=(M.clientX-C)*(/l/.test(z)?-1:1),R=Tn(D+H,b.IMAGE_MIN_SIZE,o.width);n({width:R,height:null})},b.IMAGE_THROTTLE_WAIT_TIME),[u,x,o,n]),I=l.useCallback(M=>{M.preventDefault(),M.stopPropagation(),u&&(Me.flushSync(()=>{g({x:0,y:0,w:0,h:0,dir:""}),m(!1)}),k())},[u,k]),O=l.useCallback(()=>{document==null||document.addEventListener("mousemove",T,!0),document==null||document.addEventListener("mouseup",I,!0)},[T,I]),E=l.useCallback(()=>{document==null||document.removeEventListener("mousemove",T,!0),document==null||document.removeEventListener("mouseup",I,!0)},[T,I]);l.useEffect(()=>(u?O():E(),()=>{E()}),[u,O,E]);const L=l.useMemo(()=>new ResizeObserver(()=>j()),[j]);return l.useEffect(()=>(L.observe(e.view.dom),()=>{L.disconnect()}),[e.view.dom,L]),i.jsx(f.NodeViewWrapper,{className:"image-view",style:{...S,width:"100%",textAlign:w},children:i.jsxs("div",{draggable:"true","data-drag-handle":!0,className:`image-view__body ${a?"image-view__body--focused":""} ${u?"image-view__body--resizing":""}`,style:{...S,background:"#fff"},children:[i.jsx("img",{src:_.src,alt:_.alt,style:_.style,height:"auto",className:"image-view__body__image block",onLoad:A,onClick:k}),e.view.editable&&(a||u)&&i.jsx("div",{className:"image-resizer",children:d==null?void 0:d.map(M=>i.jsx("span",{className:`image-resizer__handler image-resizer__handler--${M}`,onMouseDown:C=>N(C,M)},`image-dir-${M}`))})]})})}const Mt=f.Image.extend({name:"mermaid",addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),inline:!1,content:"",marks:"",group:"block",draggable:!1,selectable:!0,atom:!0,HTMLAttributes:{class:"mermaid"},button:({editor:t,t:n,extension:r})=>{var a;return{component:Uc,componentProps:{action:()=>{},isActive:()=>!1,disabled:!1,editor:t,icon:"Mermaid",tooltip:n("editor.mermaid.tooltip"),upload:(a=r==null?void 0:r.options)==null?void 0:a.upload}}}}},addAttributes(){var e;return{...(e=this.parent)==null?void 0:e.call(this),width:{default:null,parseHTML:t=>{const n=t.style.width||t.getAttribute("width")||"10";return n===void 0?null:Number.parseInt(`${n}`,10)},renderHTML:t=>({width:t.width})},height:{default:null,parseHTML:t=>{const n=t.style.height||t.getAttribute("height")||"10";return n===void 0?null:Number.parseInt(`${n}`,10)},renderHTML:t=>({height:t.height})},align:{default:"center",parseHTML:t=>t.getAttribute("align"),renderHTML:t=>({align:t.align})}}},addNodeView(){return f.ReactNodeViewRenderer(Wc)},addCommands(){return{setMermaid:(e,t)=>({commands:n,editor:r})=>t?n.insertContent({type:this.name,attrs:e}):n.insertContentAt(r.state.selection.anchor,{type:this.name,attrs:e}),setAlignImageMermaid:e=>({commands:t})=>t.updateAttributes(this.name,{align:e})}},renderHTML({HTMLAttributes:e}){const{align:t}=e;return["div",{style:t?`text-align: ${t};`:"",class:"imageMermaid"},["img",f.mergeAttributes(this.options.HTMLAttributes,e)]]},parseHTML(){return[{tag:"div[class=imageMermaid]",getAttrs:e=>{const t=e.querySelector("img"),n=t==null?void 0:t.getAttribute("width"),r=t==null?void 0:t.getAttribute("height");return{src:t==null?void 0:t.getAttribute("src"),alt:t==null?void 0:t.getAttribute("alt"),width:n?Number.parseInt(n,10):null,height:r?Number.parseInt(r,10):null,align:(t==null?void 0:t.getAttribute("align"))||e.style.textAlign||null}}}]}});exports.Attachment=Bc;exports.BaseKit=Oo;exports.Blockquote=_o;exports.Bold=Oa;exports.BulletList=go;exports.Clear=bo;exports.Code=$a;exports.CodeBlock=Gn;exports.Color=xo;exports.Column=ht;exports.ColumnActionButton=Eo;exports.Emoji=tc;exports.Excalidraw=be;exports.ExportPdf=cc;exports.ExportWord=bc;exports.FontFamily=ro;exports.FontSize=ho;exports.FormatPainter=js;exports.Heading=oo;exports.Highlight=fo;exports.History=No;exports.HorizontalRule=jo;exports.Iframe=pe;exports.Image=ds;exports.ImageGif=Vt;exports.ImportWord=uc;exports.Indent=$o;exports.Italic=Pa;exports.Katex=_e;exports.LineHeight=Go;exports.Link=yo;exports.Mention=zc;exports.Mermaid=Mt;exports.MoreMark=Bo;exports.MultiColumn=Re;exports.OrderedList=po;exports.RichTextEditor=$r;exports.SearchAndReplace=Yn;exports.SlashCommand=Qo;exports.Strike=Ba;exports.SubAndSuperScript=Po;exports.Table=ys;exports.TableOfContents=Qn;exports.TaskList=wo;exports.TextAlign=co;exports.TextDirection=Ac;exports.Twitter=rt;exports.Underline=Da;exports.Video=Xn;exports.mitt=Nn;
